{"version":3,"sources":["scripts/app.js"],"names":["angular","module","UnitDestroyController","$uibModalInstance","vm","this","ok","close","cancel","dismiss","$inject","controller","ExerciseDestroyController","exerciseShow","ExerciseController","models","$state","units","$q","$scope","$uibModal","data","availableOptions","id","name","setLoading","res","loading","resolve","unsetLoading","submit","form","exercise_type","exercise_type_temp","then","updateExercise","exercise","$watch","newVal","oldVal","copy","model","destroy","open","templateUrl","controllerAs","windowClass","result","destroyExercise","element","triggerHandler","directive","restrict","bindToController","scope","section","AdminController","UnitController","$stateParams","show","getSectionA","unit","unit_section_a","getSectionB","unit_section_b","getSectionC","unit_section_c","getSectionD","unit_section_d","getSectionE","unit_section_e","getExercises","ProfileController","LoginController","users","galoreApi","errorManager","user","login","go","factory","utils","findFirst","array","i","length","findFirstByName","removeFirst","found","splice","sortByOrder","isArray","sort","a","b","order","mergeOrPush","elem","added","merge","push","DashboardController","CreateUnitController","RangeFilter","input","min","max","parseInt","filter","file","UploadFileLink","el","bind","event","files","target","$apply","link","uiState","toggleSwitch","ToggleSwitchController","publish","publishUnit","published","unpublish","unpublishUnit","tabVideo","TabVideoController","video","tabTheoryInDepth","tabTheory","tabInfoSection","showOnHover","linkFunc","visible","removeClass","addClass","showAnimate","updateVisibility","hover","sectionUnit","SectionUnitController","$http","update","destroyUnit","animationsEnabled","current_unit","sectionE","SectionEController","activeTabIndex","tabs","updateSection","current_unit_sections_e_exercises","exercises","sectionD","SectionDController","submitUpload","video_url","video_filename","uploadVideo","filename","type","uploadVideoS3","upload_url","submitSection","removeVideo","sectionC","SectionCController","current_unit_sections_c_exercises","sectionB","SectionBController","sectionA","SectionAController","longTermMemory","$log","apiUrl","resPipe","parseResponse","helpers","validModels","_model","injectDefaults","fetchModel","forEachModel","injectProjectDefaults","injectUserDefaults","markReload","m","_reload","markDestroyed","_destroyed","removeUnitFromLevels","unitId","levelId","levels","curUnit","sortFramesAndComments","forEach","project","sortFramesAndCommentsSingle","sortFramesCache","getRelatedProject","frames","sortCommentsCache","frame","getRelatedFrame","comments","updateCache","level","updateModelCache","getRelatedLevel","current_unit_section_a","current_unit_section_b","current_unit_section_c","current_unit_section_d","current_unit_section_e","current_unit_sections_d_exercises","current_exercise","cleanCache","current_user","pruneProjectCache","projects","ids","newCache","indexOf","owner","forcePruneProjectCache","removeFromCache","removeProjectFileFromCache","setProjectAsMine","setProjectAsMineSingle","updateCurrent","humanize","humanizeProject","memorizeCache","v","k","memorize","sideEffects","side_effects","project_files","warn","log","info","debugger","_project_id","level_id","_frame_id","func","image","download_url","privateString","modelCache","newData","merged","key","val","localStorage","toJson","remember","fromJson","e","forget","oblivion","clear","galoreSidebar","$timeout","SidebarController","state","addUnit","unit_code","sub_unit_code","sortUnits","keyA","keyB","value","newUnit","title","create","SidebarLink","window","trigger","replace","galoreHeader","HeaderController","HeaderLink","galoreFooter","FooterController","FooterLink","$auth","unitApiUrl","showLevelsApiUrl","sectionApiUrl","exercisesApiUrl","cache","cacheOrHttp","method","url","headers","keep","absUrl","config","toUpperCase","promise","err","reject","response","expect200","status","expect201","expect204","galoreoApi","submitLogin","getMe","logout","signOut","changePassword","updatePassword","createUnit","createExercise","showUnit","indexLevels","updateUnit","section_id","file_type","Content-Type","if-modified-since","undefined","uploadImage","exercise_id","exercise_item_id","exerciseTextText","exerciseTextTextController","addRow","newRow","exercise_text_text_item","deleteRow","exerciseImageText","exerciseImageTextController","exercise_image_text_item","item_number","text_en","searchDataRow","row","saveChanges","exerciseDialogue","exerciseDialogueController","dynamicPopover","TabExerciseController","selectedOption","unit_section_id","unit_section_type","addTab","newTab","exercise_ids","toastr","error","isObject","getErrorString","isString","full_messages","error_description","errors","msg","myErr","join","reset","ckeditorStandard","CkEditorStandardController","options","language","allowedContent","entities","toolbar","colorButton_colors","colorButton_enableMore","colorButton_enableAutomatic","toolbar_Full","items","ckeditorColor","CkEditorColorController","instanceCondition","action","resource","instance","perms","can","cond","instanceConditions","canManage","manage","canUpdate","canShow","canIndex","index","customCan","canDirective","attr","watcher","shown","negative","toShow","parsed","split","slice","substr","$on","boxExpander","boxExpanderLink","collapse","me","updateMe","addInstanceConditions","getInstanceConditions","debug","uploadPromises","exercise_image_text_items","item","image_url","all","runBlock","$rootScope","defaultBodyClasses","stateChangeSuccess","toState","pms","params","bodyClasses","run","routerConfig","$stateProvider","$urlRouterProvider","abstract","currentUser","validateUser","signedIn","levelsData","onEnter","otherwise","constant","$logProvider","toastrConfig","$animateProvider","$locationProvider","$provide","$authProvider","debugEnabled","classNameFilter","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","html5Mode","hashPrefix","configure","tokenValidationPath","signOutUrl","emailRegistrationPath","accountDeletePath","passwordResetPath","passwordUpdatePath","passwordResetSuccessUrl","location","origin","emailSignInPath","$templateCache","put"],"mappings":"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","file":"scripts/app-b5f7767e58.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore', [\n      'ngAnimate',\n      'ngCookies',\n      'ngSanitize',\n      'ngMessages',\n      'ui.router',\n      'toastr',\n      'ui.bootstrap',\n      'ng-token-auth',\n      'ckeditor'\n      ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('UnitDestroyController', UnitDestroyController);\n\n  /** @ngInject */\n  function UnitDestroyController($uibModalInstance) {\n    var vm = this;\n\n    vm.ok = function () {\n      $uibModalInstance.close(true);\n    }\n\n    vm.cancel = function () {\n      $uibModalInstance.dismiss();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('ExerciseDestroyController', ExerciseDestroyController);\n\n  /** @ngInject */\n  function ExerciseDestroyController($uibModalInstance) {\n    var vm = this;\n\n    vm.ok = function () {\n      $uibModalInstance.close(true);\n    }\n\n    vm.cancel = function () {\n      $uibModalInstance.dismiss();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exerciseShow', exerciseShow);\n\n  /** @ngInject */\n  function exerciseShow() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/exercise/exerciseShow/exerciseShow.html',\n      controller: ExerciseController,\n      controllerAs: 'exerciseShow',\n      bindToController: true,\n      scope:{\n        model: '=',\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function ExerciseController(models, $state, units, $q, $scope, $uibModal) {\n      var vm = this;\n      vm.models = models;\n\n      vm.data = {\n         availableOptions: [\n             {id: 1 , name: 'Dropdown'},\n             {id: 2 , name: 'Completamento'},\n             {id: 3 , name: 'Trova l’intruso'},\n             {id: 4 , name: 'Riordina la parola'},\n             {id: 5 , name: 'Riordina le frasi'},\n             {id: 6 , name: 'Connetti immagine/frase'},\n             {id: 7 , name: 'Connetti frase/frase'},\n             {id: 8 , name: 'Vero o Falso'},\n             {id: 9 , name: 'Memory'},\n             {id: 10 , name: 'Dialogo'}\n          ]\n      };\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n\n      vm.submit = function () {\n\n        vm.form.exercise_type = vm.exercise_type_temp.id;\n\n        return vm.setLoading()\n          .then(units.updateExercise(vm.form.id,  {'exercise':vm.form}))\n          .finally(vm.unsetLoading);\n      }\n\n      $scope.$watch('exerciseShow.model', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n            vm.form = angular.copy(vm.model);\n        }\n      });\n\n      vm.destroy = function() {\n        $uibModal.open({\n            templateUrl: 'app/components/exercise/destroy/destroy.html',\n            controller: 'ExerciseDestroyController',\n            controllerAs: 'exerciseDestroy',\n            windowClass: 'modal-default'\n          }).result\n          .then(function (res) {\n            if(res === true){\n              return units\n                  .destroyExercise(vm.form)\n                  .then(function(){\n                     angular.element('.nav-tabs li:first-child').triggerHandler('click');\n                  })\n            }\n          })\n      }\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('AdminController', AdminController)\n\n  /** @ngInject */\n  function AdminController(models) {\n    var vm = this;\n\n    vm.models = models;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('UnitController', UnitController);\n\n  /** @ngInject */\n  function UnitController(models, units, $stateParams) {\n    var vm = this;\n    vm.models = models;\n\n    units.show($stateParams.id)\n          .then(function(res){\n            units.getSectionA(res.unit.unit_section_a.id);\n            units.getSectionB(res.unit.unit_section_b.id);\n            units.getSectionC(res.unit.unit_section_c.id);\n            units.getSectionD(res.unit.unit_section_d.id);\n            units.getSectionE(res.unit.unit_section_e.id);\n\n            units.getExercises('c', res.unit.unit_section_c.id);\n          });\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('ProfileController', ProfileController);\n\n  /** @ngInject */\n  function ProfileController(models) {\n    var vm = this;\n    vm.models = models;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('LoginController', LoginController);\n\n  /** @ngInject */\n  function LoginController(users, $state, galoreApi, errorManager) {\n    var vm = this;\n\n    vm.user = vm.user || {};\n\n    // Login with username and password\n    vm.login = function () {\n      galoreApi\n        .login(vm.user)\n        .then(function () {\n          $state.go('main.admin.dashboard');\n        })\n        .catch(errorManager);\n    }\n  }\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * UI state service.\n   * Keep application-wide shared variables\n   */\n  .factory('utils', function () {\n    var utils = {\n      /**\n       * Find the first occurrence of an object (given an 'id' field) in an array\n       */\n      findFirst: function(array,id) {\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].id === id){\n            return array[i];\n          }\n        }\n        return null;\n      },\n\n      /**\n       * Find the first occurrence of an object (given a 'name' field) in an array\n       */\n      findFirstByName: function(array,name) {\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].name === name){\n            return array[i];\n          }\n        }\n        return null;\n      },\n\n      /**\n      * Remove the first occurence of a an object (given an 'id' field) in an array\n      */\n      removeFirst: function (array, id) {\n        var found = false;\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].id === id){\n            found = i;\n            break;\n          }\n        }\n        array.splice(found,1);\n      },\n\n      /**\n       * Sort given array by 'order' key\n       */\n      sortByOrder: function(array) {\n        if(angular.isArray(array)){\n          return array.sort(function(a,b) {\n            if(a.order > b.order){\n              return 1;\n            }\n            if(a.order < b.order){\n              return -1;\n            }\n            return 0;\n          });\n        }\n        return array;\n      },\n\n      /**\n       * Try to merge elem to a target object with the same id in array\n       * If the target doesn't exist, push elem in the array\n       */\n      mergeOrPush: function(array,elem) {\n        var added = utils.merge(array, elem);\n        if(!added){\n          added = elem;\n          array.push(added);\n        }\n        return added;\n      },\n\n      /**\n       * Merge elem to a target object with the same id in array\n       * If the target doesn't exist, return null\n       */\n      merge: function(array, elem) {\n        var found = utils.findFirst(array, elem.id);\n        if(found){\n          angular.merge(found, elem);\n        }\n        return found;\n      }\n    };\n\n    return utils;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('DashboardController', DashboardController);\n\n  /** @ngInject */\n  function DashboardController(models) {\n    var vm = this;\n    vm.models = models;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('CreateUnitController', CreateUnitController)\n    .filter('range', RangeFilter);\n\n  /** @ngInject */\n  function CreateUnitController(models) {\n    var vm = this;\n    vm.models = models;\n  }\n\n  function RangeFilter(){\n    return function(input, min, max) {\n        min = parseInt(min);\n        max = parseInt(max);\n        for (var i=min; i<max; i++)\n          input.push(i);\n        return input;\n      };\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('file', file);\n\n  /** @ngInject */\n  function file() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/uploadFile/uploadFile.html',\n      link: UploadFileLink,\n      scope:{\n        model: '='\n      }\n    };\n\n    return directive;\n\n\n    function UploadFileLink(scope, el) {\n      el.bind('change', function(event){\n          var files = event.target.files;\n          var file = files[0];\n          scope.model.file = file;\n          scope.$apply();\n        });\n    }\n\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * UI state service.\n   * Keep application-wide shared variables\n   */\n  .factory('uiState', function () {\n    var uiState = {};\n\n    return uiState;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('toggleSwitch', toggleSwitch);\n\n  /** @ngInject */\n  function toggleSwitch() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/toggleSwitch/toggleSwitch.html',\n      controller: ToggleSwitchController,\n      controllerAs: 'toggleSwitch',\n      bindToController: true,\n      scope:{\n        model: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function ToggleSwitchController(models, units){\n      var vm = this;\n      vm.models = models;\n\n      vm.publish = function(){\n        units\n          .publishUnit(vm.model.id)\n          .then(function(){\n            vm.model.published = true;\n          });\n      }\n\n      vm.unpublish = function(){\n        units\n        .unpublishUnit(vm.model.id)\n        .then(function(){\n          vm.model.published = false;\n        });\n      }\n    }\n  }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabVideo', tabVideo);\n\n    /** @ngInject */\n    function tabVideo(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabVideo/tabVideo.html',\n        controller: TabVideoController,\n        controllerAs: 'tabVideo',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function TabVideoController(models, $scope) {\n        var vm = this;\n        vm.models = models;\n\n        $scope.$watch('tabVideo.model', function (newVal, oldVal) {\n            if(newVal !== oldVal) {\n              vm.model.video = {};\n            }\n        });\n      }\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabTheoryInDepth', tabTheoryInDepth);\n\n    /** @ngInject */\n    function tabTheoryInDepth(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabTheoryInDepth/tabTheoryInDepth.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabTheory', tabTheory);\n\n    /** @ngInject */\n    function tabTheory(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabTheory/tabTheory.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabInfoSection', tabInfoSection);\n\n    /** @ngInject */\n    function tabInfoSection(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabInfoSection/tabInfoSection.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('showOnHover', showOnHover);\n\n  /** @ngInject */\n  function showOnHover() {\n    var directive = {\n      restrict: 'A',\n      link: linkFunc,\n      scope: {\n        showOnHover: '@',\n        showAnimate: '='\n      }\n    };\n\n    return directive;\n\n    function linkFunc(scope, el) {\n      var visible = false;\n      var target = angular.element(scope.showOnHover);\n\n      scope.$watch('showOnHover', function () {\n        target.removeClass('show-on-hover-target').removeClass('not-visible').removeClass('show-animate');\n        target = angular.element(scope.showOnHover);\n        target.addClass('show-on-hover-target');\n        if(scope.showAnimate){\n          target.addClass('show-animate');\n        }\n        scope.updateVisibility();\n      })\n\n      scope.updateVisibility = function () {\n        if(visible){\n          target.removeClass('not-visible');\n        }\n        else{\n          target.addClass('not-visible');\n        }\n      }\n\n      el.hover(function() {\n          if(!visible){\n            visible = true;\n            scope.updateVisibility();\n          }\n        },\n        function() {\n          if(visible){\n            visible = false;\n            scope.updateVisibility();\n          }\n        }\n      );\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionUnit', sectionUnit);\n\n  /** @ngInject */\n  function sectionUnit() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionUnit/sectionUnit.html',\n      controller: SectionUnitController,\n      controllerAs: 'sectionUnit',\n      bindToController: true,\n      scope: {\n        unit: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionUnitController(models, $state, units, $q, $scope, $http, $uibModal) {\n      var vm = this;\n      vm.models = models;\n\n      vm.setLoading = function () {\n        vm.loading = true;\n        return $q.resolve();\n      }\n\n      vm.unsetLoading = function () {\n        vm.loading = false;\n        return $q.resolve();\n      }\n\n      vm.submit = function (id) {\n        return vm.setLoading()\n        .then(function(){\n          return units.update(id, {'unit': vm.form});\n        })\n        .finally(vm.unsetLoading);\n      }\n\n      vm.destroy = function() {\n        $uibModal.open({\n            templateUrl: 'app/pages/unit/destroy/destroy.html',\n            controller: 'UnitDestroyController',\n            controllerAs: 'unitDestroy',\n            windowClass: 'modal-default'\n          }).result\n          .then(function (res) {\n            if(res === true){\n              return units.destroyUnit(vm.form);\n            }\n          })\n          .then($state.go('main.admin.dashboard'))\n      }\n\n      vm.animationsEnabled = true;\n\n      $scope.$watch('sectionUnit.unit', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n          vm.form = angular.copy(vm.models.current_unit);\n        }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionE', sectionE);\n\n  /** @ngInject */\n  function sectionE() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionE/sectionE.html',\n      controller: SectionEController,\n      controllerAs: 'sectionE',\n      bindToController: true,\n      scope:{\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionEController(models, $state, units, $q, $scope) {\n      var vm = this;\n      vm.models = models;\n\n      vm.activeTabIndex = 0\n      vm.tabs = [];\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submit = function () {\n        return vm.setLoading()\n          .then(units.updateSection('e',vm.form.id,{'unit_section_e': vm.form}))\n          .finally(vm.unsetLoading);\n      }\n\n      vm.getExercises = function(){\n         return vm.setLoading()\n          .then(units.getExercises('e', vm.form.id))\n          .finally(vm.unsetLoading);\n      }\n\n      $scope.$watch('sectionE.section', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n          vm.form = angular.copy(vm.section);\n        }\n      });\n\n\n      $scope.$watch('sectionE.form.active', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n            vm.submit();\n        }\n      });\n      $scope.$watch('sectionE.models.current_unit_sections_e_exercises.exercises', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n            vm.models.current_unit_sections_e_exercises.exercises = newVal;\n        }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionD', sectionD);\n\n  /** @ngInject */\n  function sectionD() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionD/sectionD.html',\n      controller: SectionDController,\n      controllerAs: 'sectionD',\n      bindToController: true,\n      scope: {\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionDController(models, $state, units, $q, $scope) {\n      var vm = this;\n      vm.models = models;\n\n      vm.setLoading = function () {\n        vm.loading = true;\n        return $q.resolve();\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submitUpload = function(id){\n        var video_url = \"\";\n        var video_filename = \"\";\n        return units\n          .uploadVideo('d', id, { filename: vm.form.video.file.name, type: vm.form.video.file.type })\n          .then(function(res) {\n            video_filename = res.video_filename;\n            video_url = res.video_url;\n            return units.uploadVideoS3(res.upload_url, vm.form.video.file.type, vm.form.video.file)\n          })\n          .then(function(){\n            vm.form.video_url = video_url;\n            vm.section.video_url = video_url;\n            vm.form.video_filename = video_filename;\n            vm.section.video_filename = video_filename;\n            delete vm.form.video;\n          });\n      }\n\n      vm.submitSection = function(id){\n        return units.updateSection('d',id,{'unit_section_d': vm.form});\n      }\n\n      vm.submit = function () {\n\n        return vm.setLoading()\n          .then(function(){\n            if(vm.form.video && vm.form.video.file){\n              return vm.submitUpload(vm.section.id);\n            }\n          })\n          .then(function(){\n            return vm.submitSection(vm.section.id);\n          })\n          .finally(vm.unsetLoading);\n      }\n\n      vm.removeVideo = function(){\n        vm.form.video_url = \"\";\n        vm.form.video.file = null;\n      }\n\n      $scope.$watch('sectionD.section', function (newVal, oldVal) {\n          if(newVal !== oldVal) {\n            vm.form = angular.copy(vm.section);\n          }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionC', sectionC);\n\n  /** @ngInject */\n  function sectionC() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionC/sectionC.html',\n      controller: SectionCController,\n      controllerAs: 'sectionC',\n      bindToController: true,\n      scope:{\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionCController(models, $state, units, $q, $scope) {\n      var vm = this;\n      vm.models = models;\n\n      vm.activeTabIndex = 0\n      vm.tabs = [];\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submit = function () {\n        return vm.setLoading()\n          .then(units.updateSection('c',vm.form.id,{'unit_section_c': vm.form}))\n          .finally(vm.unsetLoading);\n      }\n\n      vm.getExercises = function(){\n         return vm.setLoading()\n          .then(units.getExercises('c', vm.form.id))\n          .finally(vm.unsetLoading);\n      }\n\n      $scope.$watch('sectionC.section', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n          vm.form = angular.copy(vm.section);\n        }\n      });\n\n\n      $scope.$watch('sectionC.form.active', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n            //vm.submit();\n        }\n      });\n      $scope.$watch('sectionC.models.current_unit_sections_c_exercises.exercises', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n            vm.models.current_unit_sections_c_exercises.exercises = newVal;\n        }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionB', sectionB);\n\n  /** @ngInject */\n  function sectionB() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionB/sectionB.html',\n      controller: SectionBController,\n      controllerAs: 'sectionB',\n      bindToController: true,\n      scope:{\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionBController(models, $state, units, $q, $scope) {\n      var vm = this;\n      vm.models = models;\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submit = function () {\n        return vm.setLoading()\n          .then(units.updateSection('b',vm.form.id,{'unit_section_b': vm.form}))\n          .finally(vm.unsetLoading);\n      }\n\n      $scope.$watch('sectionB.section', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n          vm.form = angular.copy(vm.section);\n        }\n      });\n\n\n      $scope.$watch('sectionB.form.active', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n            vm.submit();\n        }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionA', sectionA);\n\n  /** @ngInject */\n  function sectionA() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionA/sectionA.html',\n      controller: SectionAController,\n      controllerAs: 'sectionA',\n      bindToController: true,\n      scope: {\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionAController(models, $state, units, $q, $scope) {\n      var vm = this;\n      vm.models = models;\n\n      vm.setLoading = function () {\n        vm.loading = true;\n        return $q.resolve();\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submitUpload = function(id){\n        var video_url = \"\";\n        var video_filename = \"\";\n        return units\n          .uploadVideo('a', id, { filename: vm.form.video.file.name, type: vm.form.video.file.type })\n          .then(function(res) {\n            video_filename = res.video_filename;\n            video_url = res.video_url;\n            return units.uploadVideoS3(res.upload_url, vm.form.video.file.type, vm.form.video.file)\n          })\n          .then(function(){\n            vm.form.video_url = video_url;\n            vm.form.video_filename = video_filename;\n            vm.section.video_url = video_url;\n            vm.section.video_filename = video_filename;\n            delete vm.form.video;\n          });\n      }\n\n      vm.submitSection = function(id){\n        return units.updateSection('a',id,{'unit_section_a': vm.form});\n      }\n\n      vm.submit = function () {\n\n        return vm.setLoading()\n          .then(function(){\n            if(vm.form.video && vm.form.video.file){\n              return vm.submitUpload(vm.section.id);\n            }\n          })\n          .then(function(){\n            return vm.submitSection(vm.section.id);\n          })\n          .finally(vm.unsetLoading);\n      }\n\n      vm.removeVideo = function(){\n        vm.form.video_url = \"\";\n        $scope.file = null;\n      }\n\n      $scope.$watch('sectionA.section', function (newVal, oldVal) {\n          if(newVal !== oldVal) {\n            vm.form = angular.copy(vm.section);\n          }\n      });\n\n    }\n\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Response management pipeline.\n   * Utilities to process a response from the moment it arrives to the models update.\n   * To use in a promise chain as a pipeline\n   */\n  .factory('resPipe', function (longTermMemory, models, utils, $log, apiUrl) {\n    var resPipe = {\n\n      /**\n       * Parse the initial response\n       */\n      parseResponse: function(res) {\n        // Look for a valid model inside the response\n        for (var i = 0; i < helpers.validModels.length; i++) {\n          if(res[helpers.validModels[i]]){\n            res._model = helpers.validModels[i]; // Put the name of the model in res._model\n            break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Inject some default values inside the response\n       */\n      injectDefaults: function(res) {\n        // Parse the model depending of its nature\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'projects':\n            case 'project':\n              helpers.forEachModel(model, helpers.injectProjectDefaults);\n              break;\n            case 'users':\n            case 'user':\n              helpers.forEachModel(model, helpers.injectUserDefaults);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n      * Mark the model as to be reloaded. This allows the resPipe to delete it\n      * from cache (if present) and to add it again\n      */\n      markReload: function (res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, function (m) {\n          m._reload = true;\n        });\n        return res;\n      },\n\n\n      /**\n      * Mark the model as destroyed. This allows the resPipe to delete it\n      * from cache (if present)\n      */\n      markDestroyed: function (res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, function (m) {\n          m._destroyed = true;\n        });\n        return res;\n      },\n\n      /**\n       * Remove a unit from the model level\n       */\n      removeUnitFromLevels: function (unitId, levelId) {\n        if(!models.levels) return;\n\n        // Look for the right player\n        for (var i = 0; i < models.levels[levelId].units.length; i++) {\n          var curUnit = models.levels[levelId].units[i];\n          if(curUnit.id === unitId){\n            models.levels[levelId].units.splice(i,1);\n          }\n        }\n        return models.levels;\n      },\n\n      /**\n       * Sort frames and comments in projects\n       */\n      sortFramesAndComments: function(res) {\n        var model = helpers.fetchModel(res);\n        if(angular.isArray(model)){\n          angular.forEach(model, function(project) {\n            helpers.sortFramesAndCommentsSingle(project);\n          });\n        }\n        else if(model){\n          helpers.sortFramesAndCommentsSingle(model);\n        }\n        return res;\n      },\n\n      /**\n       * Sort frames in cache\n       */\n      sortFramesCache: function(res) {\n        var project = helpers.getRelatedProject(res);\n        if(project && project.frames){\n          utils.sortByOrder(project.frames);\n        }\n        return res;\n      },\n\n      /**\n       * Sort Comments given order\n       */\n      sortCommentsCache: function(res) {\n        var frame = helpers.getRelatedFrame(res);\n        if(frame && frame.comments){\n          utils.sortByOrder(frame.comments);\n        }\n        return res;\n      },\n\n      /**\n       * Update models cache\n       */\n      updateCache: function(res) {\n        var model = helpers.fetchModel(res);\n        var level = null;\n        if(model){\n          switch(res._model){\n            case 'levels':\n              res[res._model] = helpers.updateModelCache(models.levels, model);\n              break;\n            case 'unit':\n              level = helpers.getRelatedLevel(res);\n              res[res._model] = helpers.updateModelCache(level.units, model);\n              break;\n            case 'unit_section_a':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_a, model);\n              break;\n            case 'unit_section_b':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_b, model);\n              break;\n            case 'unit_section_c':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_c, model);\n              break;\n            case 'unit_section_d':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_d, model);\n              break;\n            case 'unit_section_e':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_e, model);\n              break;\n            case 'unit_sections_c_exercises':\n              res[res._model] = helpers.updateModelCache(models.current_unit_sections_c_exercises, model);\n              break;\n            case 'unit_sections_d_exercises':\n              res[res._model] = helpers.updateModelCache(models.current_unit_sections_d_exercises, model);\n              break;\n            case 'unit_sections_e_exercises':\n              res[res._model] = helpers.updateModelCache(models.current_unit_sections_e_exercises, model);\n              break;\n            case 'exercise':\n              res[res._model] = helpers.updateModelCache(models.current_exercise, model);\n              break;\n            case 'user':\n            case 'users':\n              res[res._model] = helpers.updateModelCache(models.users, model);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Update models cache\n       */\n      cleanCache: function(res) {\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'users':\n              models.users = [];\n              if(models.current_user){\n                models.users.push(models.current_user);\n              }\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Prune the cache, removing old projects which probably has been deleted\n       */\n      pruneProjectCache: function(res) {\n        if(angular.isArray(res.projects)){\n          var ids = [];\n          var newCache = [];\n          // Remember projects returned by server in the response\n          angular.forEach(res.projects, function(project) {\n            ids.push(project.id);\n          });\n          // Keep in cache only allowed projects\n          angular.forEach(models.projects, function(project) {\n            // If the project was present in response, or if the project is not mine, keep.\n            // (Don't keep the project if it's mine but it's not present in response. This means it's been recently deleted)\n            if(ids.indexOf(project.id) >= 0 || project.owner.id !== models.current_user.id){\n              newCache.push(project);\n            }\n          });\n          models.projects = newCache; // Replace the cache\n        }\n        return res;\n      },\n\n      /**\n       * Prune the cache, removing old projects which probably has been deleted\n       */\n      forcePruneProjectCache: function(res) {\n        if(angular.isArray(res.projects)){\n          var ids = [];\n          var newCache = [];\n          // Remember projects returned by server in the response\n          angular.forEach(res.projects, function(project) {\n            ids.push(project.id);\n          });\n          // Keep in cache only allowed projects\n          angular.forEach(models.projects, function(project) {\n            // Keep only the projects that are in response\n            if(ids.indexOf(project.id) >= 0){\n              newCache.push(project);\n            }\n          });\n          models.projects = newCache; // Replace the cache\n        }\n        return res;\n      },\n\n      /**\n       * Removes a model from cache\n       */\n      removeFromCache: function(res) {\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'project_files':\n            case 'project_file':\n              helpers.forEachModel(model, helpers.removeProjectFileFromCache);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Set the project(s) as mine mocking an owner\n       */\n      setProjectAsMine: function(res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, helpers.setProjectAsMineSingle);\n        return res;\n      },\n\n      updateCurrent: function(res){\n        var model = helpers.fetchModel(res);\n        if(model._destroyed){\n          delete models['current_' + res._model];\n        }\n        else{\n          models['current_' + res._model] = res[res._model];\n        }\n        return res;\n      },\n\n      /**\n       * Convert values to a human readable format\n       */\n      humanize: function(res) {\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'projects':\n            case 'project':\n              helpers.forEachModel(model, helpers.humanizeProject);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Store models cache in long term memory\n       */\n      memorizeCache: function(res) {\n        angular.forEach(models, function(v, k){\n          longTermMemory.memorize(k,v);\n        })\n        return res;\n      },\n\n      /**\n       * Manage side effects, if any\n       */\n      sideEffects: function(res) {\n        if(res.side_effects){\n          angular.forEach(res.side_effects, function(v,k) {\n            var project = null;\n            var frame = null;\n\n            switch(k){\n              case 'projects':\n              case 'project':\n                helpers.updateModelCache(models.projects, v);\n                break;\n              case 'user':\n              case 'users':\n                helpers.updateModelCache(models.users, v);\n                break;\n              case 'frames':\n              case 'frame':\n                project = helpers.getRelatedProject(res);\n                helpers.updateModelCache(project.frames, v);\n                break;\n              case 'project_files':\n              case 'project_file':\n                project = helpers.getRelatedProject(res);\n                helpers.updateModelCache(project.project_files, v);\n                break;\n              case 'comments':\n              case 'comment':\n                frame = helpers.getRelatedFrame(res);\n                helpers.updateModelCache(frame.comments, v);\n                break;\n              default:\n                $log.warn('Don\\'t know how to handle side effect \"' + k + '\":');\n                $log.warn(v);\n                break;\n            }\n          });\n        }\n        return res;\n      },\n\n      log: function (res) {\n        $log.info(res);\n        return res;\n      },\n\n      debugger: function (res) {\n        debugger; // eslint-disable-line no-debugger\n        return res;\n      }\n    };\n\n    var helpers = {\n\n      /**\n       * Valid models names\n       */\n      validModels: [\n        'levels',\n        'unit',\n        'unit_section_a',\n        'unit_section_b',\n        'unit_section_c',\n        'unit_section_d',\n        'unit_section_e',\n        'unit_sections_c_exercises',\n        'unit_sections_d_exercises',\n        'unit_sections_e_exercises',\n        'exercise',\n        'users',\n        'user'\n      ],\n\n      /**\n       * Fetch the model from response\n       */\n      fetchModel: function(res) {\n        if(res._model && res[res._model]){\n          return res[res._model];\n        }\n        return null;\n      },\n\n      /**\n      * Get the related project referenced in res\n      */\n      getRelatedProject: function (res) {\n        return utils.findFirst(models.projects, res._project_id);\n      },\n\n      /**\n      * Get the related project referenced in res\n      */\n      getRelatedLevel: function (res) {\n        return utils.findFirst(models.levels, res[res._model].level_id);\n      },\n\n      /**\n      * Get the related frame referenced in res\n      */\n      getRelatedFrame: function (res) {\n        var project = helpers.getRelatedProject(res);\n        return utils.findFirst(project.frames, res._frame_id);\n      },\n\n      /**\n       * Executes a function for each model\n       */\n      forEachModel: function(model, func) {\n        if(angular.isArray(model)){\n          angular.forEach(model, func);\n        }\n        else if(model){\n          func(model);\n        }\n      },\n\n      /**\n       * inject default values to a project\n       */\n      injectProjectDefaults: function(project) {\n        // Set default image if not set\n        if(!project.image){\n          project.image = 'assets/images/default-img.png';\n        }\n\n        // Default download url\n        if(!project.download_url){\n          project.download_url = apiUrl + '/v1/projects/' + project.id + '/download';\n        }\n      },\n\n      /**\n       * inject default values to a user\n       */\n      injectUserDefaults: function(user) {\n        return user;\n      },\n\n      /**\n       * Set a project as mine\n       */\n      setProjectAsMineSingle: function(project) {\n        if(!project.owner && models.current_user && models.current_user.id){\n          project.owner = { id: models.current_user.id };\n        }\n      },\n\n      /**\n       * Sort the frames and comments of a project by order\n       */\n      sortFramesAndCommentsSingle: function(project) {\n        utils.sortByOrder(project.frames);\n        angular.forEach(project.frames, function(frame) {\n          utils.sortByOrder(frame.comments);\n        });\n      },\n\n      humanizeProject: function(project) {\n        // force private to be a boolean (defaults to false), and set private string\n        project.private = !!project.private;\n        if(project.private){\n          project.privateString = 'Private Project';\n        }\n        else{\n          project.privateString = 'Public Project';\n        }\n      },\n\n      updateModelCache: function (modelCache, model) {\n        var newData = model;\n\n        // modelCache is array\n        if(angular.isArray(modelCache)){\n\n          // if model is array, recursion\n          if(angular.isArray(model)){\n            newData = [];\n            angular.forEach(model, function(m) {\n              if(m){\n                var merged = helpers.updateModelCache(modelCache, m); // recursion\n                if(merged){\n                  newData.push(merged);\n                }\n              }\n            });\n          }\n\n          // single model\n          else if(model){\n            // if model is marked as _reload, remove it from cache and add it again\n            if(model._reload){\n              utils.removeFirst(modelCache, model.id);\n              delete model._reload; // Delete _reload metadata not to store it in cache\n              newData = utils.mergeOrPush(modelCache, model);\n            }\n            // if model is marked as _destroyed, remove it from cache\n            else if(model._destroyed){\n              utils.removeFirst(modelCache, model.id);\n            }\n            // otherwise, just update the cache\n            else{\n              newData = utils.mergeOrPush(modelCache, model);\n            }\n          }\n        }\n\n        return newData;\n      }\n    };\n\n    return resPipe;\n  });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Long Term Memory\n   * Persist data to make it available after the browser is closed\n   */\n  .factory('longTermMemory', function () {\n\n    var longTermMemory = {\n      memorize: function(key, val) {\n        localStorage[key] = angular.toJson(val);\n      },\n\n      remember: function(key) {\n        try {\n          return angular.fromJson(localStorage[key]);\n        }\n        catch(e){\n          delete localStorage[key];\n          return null;\n        }\n      },\n\n      forget: function(key) {\n        delete localStorage[key];\n      },\n\n      oblivion: function() {\n        localStorage.clear();\n      }\n    };\n\n    return longTermMemory;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreSidebar', galoreSidebar);\n\n  /** @ngInject */\n  function galoreSidebar($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreSidebar/galoreSidebar.html',\n      controller: SidebarController,\n      controllerAs: 'sidebar',\n      link: SidebarLink,\n      bindToController: true,\n      replace: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SidebarController(models, $state, units) {\n      var vm = this;\n\n      vm.models = models;\n      vm.state = $state;\n\n      vm.addUnit = function(level_id){\n\n        var unit_code;\n        var sub_unit_code;\n\n        var sortUnits = function(array){\n          array.sort(function(a, b){\n              var keyA = a.unit_code,\n                  keyB = b.unit_code;\n              if(keyA < keyB) return -1;\n              if(keyA > keyB) return 1;\n              return 0;\n          });\n          return array;\n        }\n\n        if(vm.models.levels.length > 0 ){\n\n          angular.forEach(vm.models.levels, function(value) {\n\n            if(value.id === level_id){\n              if(value.units.length > 0){\n                var units = sortUnits(value.units);\n                unit_code = units[units.length-1].unit_code;\n                sub_unit_code = units[units.length-1].sub_unit_code + 1;\n              }else{\n                unit_code = 1;\n                sub_unit_code = 1;\n              }\n              return;\n            }\n          });\n        }\n\n        vm.newUnit = {\n            \"level_id\": level_id,\n            \"title\": \"Unità \" + unit_code + \".\" + sub_unit_code,\n            \"unit_code\": unit_code,\n            \"sub_unit_code\": sub_unit_code\n        };\n\n        units\n            .create({unit:vm.newUnit});\n      }\n\n    }\n\n    function SidebarLink(){\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreHeader', galoreHeader);\n\n  /** @ngInject */\n  function galoreHeader($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreHeader/galoreHeader.html',\n      controller: HeaderController,\n      controllerAs: 'header',\n      link: HeaderLink,\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function HeaderController(models) {\n      var vm = this;\n\n      vm.models = models;\n    }\n\n    function HeaderLink(){\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreFooter', galoreFooter);\n\n  /** @ngInject */\n  function galoreFooter($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreFooter/galoreFooter.html',\n      controller: FooterController,\n      controllerAs: 'footer',\n      link: FooterLink,\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function FooterController(models) {\n      var vm = this;\n\n      vm.models = models;\n    }\n\n    function FooterLink(){\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n    }\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('galoreApi', function (\n      $q,\n      $http,\n      $auth,\n      apiUrl,\n      unitApiUrl,\n      showLevelsApiUrl,\n      sectionApiUrl,\n      exercisesApiUrl,\n      resPipe\n    ) {\n      // Cache the promises (just to avoid to call the same API before the previous has finished)\n      var cache = {};\n\n      // Api Helpers (accessible only from this factory)\n      var helpers = {\n        /**\n         * Try to retrieve the result from cache, or make HTTP call\n         * @param  {String} method  The HTTP method\n         * @param  {String} url The API url\n         * @param  {Object} data    The body\n         * @param  {Object} headers The headers\n         * @param  {Boolean} keep   If true, the promise is cached even after it's been fulfilled\n         * @return {Promise}        A promise of the response\n         */\n        cacheOrHttp: function(method, url, data, headers, keep, absUrl) {\n          var key = method + url + (data ? angular.toJson(data) : '');\n          var config = {};\n          if(method) config.method = method.toUpperCase();\n          if(absUrl){\n            config.url = absUrl;\n          }else{\n            config.url = apiUrl + url;\n          }\n          if(data) config.data = data;\n          if(headers) config.headers = headers;\n\n\n          if (!cache[key]) {\n            var promise;\n            var err = false;\n            switch(method){\n              case 'get':\n              case 'GET':\n              case 'post':\n              case 'POST':\n              case 'put':\n              case 'PUT':\n              case 'patch':\n              case 'PATCH':\n              case 'delete':\n              case 'DELETE':\n                promise = $http(config);\n                break;\n              default:\n                err = true;\n                promise = $q.reject();\n                break;\n            }\n            if(!err){\n              cache[key] = promise.finally(function(response,err) {\n                if(!keep){\n                  delete cache[key]; // delete the cache, so the next call will be fresh\n                }\n                if(err) { return $q.reject(err); }\n                if(response) { return response; }\n              });\n            }\n          }\n\n          return cache[key];\n        },\n\n\n        /**\n         * Expect a 200 response and return data.\n         * Otherwise, return a rejected promise.\n         */\n        expect200: function (response) {\n          if(response.status === 200){\n            return response.data;\n          }\n          else{\n            return $q.reject(response);\n          }\n        },\n\n        /**\n         * Expect a 201 response and return data.\n         * Otherwise, return a rejected promise.\n         */\n        expect201: function (response) {\n          if(response.status === 201){\n            return response.data;\n          }\n          else{\n            return $q.reject(response);\n          }\n        },\n\n        /**\n         * Expect a 204 response and return data.\n         * Otherwise, return a rejected promise.\n         */\n        expect204: function (response) {\n          if(response.status === 204){\n            return response.data;\n          }\n          else{\n            return $q.reject(response);\n          }\n        }\n      };\n\n      var galoreoApi = {\n        /** USER API **/\n\n        /**\n         * Authenticate the user\n         */\n        login: function(data) {\n          if(!cache.login){\n            cache.login = $auth\n              .submitLogin(data)\n              .finally(function(response,err) {\n                delete cache.login;\n                if(err) { return $q.reject(err); }\n                if(response) { return response; }\n              });\n          }\n          return cache.login;\n        },\n\n        /**\n         * Retrieve user data (together with role permissions)\n         */\n        getMe: function(){\n          return helpers\n            .cacheOrHttp('get', '/v1/me')\n            .then(helpers.expect200);\n        },\n\n        /**\n         * Logout the user\n         */\n        logout: function() {\n          if(!cache.logout){\n            cache.logout = $auth\n              .signOut()\n              .finally(function(response,err) {\n                delete cache.logout;\n                if(err) { return $q.reject(err); }\n                if(response) { return response; }\n              });\n          }\n          return cache.logout;\n        },\n\n        /**\n        * Change the password of the user\n        */\n        changePassword: function (data) {\n          if(!cache.changePassword){\n            cache.changePassword = $auth\n              .updatePassword(data)\n              .finally(function (response, err) {\n                  delete cache.changePassword;\n                  if(err) { return $q.reject(err); }\n                  if(response) { return response; }\n              });\n          }\n          return cache.changePassword;\n        },\n\n        /**\n        * Create Unit\n        */\n        createUnit: function(data) {\n          return helpers\n          .cacheOrHttp('post', unitApiUrl, data)\n          .then(helpers.expect201);\n        },\n\n        /**\n         * Destroy unit\n         */\n        destroyUnit: function (unit) {\n          return helpers\n            .cacheOrHttp('delete', unitApiUrl + '/' + unit.id)\n            .then(helpers.expect204)\n            .then(function(){\n              return {unit: unit};\n            });\n        },\n\n        /**\n         * Destroy exercise\n         */\n        destroyExercise: function (exercise) {\n\n          return helpers\n            .cacheOrHttp('delete', exercisesApiUrl + '/' + exercise.id)\n            .then(helpers.expect204)\n            .then(function(){\n              return {exercise: exercise};\n            });\n        },\n\n\n        /**\n        * Create Excercise\n        */\n        createExercise: function(data) {\n          return helpers\n          .cacheOrHttp('post', exercisesApiUrl, data)\n          .then(helpers.expect201);\n        },\n\n        /**\n        * Show Unit\n        */\n        showUnit: function(id) {\n          return helpers\n          .cacheOrHttp('get', unitApiUrl + '/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section A by id section\n        */\n        getSectionA: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'a/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section B by id section\n        */\n        getSectionB: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'b/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section C by id section\n        */\n        getSectionC: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'c/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section D by id section\n        */\n        getSectionD: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'd/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section E by id section\n        */\n        getSectionE: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'e/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get excercises by id section\n        */\n        getExercises: function(section, id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + section + '/' + id + '/exercises')\n          .then(helpers.expect200);\n        },\n\n        /**\n         * Show all levels\n         */\n        indexLevels: function(){\n          return helpers\n            .cacheOrHttp('get', showLevelsApiUrl)\n            .then(helpers.expect200);\n        },\n\n\n       /**\n        * Update unit\n        */\n        updateUnit: function(id, data){\n          return helpers\n            .cacheOrHttp('put', unitApiUrl + '/' + id, data)\n            .then(helpers.expect200);\n        },\n\n        /**\n         * Update section\n         */\n         updateSection: function(section, id, data){\n           return helpers\n             .cacheOrHttp('put', sectionApiUrl + section + '/' + id, data)\n             .then(helpers.expect200);\n         },\n\n         /**\n          * Update excercise\n          */\n          updateExercise: function(id, data){\n            return helpers\n              .cacheOrHttp('put', exercisesApiUrl + '/' + id, data)\n              .then(resPipe.debugger)\n              .then(helpers.expect200);\n          },\n\n         /**\n         * Upload Video\n         */\n         uploadVideo: function(section, section_id, data){\n           return helpers\n             .cacheOrHttp('post', sectionApiUrl + section + '/' + section_id + '/video_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload Video S3\n         */\n         uploadVideoS3: function(url, file_type, file){\n           return helpers\n             .cacheOrHttp('put', null, file, {'Content-Type': file_type, 'if-modified-since':undefined}, null, url)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload Image\n         */\n         uploadImage: function(exercise_id, exercise_item_id, data){\n           return helpers\n             .cacheOrHttp('post', exercisesApiUrl  + '/' + exercise_id + '/exercise_image_text_items/' + exercise_item_id + '/image_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Publish current unit\n         */\n         publishUnit: function(id){\n           return helpers\n             .cacheOrHttp('post', unitApiUrl + '/' + id +'/publish')\n             .then(helpers.expect204);\n         },\n\n         /**\n         * unpublish current unit\n         */\n         unpublishUnit: function(id){\n           return helpers\n             .cacheOrHttp('post', unitApiUrl + '/' + id +'/unpublish')\n             .then(helpers.expect204);\n         }\n      };\n\n      return galoreoApi;\n   });\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exerciseTextText', exerciseTextText);\n\n    /** @ngInject */\n    function exerciseTextText(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/exerciseTextText/exerciseTextText.html',\n        controller: exerciseTextTextController,\n        controllerAs: 'exerciseTextText',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function exerciseTextTextController(models, $scope) {\n        var vm = this;\n        vm.models = models;\n\n        vm.addRow = function(){\n\n          var newRow = angular.copy(vm.exercise_text_text_item);\n          vm.model.push(newRow);\n          vm.exercise_text_text_item = {};\n        }\n\n        vm.deleteRow = function(){\n          //chiedere conferma prima\n        }\n\n\n        $scope.$watch('exerciseTextText.model', function (newVal, oldVal) {\n            if(newVal !== oldVal) {\n              vm.form = angular.copy(vm.model);\n            }\n        });\n      }\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exerciseImageText', exerciseImageText);\n\n    /** @ngInject */\n    function exerciseImageText(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/exerciseImageText/exerciseImageText.html',\n        controller: exerciseImageTextController,\n        controllerAs: 'exerciseImageText',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function exerciseImageTextController(models, $scope) {\n        var vm = this;\n        vm.models = models;\n\n        vm.addRow = function(){\n\n          var newRow = angular.copy(vm.exercise_image_text_item);\n          if(vm.exercise_image_text_item.image){\n            newRow.image.file = vm.exercise_image_text_item.image.file;\n          }\n          vm.model.push(newRow);\n          vm.exercise_image_text_item.image.file = {};\n          vm.exercise_image_text_item.item_number = \"\";\n          vm.exercise_image_text_item.text_en = \"\";\n        }\n\n        vm.searchDataRow = function(id){\n          vm.row =  angular.copy(vm.model[id]);\n          if(vm.model[id].image){\n            vm.row.image.file = vm.model[id].image.file;\n          }\n          vm.row.id = id;\n        }\n\n        vm.deleteRow = function(row){\n\n          angular.forEach(vm.model, function(value, key) {\n            if(value.id === row.id){\n              vm.model.splice(key,1);\n              return;\n            }\n          });\n        }\n\n        vm.saveChanges = function(){\n          vm.model[vm.row.id].image.file = vm.row.image.file;\n          vm.model[vm.row.id].item_number = vm.row.item_number;\n          vm.model[vm.row.id].text_en = vm.row.text_en;\n        }\n\n\n        $scope.$watch('exerciseImageText.model', function (newVal, oldVal) {\n            if(newVal !== oldVal) {\n              vm.form = angular.copy(vm.model);\n            }\n        });\n      }\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exerciseDialogue', exerciseDialogue);\n\n    /** @ngInject */\n    function exerciseDialogue(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/exerciseDialogue/exerciseDialogue.html',\n        controller: exerciseDialogueController,\n        controllerAs: 'exerciseDialogue',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function exerciseDialogueController($scope) {\n\n        $scope.dynamicPopover = {\n            templateUrl: 'app/components/sectionB/infoPopoverTemplate.html'\n          };\n      }\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exercise', exercise);\n\n  /** @ngInject */\n  function exercise() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/exercise/exercise.html',\n      controller: TabExerciseController,\n      controllerAs: 'exercise',\n      bindToController: true,\n      scope:{\n        model: '=',\n        section: '@'\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function TabExerciseController(models, $state, units, $q, $timeout) {\n      var vm = this;\n      vm.models = models;\n\n      vm.data = {\n         availableOptions: [\n             {id: 1 , name: 'Dropdown'},\n             {id: 2 , name: 'Completamento'},\n             {id: 3 , name: 'Trova l’intruso'},\n             {id: 4 , name: 'Riordina la parola'},\n             {id: 5 , name: 'Riordina le frasi'},\n             {id: 6 , name: 'Connetti immagine/frase'},\n             {id: 7 , name: 'Connetti frase/frase'},\n             {id: 8 , name: 'Vero o Falso'},\n             {id: 9 , name: 'Memory'},\n             {id: 10 , name: 'Dialogo'}\n          ],\n         selectedOption: {id: 1, name: 'Dropdown'}\n      };\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submit = function () {\n\n        //TODO remove lorem ipsum\n        vm.form.unit_section_id = vm.model.id;\n        vm.form.unit_section_type = vm.section;\n        vm.form.exercise_type = vm.form.exercise_type.id;\n\n        return vm.setLoading()\n          .then(units.createExercise({'exercise': vm.form}))\n          .then(function(){\n            vm.addTab();\n          })\n          .finally(vm.unsetLoading);\n      }\n\n\n\n      vm.addTab = function() {\n        var newTab = {  title: 'Tab ' + (vm.model.exercise_ids.length + 1) };\n        vm.tabs.push(newTab);\n        $timeout(function(){\n          vm.activeTabIndex = (vm.tabs.length - 1);\n        });\n      };\n    }\n\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Error Manager.\n   * Handles common HTTP error messages\n   */\n  .factory('errorManager', function (toastr, $log, $state, $q, longTermMemory, models) {\n    var errorManager = function(err) {\n      // log every errors\n      $log.error(err);\n\n      // Unwrap HTTP errors and take actions if needed\n      if(angular.isObject(err) && err.status){\n        switch(err.status){\n          case 401:\n            $state.go('main.logout');\n            err = err.data;\n            break;\n          case 403:\n            $state.go('main.home');\n            err = err.data;\n            break;\n          case 422:\n            err = err.data;\n            break;\n          case 404:\n            err = err.data;\n            break;\n          case 413:\n            err = 'Il file che stai cercando di caricare è troppo grande';\n            break;\n          case -1:\n            err = 'Il server non è raggiungibile o non sei connesso ad Internet';\n            break;\n          default:\n            break;\n        }\n      }\n\n      var getErrorString = function (err) {\n        if(angular.isString(err)){\n          return err;\n        }\n        else if(angular.isObject(err) && (err.full_messages || err.error_description || err.errors || err.data || err.msg || err.error)){\n          return getErrorString(err.full_messages || err.error_description || err.errors || err.data || err.msg || err.error );\n        }\n        else if(angular.isArray(err)){\n          var myErr = [];\n          for (var i = 0; i < err.length; i++) {\n            myErr[i] = getErrorString(err[i]);\n          }\n          return getErrorString(myErr.join('<br>'));\n        }\n        // Don't manage different kinds of error\n        else{\n          longTermMemory.oblivion(); // Forget everything. We don't want the app to be broken forever!\n          models.reset(); // Reset all the models. We don't want the app to be broken forever!\n          return 'Si è verificato un errore imprevisto. Si prega di riprovare più tardi.';\n        }\n      }\n\n      toastr.error(getErrorString(err), 'Errore');\n\n      return $q.reject(err);\n    };\n\n    return errorManager;\n  });\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('ckeditorStandard', ckeditorStandard);\n\n    /** @ngInject */\n    function ckeditorStandard(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/ckeditorColor/ckeditorColor.html',\n        controller: CkEditorStandardController,\n        controllerAs: 'ckeditorColor',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n\n      /** @ngInject */\n      function CkEditorStandardController(models, $scope) {\n\n        var vm = this;\n        vm.models = models;\n\n        $scope.options = {\n            language: 'it',\n            allowedContent: true,\n            entities: false,\n            toolbar: 'Full',\n            colorButton_colors: '337ab7,cf4555,00a65a,ffeb3b',\n            colorButton_enableMore: false,\n            colorButton_enableAutomatic: false,\n            toolbar_Full:[\n              { name: 'document', items : [ 'Source','-','Save'] },\n              { name: 'tools', items : [ 'Maximize'] },\n              { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },\n              { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },\n              { name: 'paragraph', items : ['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-'] }\n            ]\n          };\n\n      }\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('ckeditorColor', ckeditorColor);\n\n    /** @ngInject */\n    function ckeditorColor(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/ckeditorColor/ckeditorColor.html',\n        controller: CkEditorColorController,\n        controllerAs: 'ckeditorColor',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n\n      /** @ngInject */\n      function CkEditorColorController(models, $scope) {\n\n        var vm = this;\n        vm.models = models;\n\n        $scope.options = {\n            language: 'it',\n            allowedContent: true,\n            entities: false,\n            toolbar: 'Full',\n            colorButton_colors: '337ab7,cf4555,00a65a,ffeb3b',\n            colorButton_enableMore: false,\n            colorButton_enableAutomatic: false,\n            toolbar_Full:[\n              { name: 'document', items : [ 'Source','-','Save'] },\n              { name: 'tools', items : [ 'Maximize'] },\n              { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },\n              { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },\n              { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote',\n              '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-'] },\n              { name: 'links', items : [ 'Link','Unlink'] },\n              { name: 'insert', items : ['Table'] },\n              { name: 'colors', items : [ 'TextColor'] }\n            ]\n          };\n\n      }\n    }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('can', function (models) {\n\n      var helpers = {\n        instanceCondition: function(action, resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          // Safely get condition function (avoiding undefined errors)\n          var cond = perms && perms.instanceConditions && perms.instanceConditions[action] && perms.instanceConditions[action][resource];\n          // If no condition was found, return true, else evaluate the condition\n          return !cond || cond(instance);\n        },\n        canManage: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.manage && (perms.manage.indexOf(resource) >= 0) && helpers.instanceCondition('manage', resource, instance);\n        },\n        canUpdate: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.update && (perms.update.indexOf(resource) >= 0) && helpers.instanceCondition('update', resource, instance);\n        },\n        canShow: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.show && (perms.show.indexOf(resource) >= 0) && helpers.instanceCondition('show', resource, instance);\n        },\n        canIndex: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.index && (perms.index.indexOf(resource) >= 0) && helpers.instanceCondition('index', resource, instance);\n        },\n        customCan: function(action, resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms[action] && (perms[action].indexOf(resource) >= 0) && helpers.instanceCondition(action, resource, instance);\n        }\n      };\n\n      var can = function(action, resource, instance){\n        switch(action){\n          case 'manage':\n            return helpers.canManage(resource, instance);\n          case 'update':\n            return helpers.canManage(resource, instance) || helpers.canUpdate(resource, instance);\n          case 'show':\n            return helpers.canManage(resource, instance) || helpers.canUpdate(resource, instance) || helpers.canShow(resource, instance);\n          case 'index':\n            return helpers.canShow(resource, instance) || helpers.canIndex(resource, instance);\n          default:\n            return helpers.customCan(action, resource, instance);\n        }\n      };\n\n      return can;\n   });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('can', canDirective);\n\n  /** @ngInject */\n  function canDirective(can, $log, models) {\n    var directive = {\n      restrict: 'A',\n      link: linkFunc,\n      scope: {\n        instance: '='\n      }\n    };\n\n    return directive;\n\n    function linkFunc(scope, el, attr) {\n      var watcher;\n      var shown;\n      var action;\n      var resource;\n      var negative;\n      scope.models = models;\n\n      // Update the visibility of the element\n      var updateVisibility = function() {\n        var toShow = can(action, resource, scope.instance);\n        if(negative){ toShow = !toShow; } // invert the condition if needed\n        // Show the element if not shown\n        if(toShow && !shown){\n          el.removeClass('can-hide');\n          shown = true;\n        }\n\n        // Hide the element if shown\n        else if(!toShow && shown){\n          el.addClass('can-hide');\n          shown = false;\n        }\n      };\n\n      // Parse can attribute\n      var parsed = attr.can.split(':');\n      if(parsed.length !== 2){\n        $log.error('Syntax error in \"can\" directive: ' + angular.toJson(attr.can));\n        return;\n      }\n\n      // If the action starts with \"!\", the action is negative\n      negative = parsed[0].slice(0, 1) === '!';\n\n\n      // In that case, remove ! from the string\n      if(negative){\n        parsed[0] = parsed[0].substr(1);\n      }\n\n      // Extract the action and the resource\n      action = parsed[0];\n      resource = parsed[1];\n\n      // Update the visibility for the first time\n      shown = true;\n      updateVisibility();\n\n      // Update the visibility as soon as the permissions change\n      watcher = scope.$watch('models.current_user.can', function(newVal, oldVal) {\n        if(newVal && oldVal !== newVal){\n          updateVisibility();\n        }\n      });\n\n      // Update the visibility as soon as the instance changes\n      watcher = scope.$watch('instance', function(newVal, oldVal) {\n        if(newVal && oldVal !== newVal){\n          updateVisibility();\n        }\n      });\n\n      scope.$on('$destroy', function () {\n        watcher();\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('boxExpander', boxExpander);\n\n  /** @ngInject */\n  function boxExpander() {\n    var directive = {\n      restrict: 'A',\n      scope: {\n        boxExpander: '='\n      },\n      link: boxExpanderLink\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function boxExpanderLink(scope, el) {\n      el.addClass(\"panel-collapse collapse\");\n\n      scope.$watch('boxExpander', function (newVal, oldVal) {\n        if(newVal !== oldVal){\n          if(newVal){\n            //el.collapse('show');\n          }else{\n            el.collapse('hide');\n          }\n        }\n      })\n    }\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My user Overview API service\n   */\n   .factory('users', function (galoreApi, errorManager, resPipe, models) {\n\n      var users = {\n\n        /**\n         * Get current user\n         */\n        me: function(){\n          return galoreApi\n            .getMe()\n            .then(resPipe.parseResponse)\n            .then(resPipe.updateCache)\n            .then(resPipe.updateCurrent)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        },\n\n        /**\n        * Update current user\n        */\n        updateMe: function (data) {\n          return galoreApi\n            .updateMe(data)\n            .then(function (res) {\n              if(res.status === \"success\")\n              {\n                return {\n                  user: res.data\n                }\n              }\n              return res;\n            })\n            .then(resPipe.parseResponse)\n            .then(resPipe.injectDefaults)\n            .then(helpers.addInstanceConditions)\n            .then(resPipe.updateCache)\n            .then(resPipe.updateCurrent)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        }\n      };\n\n      var helpers = {\n        addInstanceConditions: function(res) {\n          if(res.user){\n            res.user.can.instanceConditions = models.getInstanceConditions();\n          }\n          return res;\n        }\n      };\n\n      return users;\n   });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('units', function (galoreApi, resPipe, utils, errorManager, $q) {\n      var units = {\n\n        /**\n         * get a unit from server (given id)\n         */\n        show: function(id){\n          return galoreApi\n            .showUnit(id)                     // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * create a new unit\n         */\n        create: function(data){\n          return galoreApi\n            .createUnit(data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * create a new exercise\n         */\n        createExercise: function(data){\n          return galoreApi\n            .createExercise(data)\n            .then(resPipe.debugger)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionA by level id\n        */\n        getSectionA: function(id){\n          return galoreApi\n            .getSectionA(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionB by level id\n        */\n        getSectionB: function(id){\n          return galoreApi\n            .getSectionB(id)                   // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionC by level id\n        */\n        getSectionC: function(id){\n          return galoreApi\n            .getSectionC(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.debug)\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.debug)\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionD by level id\n        */\n        getSectionD: function(id){\n          return galoreApi\n            .getSectionD(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.debug)\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.debug)\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionE by level id\n        */\n        getSectionE: function(id){\n          return galoreApi\n            .getSectionE(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get excercises by section id\n        */\n        getExercises: function(section, id){\n          return galoreApi\n            .getExercises(section, id)         // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * update unit\n         */\n        update: function(id, data){\n\n          return galoreApi\n            .updateUnit(id, data)             // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current project\n            .then(resPipe.memorizeCache)      // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * update section\n         */\n        updateSection: function(section, id, data){\n          return galoreApi\n            .updateSection(section, id, data) // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current project\n            .then(resPipe.memorizeCache)      // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * update exercise exercise_id, exercise_item_id, data\n         */\n        updateExercise: function(exercise_id, data){\n          var uploadPromises = [];\n          if(angular.isArray(data.exercise.exercise_image_text_items)){\n            angular.forEach(data.exercise.exercise_image_text_items, function(item){\n              if(item.image && item.image.file){\n                var promise = units\n                  .uploadImage(exercise_id, item.id, {\n                    filename: item.image.file.name,\n                    type: item.image.file.type\n                  })\n                  .then(function(res){\n                    item.image_url = res.video_url;\n                    return units\n                      .uploadVideoS3(res.upload_url, item.image.file.type, item.image.file)\n                      .then(function(){\n                        delete item.image;\n                      });\n                  });\n                uploadPromises.push(promise);\n              }\n            });\n          }\n\n          return $q\n            .all(uploadPromises)\n            .then(function(){\n              return galoreApi.updateExercise(exercise_id, data)\n            })\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current project\n            .then(resPipe.memorizeCache)      // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /*\n        * Publish current unit\n        */\n        publishUnit: function(id){\n          return galoreApi\n            .publishUnit(id)\n            .catch(errorManager);\n        },\n\n        /*\n        * Unpublish current unit\n        */\n        unpublishUnit: function(id){\n          return galoreApi\n            .unpublishUnit(id)\n            .catch(errorManager);\n        },\n\n        uploadVideo: function(section, section_id, data){\n          return galoreApi\n            .uploadVideo(section, section_id, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadImage: function(exercise_id, exercise_item_id, data){\n          return galoreApi\n            .uploadImage(exercise_id, exercise_item_id, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadVideoS3 :function(url, file_type, file){\n          return galoreApi\n            .uploadVideoS3(url, file_type, file) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * destroy a unit\n         */\n        destroyUnit: function(unit){\n          return galoreApi\n            .destroyUnit(unit)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markDestroyed)      // Mark the unit as destroyed\n            .then(resPipe.updateCache)        // Update cache\n            .then(resPipe.updateCurrent)        // Update current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n\n        /**\n         * destroy an exercise\n         */\n        destroyExercise: function(exercise){\n          return galoreApi\n            .destroyExercise(exercise)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markDestroyed)      // Mark the unit as destroyed\n            .then(resPipe.updateCache)        // Update cache\n            .then(resPipe.updateCurrent)        // Update current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        }\n\n\n\n\n      };\n\n      return units;\n   });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n  * Models cache\n  */\n  .factory('models', function (longTermMemory) {\n\n    var models = {\n       reset: function () {\n         models.levels = longTermMemory.remember('levels') || [];\n         models.current_unit = longTermMemory.remember('current_unit') || [];\n         // models.aboutProjects = longTermMemory.remember('aboutProjects') || [];\n         models.current_user = longTermMemory.remember('current_user') || undefined;\n       }\n    };\n\n    models.reset();\n\n    return models;\n  });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('levels', function (galoreApi, resPipe, utils, errorManager) {\n      var levels = {\n\n        /**\n         * List of levels\n         */\n        index: function(){\n          return galoreApi\n            .indexLevels()                // API call\n            .then(resPipe.log)\n            .then(resPipe.parseResponse)    // Parse the raw response\n            .then(resPipe.log)\n            .then(resPipe.injectDefaults)   // Inject some defatult values\n            .then(resPipe.log)\n            .then(resPipe.updateCache)      // Update the cache\n            .then(resPipe.log)\n            .then(resPipe.memorizeCache) // Memorize projects in local storage\n            .catch(errorManager);           // Handle errors\n        }\n      };\n\n      return levels;\n   });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log,\n    $rootScope,\n    uiState,\n    defaultBodyClasses,\n    longTermMemory\n    ) {\n        // Bind the uiState to $rootScope as it's used in index.html\n        $rootScope.uiState = uiState;\n\n        // On state change\n        var stateChangeSuccess = $rootScope.$on('$stateChangeSuccess', function (event, toState) {\n          var pms = toState.params || {};\n          uiState.bodyClasses = pms.bodyClasses || defaultBodyClasses;\n        });\n\n        // Destroy watchers\n        $rootScope.$on('$destroy', function() {\n          stateChangeSuccess();\n        });\n\n        longTermMemory.oblivion();\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('main', {\n        abstract: true,\n        templateUrl: 'app/pages/main/main.html'\n      })\n      .state('main.admin', {\n        templateUrl: 'app/pages/admin/admin.html',\n        controller: 'AdminController',\n        controllerAs: 'vm',\n        resolve: {\n          currentUser: function($auth, $q, users) {\n            return $auth\n              .validateUser()\n              .then(function(res){\n                if(res.signedIn !== true){\n                  return $q.reject();\n                }\n              })\n              .then(users.me)\n              .catch(function(){\n                return null;\n              });\n          },\n          levelsData: function(levels){\n            return levels.index();\n          }\n        },\n        onEnter: function($timeout, $state, levelsData, currentUser){\n          if(!currentUser){\n            $timeout(function(){\n              $state.go('main.login');\n            });\n          }\n        }\n      })\n      .state('main.logout', {\n        url: '/logout',\n        onEnter: function($q, errorManager, galoreApi, $state, toastr, models, longTermMemory) {\n          galoreApi.logout()\n            .finally(function() {\n              delete models.current_user;\n              models.users = [];\n              longTermMemory.forget('user');\n              longTermMemory.forget('current_user');\n              $state.go('main.login');\n            });\n        }\n      })\n      .state('main.login', {\n        url: '/login',\n        templateUrl: 'app/pages/login/login.html',\n        controller: 'LoginController',\n        controllerAs: 'vm',\n        params: {\n          bodyClasses: 'hold-transition login-page'\n        }\n      })\n      .state('main.admin.unit', {\n        url: '/units/:id',\n        templateUrl: 'app/pages/unit/unit.html',\n        controller: 'UnitController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.profile', {\n        url: '/profile',\n        templateUrl: 'app/pages/profile/profile.html',\n        controller: 'ProfileController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.dashboard', {\n        url: '/',\n        templateUrl: 'app/pages/dashboard/dashboard.html',\n        controller: 'DashboardController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.createUnit', {\n        url: '/create-unit',\n        templateUrl: 'app/pages/createUnit/createUnit.html',\n        controller: 'CreateUnitController',\n        controllerAs: 'vm'\n      })\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .constant('apiUrl', 'http://eg-api.tandu.it')\n    .constant('defaultBodyClasses', 'skin-purple-light fixed sidebar-mini')\n    .constant('unitApiUrl', '/v1/units')\n    .constant('showLevelsApiUrl', '/v1/levels')\n    .constant('sectionApiUrl', '/v1/unit_sections_')\n    .constant('exercisesApiUrl', '/v1/exercises')\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig, $animateProvider, $locationProvider, $provide, $authProvider, apiUrl) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Animate only elements with class \"animate\"\n    $animateProvider.classNameFilter(/animate/);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = false;\n    toastrConfig.progressBar = false;\n\n    //Removes '#' from the URL\n    $locationProvider.html5Mode(true);\n    $locationProvider.hashPrefix('!');\n\n    $authProvider.configure({\n      apiUrl:                  apiUrl,\n      tokenValidationPath:     '/v1/auth/validate_token',\n      signOutUrl:              '/v1/auth/logout',\n      emailRegistrationPath:   '/v1/auth/register',\n      accountDeletePath:       '/v1/auth/delete_account',\n      passwordResetPath:       '/v1/auth/password',\n      passwordUpdatePath:      '/v1/auth/password',\n      passwordResetSuccessUrl: window.location.origin, //eslint-disable-line\n      emailSignInPath:         '/v1/auth/login'\n    });\n  }\n\n})();\n\nangular.module(\"englishGalore\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/ckeditorColor/ckeditorColor.html\",\"<div ckeditor=options ng-model=ckeditorColor.model ready=onReady()></div>\");\n$templateCache.put(\"app/components/exercise/exercise.html\",\"<div class=exercise><form id=formExercise name=formExercise ng-submit=exercise.submit() ng-model=exercise.form><div class=row><div class=col-sm-6><div class=from-group><label>Numero Esercizio</label><select ng-init=\\\"exercise.form.exercise_number = exercise.model.exercise_ids.length + 1\\\" ng-model=exercise.form.exercise_number class=form-control ng-options=\\\"n for n in [] | range:1:6\\\" required></select></div></div><div class=col-sm-6><div class=form-group><label>Tipologia Esercizio</label><select ng-init=\\\"exercise.form.exercise_type = exercise.data.selectedOption\\\" ng-model=exercise.form.exercise_type class=form-control ng-options=\\\"option.name for option in exercise.data.availableOptions track by option.id\\\" required></select></div></div></div><div class=row><div class=col-sm-6><div class=form-group ng-class=\\\"\\\"><label>Titolo Esercizio</label><input ng-model=exercise.form.title type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'esercizio\\\" required></div></div><div class=col-sm-6><div class=form-group ng-class=\\\"\\\"><label>Sottotitolo Esercizio</label><input ng-model=exercise.form.subtitle type=text class=form-control placeholder=\\\"Inserisci il sottotitolo dell\\'esercizio\\\" required></div></div></div><div class=row><div class=col-sm-6><div class=form-group><label for=\\\"\\\">Tip Esercizio</label><ckeditor-standard model=exercise.form.exercise_tips></ckeditor-standard></div></div><div class=col-sm-6 ng-if=\\\"(exercise.form.exercise_type.id > 0 && exercise.form.exercise_type.id < 6) || exercise.form.exercise_type.id === 8 || exercise.form.exercise_type.id === 10\\\"><div class=form-group><label for=\\\"\\\">Testo Esercizio</label><ckeditor-standard model=exercise.form.exercise_text></ckeditor-standard></div></div></div><div class=row ng-if=\\\"exercise.form.exercise_type.id === 6 || exercise.form.exercise_type.id === 9\\\"><exercise-image-text model=exercise.form.exercise_image_text_items ng-init=\\\"exercise.form.exercise_image_text_items = []\\\"></exercise-image-text></div><div class=row ng-if=\\\"exercise.form.exercise_type.id === 7\\\"><exercise-text-text model=exercise.form.exercise_text_text_items ng-init=\\\"exercise.form.exercise_text_text_items = {}\\\"></exercise-text-text></div><div class=row><div class=col-sm-12><input type=submit class=\\\"btn btn-success pull-right\\\" value=\\\"Crea Esercizio\\\"></div></div></form><div ng-show=exercise.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div>\");\n$templateCache.put(\"app/components/exerciseDialogue/exerciseDialogue.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label for=\\\"\\\">Testo dialogo</label><button uib-popover-template=dynamicPopover.templateUrl type=button class=\\\"btn btn-default pull-right btn-popover-info\\\" popover-placement=right><i class=\\\"fa fa-info-circle\\\" aria-hidden=true></i></button><textarea rows=4 cols=50 ng-model=exerciseDialogue.model.dialogue name=dialogue type=text class=form-control placeholder=\\\"Inserisci il testo del dialogo\\\">\\n    </textarea></div></div><div class=col-sm-6><label for=\\\"\\\">Tip Dialogo</label><ckeditor-standard model=exerciseDialogue.model.dialogue_tips></ckeditor-standard></div>\");\n$templateCache.put(\"app/components/exerciseImageText/exerciseImageText.html\",\"<div class=col-sm-12><p><strong>Connetti immagine/frase</strong></p></div><div class=col-sm-12><table class=\\\"table table-responsive\\\"><tbody><tr><th>Ordine</th><th>Immagine</th><th>Frase</th><th></th></tr><tr><td width=80px><div class=form-group><input ng-model=exerciseImageText.exercise_image_text_item.item_number name=item_number type=number class=form-control></div></td><td ng-init=\\\"exerciseImageText.exercise_image_text_item.image = {}\\\"><file model=exerciseImageText.exercise_image_text_item.image></file></td><td><div class=form-group><input ng-model=exerciseImageText.exercise_image_text_item.text_en name=text_en type=text class=form-control placeholder=\\\"Inserisci la frase\\\"></div></td><td width=93px><div class=pull-right><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse data-target=#row ng-click=exerciseImageText.addRow()><i class=\\\"fa fa-plus\\\" aria-hidden=true></i></a></div></td></tr><tr ng-repeat=\\\"row in exerciseImageText.model\\\" ng-if=row.item_number><td>{{row.item_number}}</td><td><span ng-if=row.image.file>{{row.image.file.name}}</span></td><td>{{row.text_en}}</td><td><div class=\\\"pull-right opacity-transition\\\"><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse data-target=#row ng-click=exerciseImageText.searchDataRow($index)><i class=\\\"fa fa-pencil\\\"></i> </a><a role=button class=\\\"btn btn-sm btn-danger\\\" ng-click=exerciseImageText.deleteRow(row)><i class=\\\"fa fa-trash\\\"></i></a></div></td></tr><tr ng-repeat-end=\\\"\\\" class=\\\"collapse background-gray\\\" id=row><td colspan=8><div class=col-md-2><div class=form-group><label>Modifica Ordine</label><input ng-model=exerciseImageText.row.item_number name=item_number type=number class=form-control></div></div><div ng-init=\\\"exerciseImageText.row.image = {}\\\" class=col-md-4><label>Modifica Immagine</label><br><span if=exerciseImageText.row.image.file>{{exerciseImageText.row.image.file.name}}</span><file model=exerciseImageText.row.image></file></div><div class=col-md-6><div class=form-group><label>Modifica frase</label><input ng-model=exerciseImageText.row.text_en name=text_en type=text class=form-control placeholder=\\\"Inserisci la frase\\\"></div></div><div class=col-sm-12><input type=button class=\\\"btn btn-success pull-right btn-blue\\\" value=Conferma ng-click=exerciseImageText.saveChanges() data-toggle=collapse data-target=#row> <input type=button class=\\\"btn btn-default pull-right\\\" value=Annulla data-toggle=collapse data-target=#row></div></td></tr></tbody></table></div>\");\n$templateCache.put(\"app/components/exerciseTextText/exerciseTextText.html\",\"<pre>{{exerciseTextText.model}}</pre><div class=col-sm-12><p><strong>Connetti immagine/frase</strong></p></div><div class=col-sm-12><table class=\\\"table table-responsive table-bordered\\\"><tbody><tr><th>Ordine</th><th>Frase Ita</th><th>Frase En</th><th></th></tr><tr><td width=80px><div class=form-group><input ng-model=exerciseTextText.exercise_text_text_item.item_number name=item_number type=number class=form-control></div></td><td><div class=form-group><input ng-model=exerciseTextText.exercise_text_text_item.text_it name=text_it type=text class=form-control placeholder=\\\"Inserisci la frase in italiano\\\"></div></td><td><div class=form-group><input ng-model=exerciseTextText.exercise_text_text_item.text_en name=text_en type=text class=form-control placeholder=\\\"Inserisci la traduzione in inglese\\\"></div></td><td class=text-center width=50px><div class=bnt-table-save ng-click=exerciseTextText.addRow()><i class=\\\"fa fa-plus\\\" aria-hidden=true></i></div></td></tr><tr ng-repeat=\\\"row in exerciseTextText.model\\\"><td>{{row.text_it}}</td><td>{{row.text_en}}</td><td><i class=\\\"fa fa-floppy-o\\\" aria-hidden=true></i> <span ng-click=exerciseTextText.deleteRow()><i class=\\\"fa fa-trash\\\" aria-hidden=true></i></span></td></tr></tbody></table></div>\");\n$templateCache.put(\"app/components/galoreFooter/galoreFooter.html\",\"<footer class=main-footer><div class=\\\"pull-right hidden-xs\\\"><b>Version</b> 1.0.0</div><strong>Copyright © 2016-2017 <a href=#>English Galore</a>.</strong> All rights reserved.</footer>\");\n$templateCache.put(\"app/components/galoreHeader/galoreHeader.html\",\"<header class=\\\"main-header galore-header\\\"><a ui-sref=main.admin.dashboard class=logo><!-- mini logo for sidebar mini 50x50 pixels --> <span class=logo-mini><img src=/assets/images/logo-sm.png></span><!-- logo for regular state and mobile devices --> <span class=logo-lg><img src=/assets/images/logo.png></span></a><nav class=\\\"navbar navbar-static-top\\\" role=navigation><!-- Sidebar toggle button--> <a href=# class=sidebar-toggle data-toggle=offcanvas role=button><span class=sr-only>Toggle navigation</span> </a><!-- Navbar Right Menu --><div class=navbar-custom-menu><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown user user-menu\\\"><a href=# class=dropdown-toggle data-toggle=dropdown aria-expanded=false><span class=hidden-xs>{{ header.models.current_user.firstName }} {{ header.models.current_user.lastName }}</span></a><ul class=dropdown-menu><!-- User image --><li class=user-header><img src=\\\"{{ header.models.current_user.image || \\'/assets/images/logo-sm.png\\' }}\\\" ng-class=\\\"{\\'default-user-img\\': !header.models.current_user.image}\\\" class=img-circle alt=\\\"User Image\\\"><p>{{ header.models.current_user.email }}</p></li><!-- Menu Footer--><li class=user-footer><div class=pull-left><a ui-sref=main.admin.profile class=\\\"btn btn-default btn-flat\\\">Profilo</a></div><div class=pull-right><a ui-sref=main.logout class=\\\"btn btn-default btn-flat\\\">Esci</a></div></li></ul></li></ul></div></nav></header>\");\n$templateCache.put(\"app/components/galoreSidebar/galoreSidebar.html\",\"<div class=main-sidebar><!-- Inner sidebar --><div class=sidebar><!-- Sidebar Menu --><ul class=sidebar-menu><!-- SECTION Main Menu --><li class=header>Main Menu</li><!-- Home --><li class=treeview><a ui-sref=main.admin.dashboard><i class=\\\"fa fa-dashboard\\\" aria-hidden=true></i> <span>Dashboard</span></a></li><!-- !Home --><!-- SECTION Livelli --><li class=treeview ng-repeat=\\\"level in sidebar.models.levels | orderBy:\\'title\\'\\\"><a href=#><i class=\\\"fa fa-circle\\\"></i> <span>Livello {{level.title}}</span> <span class=pull-right-container><i class=\\\"fa fa-angle-left\\\"></i></span></a><ul class=treeview-menu><!-- Visualizza Unità --><li ng-repeat=\\\"unit in level.units | orderBy:[\\'unit_code\\',\\'sub_unit_code\\',\\'title\\']\\\" ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.unit\\' && sidebar.models.current_unit.id === unit.id }\\\"><a id={{unit.id}} ui-sref=\\\"main.admin.unit({id: unit.id})\\\"><i ng-class=\\\"{\\'fa fa-circle-o fa-red\\':{{unit.published}} == true, \\'fa fa-circle-o\\':{{unit.published}} == false}\\\"></i> Unità {{unit.unit_code}}.{{unit.sub_unit_code}} - {{ unit.title }}</a></li><!-- Aggiungi Unità --><li ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.createUnit\\'}\\\"><a ng-click=sidebar.addUnit(level.id)><i class=\\\"fa fa-plus\\\"></i> Aggiungi unità</a></li></ul></li><!-- !SECTION Livelli --><!-- SECTION Support --><li class=header>Admin</li><!-- Users --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.documentation\\'}\\\"><a ui-sref=main.admin.documentation><i class=\\\"fa fa-users\\\" aria-hidden=true></i> <span>Utenti</span></a></li><!-- !Users --><!-- Glossario --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.documentation\\'}\\\"><a ui-sref=main.admin.documentation><i class=\\\"fa fa-book\\\" aria-hidden=true></i> <span>Glossario</span></a></li><!-- !Glossario --><!-- Faq --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.faq\\'}\\\"><a ui-sref=main.admin.faq><i class=\\\"fa fa-comments-o\\\" aria-hidden=true></i> <span>Faq</span></a></li><!-- !Faq --><!-- !SECTION Support --></ul><!-- /.sidebar-menu --></div><!-- /.sidebar --></div><!-- /.main-sidebar -->\");\n$templateCache.put(\"app/components/sectionA/sectionA.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a data-toggle=collapse data-target=#intro aria-expanded=false class=\\\"collapsed title-active\\\" role=button ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>A) {{sectionA.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a></div><div id=intro box-expander=sectionA.form><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=sectionA.submit() ng-model=sectionA.form novalidate><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a data-target=#sec_a_tab_video data-toggle=tab aria-expanded=false role=button>Video</a></li></ul><div class=tab-content><div class=\\\"tab-pane tab-big active\\\" id=sec_a_tab_video><tab-video model=sectionA.form></tab-video></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --><div ng-show=sectionA.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></form></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionB/infoPopoverTemplate.html\",\"<div class=info-popover><p class=info-popover-title>Regole di inserimento</p><ul><li>I <strong>nomi dei personaggi</strong> devono essere contenuti tra i caratteri <strong>‘@’</strong><br><span class=popover-example>es. @Pietro@</span></li><li>Le <strong>traduzioni</strong> devono essere tra parentesi quadre <strong>[...]</strong><br><span class=popover-example>es.[Chi è alla porta?]</span></li><li>Bisogna caricare <strong>un file audio per ogni pezzo di dialogo.</strong><br>Il nome del file audio associato alla porzione di dialogo <strong>va specificato dopo la fine del dialogo</strong> e devono essere contenuti tra i caratteri <strong>‘/’</strong> <span class=popover-example>es. /1.1-r1.mp3/</span></li><li>Usare il carattere <strong>‘#’</strong> per le <strong>frasi che non sono associate ad un personaggio</strong></li></ul></div>\");\n$templateCache.put(\"app/components/sectionB/sectionB.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a ng-class=\\\"{\\'title-active\\': sectionB.form.active}\\\" data-toggle=collapse role=button data-target=#sectionB aria-expanded=false class=collapsed ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>B) {{sectionB.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=sectionB.form.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionB box-expander=sectionB.form.active><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=sectionB.submit() ng-model=sectionB.form novalidate><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a role=button data-target=#sec_b_tab_info data-toggle=tab aria-expanded=true>Info</a></li><li><a role=button data-target=#sec_b_tab_dialogo data-toggle=tab aria-expanded=false>Dialogo</a></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" id=sec_b_tab_info><tab-info-section model=sectionB.form></tab-info-section></div><div class=clear></div><!-- /.tab-pane --><div class=tab-pane id=sec_b_tab_dialogo><exercise-dialogue model=sectionB.form></exercise-dialogue><div class=separator></div></div><div class=clear></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --></form><div ng-show=sectionB.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionC/sectionC.html\",\"<div class=\\\"row sectionC\\\"><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a ng-class=\\\"{\\'title-active\\': sectionC.form.active}\\\" data-toggle=collapse role=button data-target=#sectionC aria-expanded=false class=collapsed ng-click=sectionC.getExercises() ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>C) {{sectionC.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=sectionC.form.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionC box-expander=sectionC.form.active><div class=box-body><div class=row><div class=col-xs-12><div class=nav-tabs-custom><uib-tabset active=activeTabIndex><uib-tab index=0 heading=Info><div class=content><form id=formIntroVideo name=formIntroVideo ng-submit=sectionC.submit() novalidate><div class=row><tab-info-section model=sectionC.form></tab-info-section></div><input type=submit class=\\\"btn btn-success btn-save-section\\\" value=\\\"Salva Sezione\\\"></form></div></uib-tab><uib-tab index=1 heading=\\\"Aggiungi esercizi\\\"><div class=content><exercise model=sectionC.form section=UnitSectionC></exercise></div></uib-tab><uib-tab index=\\\"$index + 2\\\" ng-repeat=\\\"tab in sectionC.models.current_unit_sections_c_exercises.exercises\\\" heading=\\\" Esercizio {{tab.exercise_number}}\\\"><exercise-show model=tab section=sectionC.form.id></exercise-show></uib-tab></uib-tabset><!-- /.tab-content --></div><!-- nav-tabs-custom --></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionD/sectionD.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a ng-class=\\\"{\\'title-active\\': sectionD.form.active}\\\" data-toggle=collapse role=button data-target=#sectionD aria-expanded=false class=collapsed ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>D) {{sectionD.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=sectionD.form.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionD box-expander=sectionD.form.active><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=sectionD.submit() ng-model=sectionD.form novalidate><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a role=button data-target=#sec_d_tab_info data-toggle=tab aria-expanded=true>Info</a></li><li><a role=button data-target=#sec_d_tab_teoria data-toggle=tab aria-expanded=true>Teoria</a></li><li><a role=button data-target=#sec_d_tab_teoria_depth data-toggle=tab aria-expanded=true>Testo Approfondimento</a></li><li><a role=button data-target=#sec_d_tab_video_depth data-toggle=tab aria-expanded=true>Video Approfondimento</a></li><li><a role=button data-target=#sec_d_tab_es data-toggle=tab aria-expanded=false>Esercizi</a></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" id=sec_d_tab_info><tab-info-section model=sectionD.form></tab-info-section></div><div class=clear></div><div class=\\\"tab-pane tab-xxl\\\" id=sec_d_tab_teoria><tab-theory model=sectionD.form></tab-theory></div><div class=clear></div><div class=\\\"tab-pane tab-big\\\" id=sec_d_tab_teoria_depth><tab-theory-in-depth model=sectionD.form></tab-theory-in-depth></div><div class=clear></div><!-- /.tab-pane --><div class=\\\"tab-pane tab-big\\\" id=sec_d_tab_video_depth><tab-video model=sectionD.form></tab-video></div><div class=clear></div><div class=\\\"tab-pane tab-big\\\" id=sec_d_tab_es><tab-exercise model=sectionD.form></tab-exercise></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --></form></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionE/sectionE.html\",\"<div class=\\\"row sectionE\\\"><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a ng-class=\\\"{\\'title-active\\': sectionE.form.active}\\\" data-toggle=collapse role=button data-target=#sectionE aria-expanded=false class=collapsed ng-click=sectionE.getExercises() ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>E) {{sectionE.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=sectionE.form.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionE box-expander=sectionE.form.active><div class=box-body><div class=row><div class=col-xs-12><div class=nav-tabs-custom><uib-tabset active=activeTabIndex><uib-tab index=0 heading=Info><div class=content><form id=formIntroVideo name=formIntroVideo ng-submit=sectionE.submit() novalidate><div class=row><tab-info-section model=sectionE.form></tab-info-section></div><input type=submit class=\\\"btn btn-success btn-save-section\\\" value=\\\"Salva Sezione\\\"></form></div></uib-tab><uib-tab index=1 heading=\\\"Aggiungi esercizi\\\"><div class=content><exercise model=sectionE.form section=UnitSectionE></exercise></div></uib-tab><uib-tab index=\\\"$index + 2\\\" ng-repeat=\\\"tab in sectionE.models.current_unit_sections_e_exercises.exercises\\\" heading=\\\" Esercizio {{tab.exercise_number}}\\\"><exercise-show model=tab section=sectionE.form.id></exercise-show></uib-tab></uib-tabset><!-- /.tab-content --></div><!-- nav-tabs-custom --></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionUnit/sectionUnit.html\",\"<div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a data-toggle=collapse data-target=#sectionUnit aria-expanded=false class=\\\"collapsed title-active\\\" role=button ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>Info Unità <i ng-class=\\\"{\\'fa fa-angle-up\\': !isCollapsed, \\'fa fa-angle-down\\': isCollapsed}\\\" aria-hidden=true></i></h4></a></div><div id=sectionUnit box-expander=sectionUnit.form class=\\\"panel-collapse collapse in\\\"><div class=box-body><form id=formIntroVideo name=formIntroVideo ng-submit=sectionUnit.submit(sectionUnit.form.id) ng-model=sectionUnit.form novalidate><div class=row id=tab_intro><div class=col-sm-6><div class=form-group><label>Codice Unità</label><input name=unit_code ng-model=sectionUnit.form.unit_code type=number class=form-control placeholder=\\\"Inserisci il codice dell\\'unità\\\"><!-- <select\\n                    name = \\\"unit_code\\\"\\n                    ng-model=\\\"sectionUnit.form.unit_code\\\"\\n                    class=\\\"form-control\\\"\\n                    ng-options=\\\"n for n in [] | range:1:21\\\"\\n                  >\\n                  </select> --></div></div><div class=col-sm-6><div class=form-group><label>Sotto Codice Unità</label><!-- <select\\n                    name = \\\"sub_unit_code\\\"\\n                    ng-model=\\\"sectionUnit.form.sub_unit_code\\\"\\n                    class=\\\"form-control\\\"\\n                    ng-options=\\\"n for n in [] | range:1:21\\\"\\n                  >\\n                  </select> --> <input name=sub_unit_code ng-model=sectionUnit.form.sub_unit_code type=number class=form-control placeholder=\\\"Inserisci il sotto codice dell\\'unità\\\"></div></div><div class=col-sm-6><div class=form-group><label for=\\\"\\\">Titolo Unità</label><input name=title ng-model=sectionUnit.form.title type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'unità\\\"></div></div></div><div class=row><div class=col-xs-12><input type=submit class=\\\"btn btn-default pull-right btn-blue\\\" value=\\\"Salva Info Unità\\\"> <input type=button ng-click=sectionUnit.destroy(sectionUnit.form.id) class=\\\"btn btn-success pull-right btn-red\\\" value=\\\"Elimina Unità\\\"></div></div><div ng-show=sectionUnit.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></form></div></div></div>\");\n$templateCache.put(\"app/components/tabInfoSection/tabInfoSection.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\"><label for=\\\"\\\">Titolo Sessione</label><input ng-model=model.title name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il titolo della sessione\\\"></div></div>\");\n$templateCache.put(\"app/components/tabTheory/tabTheory.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Titolo</label><input ng-model=model.theory_title name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il titolo\\\" required><span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': formIntroVideo[\\'name\\' + ($index+1)].$dirty && formIntroVideo[\\'name\\' + ($index+1)].$invalid}\\\"><label for=formIntroVideo-subUnitCod{{$index+1}}>Sottotitolo</label><input ng-model=model.theory_subtitle name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il sottotitolo\\\" required> <span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div></div><div class=separator></div><div class=col-sm-12><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Testo</label><ckeditor-color model=model.theory_text></ckeditor-color></div></div><div class=separator></div><div class=col-sm-12><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Tip Teoria</label><ckeditor-standard model=model.theory_text_tips></ckeditor-standard></div></div>\");\n$templateCache.put(\"app/components/tabTheoryInDepth/tabTheoryInDepth.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Titolo</label><input ng-model=model.theory_in_depth_title name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il titolo\\\"></div></div><div class=col-sm-6><div class=form-group><label>Sottotitolo</label><input ng-model=model.theory_in_depth_subtitle name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il sottotitolo\\\"></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Testo</label><ckeditor-standard model=model.theory_in_depth_text></ckeditor-standard></div></div>\");\n$templateCache.put(\"app/components/tabVideo/tabVideo.html\",\"<div class=col-sm-6><div class=form-group><label for=\\\"\\\">Titolo Video</label><input ng-model=tabVideo.model.video_title name=video_title type=text class=form-control placeholder=\\\"Inserisci il titolo del video\\\"></div></div><div class=col-sm-6><div class=form-group><label>Sottotitolo Video</label><input ng-model=tabVideo.model.video_subtitle name=video_subtitle type=text class=form-control placeholder=\\\"Inserisci il sottotitolo del video\\\"></div></div><div class=col-sm-6><label for=\\\"\\\">Upload Video</label><file model=tabVideo.model.video></file><div ng-show=tabVideo.model.video_url class=url-video-box><span>File Caricato: </span><a href={{tabVideo.model.video_url}} target=_blank>{{tabVideo.model.video_filename}}</a><br></div></div><div class=col-sm-6><label for=\\\"\\\">Tip Video</label><ckeditor-standard model=model.model.video_tips></ckeditor-standard></div>\");\n$templateCache.put(\"app/components/toggleSwitch/toggleSwitch.html\",\"<div class=toggle-switch><span class=title-pubblica>Pubblica:</span><div class=switch><input type=radio class=switch-input name=view value=true id=yes ng-checked=toggleSwitch.model.published ng-model=toggleSwitch.switch ng-init=\\\"toggleSwitch.switch = toggleSwitch.model.published\\\" ng-click=\\\"toggleSwitch.publish(); $event.preventDefault();\\\"><label for=yes class=\\\"switch-label switch-label-off\\\">Si</label><input type=radio class=switch-input name=view value=false id=no ng-checked=!toggleSwitch.model.published ng-model=toggleSwitch.switch ng-init=\\\"toggleSwitch.switch = toggleSwitch.model.published\\\" ng-click=\\\"toggleSwitch.unpublish(); $event.preventDefault();\\\"><label for=no class=\\\"switch-label switch-label-on\\\">No</label><span class=switch-selection></span></div></div>\");\n$templateCache.put(\"app/components/uploadFile/uploadFile.html\",\"<input name=file type=file ng-model=model.video_url class=input-file>\");\n$templateCache.put(\"app/pages/admin/admin.html\",\"<div class=wrapper><galore-header></galore-header><galore-sidebar></galore-sidebar><div class=content-wrapper><div ui-view></div></div><galore-footer></galore-footer></div>\");\n$templateCache.put(\"app/pages/createUnit/createUnit.html\",\"<section class=create-unit><section class=content-header><h1>Aggiungi unità</h1></section><section class=content><section-a></section-a><section-b></section-b><section-c></section-c><section-d></section-d><section-e></section-e></section></section>\");\n$templateCache.put(\"app/pages/dashboard/dashboard.html\",\"<div class=\\\"content events\\\"><div class=row><div class=col-xs-12><div class=\\\"box box-default\\\"><div class=box-header><div class=box-title>Dashboard</div></div></div><!-- /.box --></div></div></div>\");\n$templateCache.put(\"app/pages/login/login.html\",\"<div class=\\\"login login-box\\\"><div class=login-logo><img src=/assets/images/logo-login.png alt=\\\"English Galore\\\"></div><!-- /.login-logo --><div class=login-box-body><p class=login-box-msg>Sign in to start your session</p><form id=loginForm name=loginForm ng-submit=vm.login()><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': loginForm.email.$dirty && loginForm.email.$invalid}\\\"><input ng-model=vm.user.email name=email type=email class=form-control placeholder=Email required> <span class=\\\"glyphicon glyphicon-envelope form-control-feedback\\\"></span> <span ng-show=loginForm.email.$dirty ng-messages=loginForm.email.$error class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span> <span ng-message=email>Inserire un indirizzo email valido</span></span></div><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': loginForm.password.$dirty && loginForm.password.$invalid}\\\"><input ng-model=vm.user.password name=password type=password class=form-control placeholder=Password required> <span class=\\\"glyphicon glyphicon-lock form-control-feedback\\\"></span> <span ng-show=loginForm.password.$dirty ng-messages=loginForm.password.$error class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div><div class=row><!-- /.col --><div class=col-xs-12><button ng-disabled=loginForm.$invalid type=submit class=\\\"btn btn-success btn-block btn-flat\\\">Sign In</button></div><!-- /.col --></div></form></div><!-- /.login-box-body --></div>\");\n$templateCache.put(\"app/pages/main/main.html\",\"<div class=animate ui-view></div>\");\n$templateCache.put(\"app/pages/profile/profile.html\",\"<div class=profile><section class=content-header><h1>Gestione Profilo</h1></section></div>\");\n$templateCache.put(\"app/pages/unit/unit.html\",\"<section class=unit><section class=content-header><h1>{{vm.models.current_unit.title}} <span ng-if=!vm.models.current_unit.published class=title-bozza>- Bozza</span> <span ng-if=vm.models.current_unit.published class=title-pubblicata>- Pubblicata</span></h1><div class=pull-right><toggle-switch model=vm.models.current_unit></toggle-switch></div></section><section class=content><section-unit unit=vm.models.current_unit></section-unit><section-a section=vm.models.current_unit_section_a></section-a><section-b section=vm.models.current_unit_section_b></section-b><section-c section=vm.models.current_unit_section_c></section-c><section-d section=vm.models.current_unit_section_d></section-d><section-e section=vm.models.current_unit_section_e></section-e></section></section>\");\n$templateCache.put(\"app/components/exercise/destroy/destroy.html\",\"<div class=modal-header><a role=button class=close ng-click=unitDestroy.cancel()><span aria-hidden=true>×</span></a><h3 class=modal-title>Sei sicuro?</h3></div><div class=modal-body>Questa operazione <strong>non è reversibile</strong>.</div><div class=modal-footer><a role=button class=\\\"btn btn-blue pull-left\\\" ng-click=exerciseDestroy.cancel()>Annulla</a> <a role=button class=\\\"btn btn-success\\\" ng-click=exerciseDestroy.ok()>Elimina esercizio</a></div>\");\n$templateCache.put(\"app/components/exercise/exerciseShow/exerciseShow.html\",\"<div class=content><form ng-submit=exerciseShow.submit() ng-model=exerciseShow.form><div class=row><div class=col-sm-6><div class=form-group><input type=hidden ng-init=\\\"exerciseShow.form.id = exerciseShow.model.id\\\" ng-model=exerciseShow.form.id><label>Numero Esercizio</label><select ng-init=\\\"exerciseShow.form.exercise_number = exerciseShow.model.exercise_number\\\" ng-model=exerciseShow.form.exercise_number class=form-control ng-options=\\\"n for n in [] | range:1:6\\\" required></select></div></div><div class=col-sm-6><div class=form-group><label>Tipologia Esercizio</label><select ng-init=\\\"exerciseShow.exercise_type_temp = {id: exerciseShow.model.exercise_type}\\\" ng-model=exerciseShow.exercise_type_temp class=form-control ng-options=\\\"option.name for option in exerciseShow.data.availableOptions track by option.id\\\" required></select></div></div><div class=col-sm-6><div class=form-group ng-class=\\\"\\\"><label>Titolo Esercizio</label><input ng-init=\\\"exerciseShow.form.title = exerciseShow.model.title\\\" ng-model=exerciseShow.form.title type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'esercizio\\\" required></div></div><div class=col-sm-6><div class=form-group ng-class=\\\"\\\"><label>Sottotitolo Esercizio</label><input ng-init=\\\"exerciseShow.form.subtitle = exerciseShow.model.subtitle\\\" ng-model=exerciseShow.form.subtitle type=text class=form-control placeholder=\\\"Inserisci il sottotitolo dell\\'esercizio\\\" required></div></div></div><div class=row><div class=col-sm-6><div class=form-group ng-init=\\\"exerciseShow.form.exercise_tips = exerciseShow.model.exercise_tips\\\"><label for=\\\"\\\">Tip Esercizio</label><ckeditor-standard model=exerciseShow.form.exercise_tips></ckeditor-standard></div></div><div class=col-sm-6 ng-if=\\\"(exerciseShow.exercise_type_temp.id > 0 && exerciseShow.exercise_type_temp.id < 6) || exerciseShow.exercise_type_temp.id === 8 || exerciseShow.exercise_type_temp.id === 10\\\"><div class=form-group ng-init=\\\"exerciseShow.form.exercise_text = exerciseShow.model.exercise_text\\\"><label for=\\\"\\\">Testo Esercizio</label><ckeditor-standard ng-model=exerciseShow.form.exercise_text></ckeditor-standard></div></div></div><div class=separator></div><div class=row ng-if=\\\"exerciseShow.exercise_type_temp.id === 6 || exerciseShow.exercise_type_temp.id === 9\\\"><exercise-image-text model=exerciseShow.form.exercise_image_text_items ng-init=\\\"exerciseShow.form.exercise_image_text_items = exerciseShow.model.exercise_image_text_items\\\"></exercise-image-text></div><div class=separator></div><div class=row><div class=col-sm-12><input type=submit class=\\\"btn btn-success pull-right btn-blue\\\" value=\\\"Salva Esercizio\\\"> <input type=button ng-click=exerciseShow.destroy(exerciseShow.form.id) class=\\\"btn btn-success pull-right btn-red\\\" value=\\\"Elimina Esercizio\\\"></div></div></form><div ng-show=exerciseShow.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div>\");\n$templateCache.put(\"app/pages/unit/destroy/destroy.html\",\"<div class=modal-header><a role=button class=close ng-click=unitDestroy.cancel()><span aria-hidden=true>×</span></a><h3 class=modal-title>Sei sicuro?</h3></div><div class=modal-body>Se elimini questa unità, verranno eliminate anche tutte le sezioni associate.<br>Questa operazione <strong>non è reversibile</strong>.</div><div class=modal-footer><a role=button class=\\\"btn btn-blue pull-left\\\" ng-click=unitDestroy.cancel()>Annulla</a> <a role=button class=\\\"btn btn-success\\\" ng-click=unitDestroy.ok()>Elimina esercizio</a></div>\");}]);"],"sourceRoot":"/source/"}