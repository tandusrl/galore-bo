{"version":3,"sources":["scripts/app.js"],"names":["angular","module","FaqCategoryDestroyController","$uibModalInstance","vm","this","ok","close","cancel","dismiss","$inject","controller","UnitDestroyController","CategoryController","models","faq","$q","$scope","$uibModal","setLoading","res","loading","resolve","unsetLoading","then","showFaqCategories","faq_categories","copy","addRow","form","faq_category_number","newRow","push","title","submit","saveFaqCategory","destroy","el","id","open","templateUrl","controllerAs","windowClass","result","_destroy","index","indexOf","splice","UploadTermsController","glossary","toastr","units","$state","uploadPromises","separator","accept","uploadAudioFile","$files","files_audio","removeFile","checkFile","uploadFileAudio","audio_url","audio_items","forEach","item","audio","name","promise","uploadFileGlossary","filename","type","uploadFileS3","upload_url","audio_filename","updateFileGlossary","glossary_audio_item","length","error","flag","val","check","csvCallback","all","trad_en","desc_en","trad_it","desc_it","saveGlossary","glossary_items","success","go","exerciseShow","ExerciseController","$timeout","uploadAudioPromises","data","availableOptions","uploadImageTipFile","$file","image_tip","exercise_tips_image_filename","createFilesAudio","exercise_audio_items","file_name","uploadFileAudioExerciseDialogue","id_temp","submitImageTip","exercise_tips_image_url","uploadImageTipExercise","model","exercise_type","exercise_type_temp","exercise_text_text_items","exercise_image_text_items","exercise_text","item_temp","item_number","image_url","image_filename","text_en","image","file","createExerciseImage","exercise_image_text_item","updateExercise","exercise","currentsection","value","key","element","currenttab","tab","destroyExercise","section","removeClass","addClass","tabinfo","dynamicPopover","removeFileCreated","removeFileTemp","$watch","newVal","oldVal","directive","restrict","bindToController","scope","ExerciseDestroyController","UserController","users","showUsers","UnitController","$stateParams","show","getSectionA","unit","unit_section_a","getSectionB","unit_section_b","getSectionC","unit_section_c","getSectionD","unit_section_d","getSectionE","unit_section_e","ProfileController","LoginController","galoreApi","errorManager","user","login","role","GlossaryController","uploadFiles","file_audio","audio_url_temp","audio_filename_temp","audio_present","showGlossary","page","pagination","current_page","unshift","playAudio","url","Audio","play","uploadAudioFileTemp","glossary_items_temp","newValues","oldValues","getGlossaryPage","FaqController","showFaq","faqs","faq_category_id","category_temp","category_type","faq_number","question","answer","faqs_temp","saveFaq","DashboardController","CreateUnitController","RangeFilter","input","min","max","parseInt","i","filter","AdminController","loggedIn","factory","idCount","utils","nextId","findFirst","array","findFirstByName","removeFirst","found","sortByOrder","isArray","sort","a","b","order","mergeOrPush","elem","added","merge","UploadFileLink","bind","event","files","target","$apply","link","uiState","toggleSwitch","ToggleSwitchController","publish","publishUnit","levels","published","current_unit","unpublish","unpublishUnit","tabVideo","TabVideoController","uploadVideoFile","video","video_filename","video_tips_image_filename","video_tips_image_url","tabTheoryInDepth","tabTheory","TabTheoryController","theory_image_filename","theory_image_url","image_theory","removeVideoCreated","video_url","removeVideoTemp","removeTipFileCreated","theory_text_tips_image_filename","theory_text_tips_image_url","removeTipFileTemp","image_tip_theory","uploadImageFile","theory_image_upload","tabInfoSection","tabDialogue","TabDialogueController","dialogue_tips_image_filename","dialogue_tips_image_url","audio_items_temp","showOnHover","linkFunc","visible","showAnimate","updateVisibility","hover","sectionUnit","SectionUnitController","$http","update","destroyUnit","animationsEnabled","sectionE","SectionEController","activeTabIndex","tabs","changeStatusSection","active","updateSection","getExercises","isCollapsed","current_unit_sections_e_exercises","exercises","sectionD","SectionDController","submitUpload","uploadVideo","submitImageTheory","uploadImageTheory","uploadImageTip","submitImageTheoryTip","submitSection","theory_title","theory_text","removeVideo","sectionC","SectionCController","counterC","current_unit_sections_c_exercises","sectionB","SectionBController","createFileAudio","audio_item","dialogue","sectionA","SectionAController","longTermMemory","$log","resPipe","parseResponse","helpers","validModels","_model","injectDefaults","fetchModel","forEachModel","injectProjectDefaults","injectUserDefaults","markReload","m","_reload","markDestroyed","_destroyed","removeUnitFromLevels","unitId","levelId","curUnit","sortFramesAndComments","project","sortFramesAndCommentsSingle","sortFramesCache","getRelatedProject","frames","sortCommentsCache","frame","getRelatedFrame","comments","updateCache","level","updateModelCache","getRelatedLevel","current_unit_section_a","current_unit_section_b","current_unit_section_c","current_unit_section_d","current_unit_section_e","current_unit_sections_d_exercises","current_exercise","cleanCache","setProjectAsMine","setProjectAsMineSingle","updateCurrent","memorizeCache","v","k","memorize","log","info","debugger","users_temp","glossary_temp","level_id","func","modelCache","newData","merged","localStorage","toJson","remember","fromJson","e","forget","oblivion","clear","Upload","counter","galoreUploader","total","upload","displayName","fileSize","obj","uploadId","status","size","updateTotal","response","err","reject","evt","loaded","percentage","newFiles","processing","uploading","canceled","queued","galoreUploaderDirective","expanded","uploader","galoreSidebar","SidebarController","state","addUnit","unit_code","sub_unit_code","sortUnits","keyA","keyB","newUnit","create","checkCurrentUnit","checkCurrentLevel","checkDashboard","current","SidebarLink","window","trigger","replace","galoreHeader","HeaderController","sidebar_mini","changeLevelsIcon","isCollapse","HeaderLink","galoreFooter","FooterController","FooterLink","$auth","apiUrl","unitApiUrl","showLevelsApiUrl","sectionApiUrl","exercisesApiUrl","userApiUrl","faqCategoriesApiUrl","faqApiUrl","glossaryApiUrl","cache","cacheOrHttp","method","headers","keep","absUrl","config","toUpperCase","uploadFileS3http","file_type","Content-Type","if-modified-since","undefined","expect200","expect201","expect204","galoreoApi","submitLogin","getMe","logout","signOut","changePassword","updatePassword","createUnit","deleteFileAudio","file_id","createExercise","id_exercise","section_id","showUnit","getUserPage","indexLevels","updateUnit","uploadFile","exercise_id","exercise_item_id","uploadExerciseFileAudio","audio_id","type_of_tip","exerciseTextText","exerciseTextTextController","exercise_text_text_item","text_it","idEx","exerciseImageText","exerciseImageTextController","changeImageFile","row","changeAudioFile","idex","TabExerciseController","selectedOption","unit_section_id","unit_section_type","exercise_text_text","exercise_image_text","exercise_tips","subtitle","isObject","getErrorString","isString","full_messages","error_description","errors","msg","myErr","join","reset","ckeditorStandard","CkEditorStandardController","options","language","allowedContent","entities","toolbar","colorButton_enableMore","colorButton_enableAutomatic","autoParagraph","toolbar_Full","items","ckeditorColor","CkEditorColorController","ignoreEmptyParagraph","extraPlugins","instanceCondition","action","resource","instance","perms","current_user","can","cond","instanceConditions","canManage","manage","canUpdate","canShow","canIndex","customCan","canDirective","attr","watcher","shown","negative","toShow","parsed","split","slice","substr","$on","boxExpander","boxExpanderLink","collapse","me","updateMe","addInstanceConditions","getInstanceConditions","humanize","temp_url","promiseAudio","temp_audio_url","audio_file_name","runBlock","$rootScope","defaultBodyClasses","stateChangeSuccess","toState","pms","params","bodyClasses","run","routerConfig","$stateProvider","$urlRouterProvider","abstract","validateUser","signedIn","onEnter","otherwise","constant","$logProvider","toastrConfig","$animateProvider","$locationProvider","$provide","$authProvider","debugEnabled","classNameFilter","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","toastClass","html5Mode","hashPrefix","configure","tokenValidationPath","signOutUrl","emailRegistrationPath","accountDeletePath","passwordResetPath","passwordUpdatePath","passwordResetSuccessUrl","location","origin","emailSignInPath","$templateCache","put"],"mappings":"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","file":"scripts/app-c3aa6e58ac.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore', [\n      'ngAnimate',\n      'ngCookies',\n      'ngSanitize',\n      'ngMessages',\n      'ui.router',\n      'toastr',\n      'ui.bootstrap',\n      'ng-token-auth',\n      'ckeditor',\n      'ngFileUpload',\n      'angularUtils.directives.dirPagination',\n      'ngCsvImport'\n      ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('FaqCategoryDestroyController', FaqCategoryDestroyController);\n\n  /** @ngInject */\n  function FaqCategoryDestroyController($uibModalInstance) {\n    var vm = this;\n\n    vm.ok = function () {\n      $uibModalInstance.close(true);\n    }\n\n    vm.cancel = function () {\n      $uibModalInstance.dismiss();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('UnitDestroyController', UnitDestroyController);\n\n  /** @ngInject */\n  function UnitDestroyController($uibModalInstance) {\n    var vm = this;\n\n    vm.ok = function () {\n      $uibModalInstance.close(true);\n    }\n\n    vm.cancel = function () {\n      $uibModalInstance.dismiss();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('CategoryController', CategoryController)\n\n  /** @ngInject */\n  function CategoryController(models, faq, $q, $scope, $uibModal) {\n    var vm = this;\n    vm.models = models;\n\n    vm.setLoading = function (res) {\n      vm.loading = true;\n      return $q.resolve(res);\n    }\n\n    vm.unsetLoading = function (res) {\n      vm.loading = false;\n      return $q.resolve(res);\n    }\n\n    vm.setLoading()\n      .then(faq.showFaqCategories)\n      .then(function(){\n        vm.faq_categories = angular.copy(vm.models.faq_categories);\n      })\n      .finally(vm.unsetLoading);\n\n\n    vm.addRow = function(){\n      if(!vm.form || !vm.form.faq_category_number){\n        return;\n      }\n      if(!vm.faq_categories){\n          vm.faq_categories = [];\n      }\n      var newRow = angular.copy(vm.form);\n      vm.faq_categories.push(newRow);\n      vm.form.faq_category_number = \"\";\n      vm.form.title = \"\";\n    }\n\n    vm.submit = function(){\n      vm.setLoading()\n        .then(function(){\n          return faq.saveFaqCategory({'faq_categories': vm.faq_categories});\n        })\n        .then(function(){\n          vm.faq_categories = angular.copy(vm.models.faq_categories);\n        })\n        .finally(vm.unsetLoading);\n\n    }\n\n    vm.destroy = function(el){\n      if(!el.id){\n      var index = vm.faq_categories.indexOf(el);\n       vm.faq_categories.splice(index, 1);\n      }else{\n        $uibModal.open({\n            templateUrl: 'app/pages/faq/category/destroy/destroy.html',\n            controller: 'FaqCategoryDestroyController',\n            controllerAs: 'faqCategoryDestroy',\n            windowClass: 'modal-default'\n          }).result\n          .then(function () {\n            el._destroy = true;\n          });\n      }\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('UploadTermsController', UploadTermsController);\n\n  /** @ngInject */\n  function UploadTermsController(models, glossary, $q, $scope, toastr, units, $state) {\n    var vm = this;\n    vm.models = models;\n    var uploadPromises = [];\n\n    vm.separator = ';';\n    vm.accept = '.csv';\n\n    vm.setLoading = function (res) {\n      vm.loading = true;\n      return $q.resolve(res);\n    }\n\n    vm.unsetLoading = function (res) {\n      vm.loading = false;\n      return $q.resolve(res);\n    }\n\n    vm.uploadAudioFile = function($files){\n      vm.files_audio = $files;\n    };\n\n    vm.removeFile = function(index){\n      vm.files_audio.splice(index, 1);\n      vm.checkFile();\n    }\n\n    vm.uploadFileAudio = function(){\n      var audio_url = \"\";\n      if(!vm.audio_items){\n        vm.audio_items = [];\n      }\n      uploadPromises = [];\n      angular.forEach(vm.files_audio, function(item){\n        var audio = {};\n        if(item && item.name && !item._destroy){\n          var promise = glossary\n                .uploadFileGlossary({ filename: item.name, type: item.type })\n                .then(function(res) {\n                   audio_url = res.audio_url;\n                   return units.uploadFileS3(res.upload_url, item.type, item)\n                 })\n                 .then(function(){\n                   audio.audio_url = audio_url;\n                   audio.audio_filename = item.name;\n                   vm.audio_items.push(audio);\n                   return glossary.updateFileGlossary({'glossary_audio_item':{audio_url: audio.audio_url, audio_filename: audio.audio_filename}})\n                 });\n          uploadPromises.push(promise);\n        }\n      });\n     }\n\n    vm.checkFile = function(){\n      if(!vm.files_audio || vm.files_audio.length < 1){\n        toastr.error('Non sono presenti file audio', 'Error');\n        return;\n      }\n      if(vm.result && vm.result.length > 0){\n        vm.setLoading();\n        angular.forEach(vm.result, function(el, index){\n          var flag = false;\n          angular.forEach(vm.files_audio, function(val){\n            if(el[4] == val.name){\n              flag = true;\n              return;\n            }\n          })\n          if(flag){\n              vm.result[index].check = true;\n          }else{\n              vm.result[index].check = false;\n          }\n        })\n        vm.unsetLoading();\n      }\n    }\n\n    vm.csvCallback = function(){\n    }\n\n\n    vm.submit = function(){\n      vm.setLoading()\n        .then(function(){\n            if(vm.files_audio && vm.files_audio.length > 0){\n              vm.uploadFileAudio();\n              return $q\n              .all(uploadPromises)\n            }\n         })\n        .then(function(){\n            if(vm.result){\n            vm.glossary = angular.copy(vm.result);\n            angular.forEach(vm.glossary, function(el){\n                el.trad_en = el[0];\n                el.desc_en = el[1];\n                el.trad_it = el[2];\n                el.desc_it = el[3];\n                el.audio_filename = el[4];\n                delete el[0];\n                delete el[1];\n                delete el[2];\n                delete el[3];\n                delete el[4];\n                delete el.check;\n            });\n            return glossary.saveGlossary({'glossary_items': vm.glossary});\n          }\n        })\n        .then(function(){\n          toastr.success('Modifiche salvate con successo');\n          $state.go('main.admin.glossary');\n        })\n        .finally(vm.unsetLoading);\n\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exerciseShow', exerciseShow);\n\n  /** @ngInject */\n  function exerciseShow() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/exercise/exerciseShow/exerciseShow.html',\n      controller: ExerciseController,\n      controllerAs: 'exerciseShow',\n      bindToController: true,\n      scope:{\n        model: '=',\n        section: '@',\n        currentsection: '=',\n        currenttab: '@',\n        tabinfo: '@'\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function ExerciseController(models, $state, units, $q, $scope, $uibModal, $timeout) {\n      var vm = this;\n      vm.models = models;\n      var uploadAudioPromises = [];\n      vm.data = {\n         availableOptions: [\n             {id: 1 , name: 'Dropdown'},\n             {id: 2 , name: 'Completamento'},\n             {id: 3 , name: 'Trova lintruso'},\n             {id: 4 , name: 'Riordina la parola'},\n             {id: 5 , name: 'Riordina le frasi'},\n             {id: 6 , name: 'Connetti immagine/frase'},\n             {id: 7 , name: 'Connetti frase/frase'},\n             {id: 8 , name: 'Vero o Falso'},\n             {id: 9 , name: 'Memory'},\n             {id: 10, name: 'Dialogo'},\n             {id: 11, name: 'Reading'}\n          ]\n      };\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.uploadAudioFile = function($files){\n        if($files){\n          vm.form.files_audio = $files;\n        }\n      };\n\n      vm.uploadImageTipFile = function($file){\n        if($file){\n          vm.form.image_tip = $file;\n          vm.form.exercise_tips_image_filename = $file.name;\n        }\n      }\n\n      vm.createFilesAudio = function(){\n       if(!vm.form.exercise_audio_items){\n         vm.form.exercise_audio_items = [];\n       }\n       angular.forEach(vm.form.files_audio, function(item){\n         if(item && item.name && !item._destroy){\n          item.file_name = item.name;\n           var promise = units\n                 .uploadFileAudioExerciseDialogue(vm.form.id, { filename: item.name, type: item.type })\n                 .then(function(res) {\n                    item.audio_url = res.audio_url;\n                    return units.uploadFileS3(res.upload_url, item.type, item)\n                  })\n                  .then(function(){\n                    var audio = {};\n                    audio.id = item.id_temp;\n                    audio.audio_url = item.audio_url;\n                    audio.audio_filename = item.file_name;\n                    vm.form.exercise_audio_items.push(audio);\n                  });\n           uploadAudioPromises.push(promise);\n         }\n       });\n      }\n\n\n      vm.submitImageTip = function(id){\n        var exercise_tips_image_url = \"\";\n        var exercise_tips_image_filename = \"\";\n        return units\n          .uploadImageTipExercise(id, { filename: vm.form.image_tip.name, type: vm.form.image_tip.type })\n          .then(function(res) {\n            exercise_tips_image_filename = res.exercise_tips_image_filename;\n            exercise_tips_image_url = res.exercise_tips_image_url;\n            return units.uploadFileS3(res.upload_url, vm.form.image_tip.type, vm.form.image_tip)\n          })\n          .then(function(){\n            vm.form.exercise_tips_image_url = exercise_tips_image_url;\n            vm.form.exercise_tips_image_filename = exercise_tips_image_filename;\n            vm.model.exercise_tips_image_url = exercise_tips_image_url;\n            vm.model.exercise_tips_image_filename = exercise_tips_image_filename;\n            delete vm.form.image_tip;\n          });\n      }\n\n\n      vm.submit = function () {\n          vm.setLoading();\n\n          vm.form.exercise_type = vm.exercise_type_temp.id;\n\n          if(vm.exercise_text_text_items){\n            if(vm.form.exercise_image_text_items){\n              delete vm.form.exercise_image_text_items;\n            }\n            if(vm.form.exercise_text){\n              delete vm.form.exercise_text;\n            }\n            vm.form.exercise_text_text_items = angular.copy(vm.exercise_text_text_items);\n          }\n          else if(vm.exercise_image_text_items){\n            if(vm.form.exercise_text_text_items){\n              delete vm.form.exercise_text_text_items;\n            }\n            if(vm.form.exercise_text){\n              delete vm.form.exercise_text;\n            }\n            vm.form.exercise_image_text_items = angular.copy(vm.exercise_image_text_items);\n          }\n          else if(vm.exercise_text){\n            if(vm.form.exercise_image_text_items){\n              delete vm.exercise_image_text_items;\n            }\n            if(vm.form.exercise_text_text_items){\n              delete vm.form.exercise_text_text_items;\n            }\n            vm.form.exercise_text = angular.copy(vm.exercise_text);\n          }\n\n          var uploadPromises = [];\n          if(vm.form.exercise_image_text_items){\n              //se non ho ancora l'item.id devo fare prima una create\n              angular.forEach(vm.form.exercise_image_text_items, function(item){\n                  if(!item.id){\n                    var item_temp = {\n                        'item_number': item.item_number,\n                        'image_url': '',\n                        'image_filename': '',\n                        'text_en': item.text_en,\n                        'audio_url': '',\n                        'audio_filename': ''\n                    };\n\n                    if(item.image && item.image.file){\n                      item_temp.image_filename  = item.image.file.name;\n                    }\n\n                    if(item.audio && item.audio.file){\n                      item_temp.audio_filename  = item.audio.file.name;\n                    }\n\n                  var promise = units\n                      .createExerciseImage(vm.form.id, {'exercise_image_text_item': item_temp})\n                      .then(function(res){\n                        item.id = res.exercise_image_text_item.id;\n                      })\n                  uploadPromises.push(promise);\n                }\n              });\n          }\n\n\n          return $q\n          .all(uploadPromises)\n          .then(function(){\n            if(vm.form.image_tip && vm.form.image_tip.name){\n              return vm.submitImageTip(vm.form.id);\n            }\n          })\n          .then(function(){\n            if(vm.form.files_audio && vm.form.files_audio.length > 0){\n              vm.createFilesAudio();\n              return $q.all(uploadAudioPromises)\n            }\n          })\n          .then(function(){\n            return units.updateExercise(vm.form.id,  {'exercise':vm.form})\n            })\n          .then(function(res){\n            var flag = true;\n            angular.forEach(vm.currentsection, function(value, key) {\n              if(flag && res.exercise.id == value.id){\n                vm.currentsection[key] = angular.copy(res.exercise);\n                flag = false;\n              }\n            });\n            return res;\n          })\n          .finally(function(){\n            $timeout(function () {\n              vm.unsetLoading();\n              angular.element(vm.currenttab).tab('show');\n            }, 100);\n          });\n      }\n\n      vm.destroy = function() {\n        $uibModal.open({\n            templateUrl: 'app/components/exercise/destroy/destroy.html',\n            controller: 'ExerciseDestroyController',\n            controllerAs: 'exerciseDestroy',\n            windowClass: 'modal-default'\n          }).result\n          .then(function (res) {\n            vm.setLoading();\n            if(res === true){\n              return units\n                  .destroyExercise(vm.form)\n                  .then(function(){\n                    angular.forEach(vm.currentsection, function(value, key) {\n                      if(vm.form.id == value.id){\n                        vm.currentsection.splice(key,1);\n                        return;\n                      }\n                    });\n                  })\n            }\n          })\n          .finally(function(){\n            $timeout(function () {\n              vm.unsetLoading();\n              if(vm.section === 'UnitSectionD'){\n                angular.element(\"#sectionD .tab-pane\").removeClass('active in');\n                angular.element(\"#sectionD #info-tab-d\").addClass('active in');\n              }\n              else if(vm.section === 'UnitSectionE'){\n                angular.element(\"#sectionE .tab-pane\").removeClass('active in');\n                angular.element(\"#sectionE #info-tab-e\").addClass('active in');\n              }\n              angular.element(vm.tabinfo).tab('show');\n            }, 100);\n          });\n      }\n\n      vm.removeFile = function(file, index){\n            if(file.id && vm.model.exercise_audio_items){\n              angular.forEach(vm.model.exercise_audio_items, function(el, key){\n                if(el.id == file.id){\n                  el._destroy = true;\n                  vm.model.exercise_audio_items[key]._destroy = true;\n                }\n              })\n            }else{\n                 vm.form.files_audio.splice(index, 1);\n            }\n        }\n\n      $scope.dynamicPopover = {\n          templateUrl: 'app/components/sectionB/infoPopoverTemplate.html'\n      };\n\n\n\n      vm.removeFileCreated = function(){\n        vm.model.exercise_tips_image_filename = \"\";\n        vm.model.exercise_tips_image_url = \"\";\n        vm.form.exercise_tips_image_filename = \"\";\n        vm.form.exercise_tips_image_url = \"\";\n      }\n\n      vm.removeFileTemp= function(){\n        vm.form.image_tip = \"\";\n      }\n\n      $scope.$watch('exerciseShow.model', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n            vm.form = angular.copy(vm.model);\n        }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('ExerciseDestroyController', ExerciseDestroyController);\n\n  /** @ngInject */\n  function ExerciseDestroyController($uibModalInstance) {\n    var vm = this;\n\n    vm.ok = function () {\n      $uibModalInstance.close(true);\n    }\n\n    vm.cancel = function () {\n      $uibModalInstance.dismiss();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('UserController', UserController);\n\n  /** @ngInject */\n  function UserController(models, users) {\n    var vm = this;\n    vm.models = models;\n\n    vm.users = users;\n\n    users\n      .showUsers();\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('UnitController', UnitController);\n\n  /** @ngInject */\n  function UnitController(models, units, $stateParams) {\n    var vm = this;\n    vm.models = models;\n\n    units.show($stateParams.id)\n          .then(function(res){\n            units.getSectionA(res.unit.unit_section_a.id);\n            units.getSectionB(res.unit.unit_section_b.id);\n            units.getSectionC(res.unit.unit_section_c.id);\n            units.getSectionD(res.unit.unit_section_d.id);\n            units.getSectionE(res.unit.unit_section_e.id);\n          });\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('ProfileController', ProfileController);\n\n  /** @ngInject */\n  function ProfileController(models) {\n    var vm = this;\n    vm.models = models;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('LoginController', LoginController);\n\n  /** @ngInject */\n  function LoginController(users, $state, galoreApi, errorManager, toastr) {\n    var vm = this;\n\n    vm.user = vm.user || {};\n\n    // Login with username and password\n    vm.login = function () {\n      galoreApi\n        .login(vm.user)\n        .then(function (res) {\n          if(res.role != 'admin'){\n            toastr.error('Non hai i privilegi di amministratore', 'Errore');\n            return;\n          }else{\n            $state.go('main.admin.dashboard');\n          }\n        })\n        .catch(errorManager);\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('GlossaryController', GlossaryController)\n\n  /** @ngInject */\n  function GlossaryController(models, glossary, $q, $scope, toastr, units) {\n    var vm = this;\n    vm.models = models;\n    var uploadPromises = [];\n\n    vm.setLoading = function (res) {\n      vm.loading = true;\n      return $q.resolve(res);\n    }\n\n    vm.unsetLoading = function (res) {\n      vm.loading = false;\n      return $q.resolve(res);\n    }\n\n    vm.uploadFiles = function(){\n      uploadPromises = [];\n\n      angular.forEach(vm.glossary_items[0].glossary_items, function(item){\n        if(item && item.file_audio && item.file_audio.name){\n          var promise = glossary\n                .uploadFileGlossary({ filename: item.file_audio.name, type: item.file_audio.type })\n                .then(function(res) {\n                   item.audio_url_temp = res.audio_url;\n                   return units.uploadFileS3(res.upload_url, item.file_audio.type, item.file_audio)\n                 })\n                 .then(function(){\n                   item.audio_url = item.audio_url_temp;\n                   item.audio_filename_temp = item.file_audio.name;\n                   delete item.file_audio;\n                   return glossary.updateFileGlossary({'glossary_audio_item':{audio_url: item.audio_url_temp, audio_filename: item.audio_filename_temp}})\n                 })\n                 .then(function(){\n                   item.audio_filename = item.audio_filename_temp;\n                   delete item.audio_filename_temp;\n                   delete item.audio_url_temp;\n                   item.audio_present = true;\n                 })\n          uploadPromises.push(promise);\n        }\n      });\n     }\n\n    vm.setLoading()\n      .then(glossary.showGlossary)\n      .then(function(){\n        vm.glossary_items = angular.copy(vm.models.glossary_items);\n        vm.page = vm.glossary_items[0].pagination.current_page;\n      })\n      .finally(vm.unsetLoading);\n\n\n    vm.addRow = function(){\n      if(!vm.form){\n        return;\n      }\n      if(!vm.glossary_items){\n          vm.glossary_items = [];\n      }\n      var newRow = angular.copy(vm.form);\n      newRow.file_audio = vm.file_audio;\n      vm.glossary_items[0].glossary_items.unshift(newRow);\n      vm.form.trad_en = \"\";\n      vm.form.desc_en = \"\";\n      vm.form.trad_it = \"\";\n      vm.form.desc_it = \"\";\n      vm.form.audio_filename = \"\";\n      vm.file_audio = \"\";\n    }\n\n    vm.destroy = function(el){\n      if(el.id){\n        el._destroy=true\n      }else{\n        var index = vm.glossary_items[0].glossary_items.indexOf(el);\n        vm.glossary_items[0].glossary_items.splice(index, 1);\n      }\n\n    }\n\n    vm.playAudio = function(url){\n      var audio = new Audio(url);\n      audio.play();\n    }\n\n    vm.uploadAudioFile = function($file){\n      vm.file_audio = $file;\n    };\n\n    vm.uploadAudioFileTemp = function($file, id){\n      angular.forEach(vm.glossary_items[0].glossary_items, function(el){\n            if(el.id == id){\n              el.file_audio = $file;\n            }\n          });\n    };\n\n    vm.submit = function(){\n      vm.setLoading()\n        .then(function(){\n          vm.uploadFiles();\n          return $q\n          .all(uploadPromises)\n        })\n        .then(function(){\n          vm.glossary_items_temp = angular.copy(vm.glossary_items);\n          return glossary.saveGlossary({'glossary_items': vm.glossary_items_temp[0].glossary_items});\n        })\n        .then(function(){\n          vm.glossary_items = angular.copy(vm.models.glossary_items);\n        })\n        .finally(vm.unsetLoading);\n    }\n\n    $scope.$watch('vm.page', function(newValues, oldValues){\n      if (newValues === oldValues) {\n        return;\n      }\n     vm.setLoading()\n         .then(function(){\n            return glossary.getGlossaryPage(newValues)\n          })\n         .then(function(){\n           vm.glossary_items = [];\n           vm.glossary_items = angular.copy(vm.models.glossary_items);\n         })\n      .finally(vm.unsetLoading);\n    });\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('FaqController', FaqController)\n\n  /** @ngInject */\n  function FaqController(models, faq, $q, $scope, toastr) {\n    var vm = this;\n    vm.models = models;\n\n    vm.setLoading = function (res) {\n      vm.loading = true;\n      return $q.resolve(res);\n    }\n\n    vm.unsetLoading = function (res) {\n      vm.loading = false;\n      return $q.resolve(res);\n    }\n\n    vm.setLoading()\n      .then(faq.showFaqCategories)\n      .then(faq.showFaq)\n      .then(function(){\n        vm.faqs = angular.copy(vm.models.faqs);\n        angular.forEach(vm.faqs, function(el){\n          angular.forEach(vm.models.faq_categories, function(val){\n            if(val.id == el.faq_category_id){\n              el.category_temp = {'id': val.id, 'title': val.title};\n              return;\n            }\n          });\n        });\n      })\n      .finally(vm.unsetLoading);\n\n\n    vm.addRow = function(){\n      if(!vm.form){\n        return;\n      }\n      if(!vm.form.category_type){\n        toastr.error('Assegna una categoria', 'Error');\n        return;\n      }\n      if(!vm.faqs){\n          vm.faqs = [];\n      }\n      var newRow = angular.copy(vm.form);\n      newRow.category_temp = angular.copy(newRow.category_type);\n      vm.faqs.push(newRow);\n      vm.form.faq_number = \"\";\n      vm.form.question = \"\";\n      vm.form.answer = \"\";\n      vm.form.category_type = vm.models.faq_categories[0];\n\n      vm.submit();\n    }\n\n    vm.destroy = function(el){\n      if(!el.id){\n      var index = vm.faqs.indexOf(el);\n       vm.faqs.splice(index, 1);\n      }else{\n        el._destroy = true;\n      }\n    }\n\n    vm.submit = function(){\n      vm.setLoading()\n        .then(function(){\n          vm.faqs_temp = angular.copy(vm.faqs);\n          angular.forEach(vm.faqs_temp, function(el){\n            if(el.category_type){\n              el.faq_category_id = el.category_type.id;\n              delete el.category_type;\n              delete el.category_temp;\n            }\n          });\n          return faq.saveFaq({'faqs': vm.faqs_temp});\n        })\n        .then(function(){\n          vm.faqs = angular.copy(vm.models.faqs);\n          angular.forEach(vm.faqs, function(el){\n            angular.forEach(vm.models.faq_categories, function(val){\n              if(val.id == el.faq_category_id){\n                el.category_temp = {'id': val.id, 'title': val.title};\n                return;\n              }\n            });\n          });\n        })\n        .finally(vm.unsetLoading);\n\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('DashboardController', DashboardController);\n\n  /** @ngInject */\n  function DashboardController(models) {\n    var vm = this;\n    vm.models = models;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('CreateUnitController', CreateUnitController)\n    .filter('range', RangeFilter);\n\n  /** @ngInject */\n  function CreateUnitController(models) {\n    var vm = this;\n    vm.models = models;\n  }\n\n  function RangeFilter(){\n    return function(input, min, max) {\n        min = parseInt(min);\n        max = parseInt(max);\n        for (var i=min; i<max; i++)\n          input.push(i);\n        return input;\n      };\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('AdminController', AdminController)\n\n  /** @ngInject */\n  function AdminController(models, loggedIn) {\n    var vm = this;\n\n    vm.loggedIn = loggedIn;\n    vm.models = models;\n  }\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * UI state service.\n   * Keep application-wide shared variables\n   */\n  .factory('utils', function () {\n    var idCount = 0;\n\n    var utils = {\n\n      nextId: function(){\n        return idCount++;\n      },\n      /**\n       * Find the first occurrence of an object (given an 'id' field) in an array\n       */\n      findFirst: function(array,id) {\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].id === id){\n            return array[i];\n          }\n        }\n        return null;\n      },\n\n      /**\n       * Find the first occurrence of an object (given a 'name' field) in an array\n       */\n      findFirstByName: function(array,name) {\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].name === name){\n            return array[i];\n          }\n        }\n        return null;\n      },\n\n      /**\n      * Remove the first occurence of a an object (given an 'id' field) in an array\n      */\n      removeFirst: function (array, id) {\n        var found = false;\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].id === id){\n            found = i;\n            break;\n          }\n        }\n        array.splice(found,1);\n      },\n\n      /**\n       * Sort given array by 'order' key\n       */\n      sortByOrder: function(array) {\n        if(angular.isArray(array)){\n          return array.sort(function(a,b) {\n            if(a.order > b.order){\n              return 1;\n            }\n            if(a.order < b.order){\n              return -1;\n            }\n            return 0;\n          });\n        }\n        return array;\n      },\n\n      /**\n       * Try to merge elem to a target object with the same id in array\n       * If the target doesn't exist, push elem in the array\n       */\n      mergeOrPush: function(array,elem) {\n        var added = utils.merge(array, elem);\n        if(!added){\n          added = elem;\n          array.push(added);\n        }\n        return added;\n      },\n\n      /**\n       * Merge elem to a target object with the same id in array\n       * If the target doesn't exist, return null\n       */\n      merge: function(array, elem) {\n        var found = utils.findFirst(array, elem.id);\n        if(found){\n          angular.merge(found, elem);\n        }\n        return found;\n      }\n    };\n\n    return utils;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('file', file);\n\n  /** @ngInject */\n  function file() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/uploadFile/uploadFile.html',\n      link: UploadFileLink,\n      scope:{\n        model: '='\n      }\n    };\n\n    return directive;\n\n\n    function UploadFileLink(scope, el) {\n      el.bind('change', function(event){\n          var files = event.target.files;\n          var file = files[0];\n          scope.model.file = file;\n          scope.$apply();\n        });\n    }\n\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * UI state service.\n   * Keep application-wide shared variables\n   */\n  .factory('uiState', function () {\n    var uiState = {};\n\n    return uiState;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('toggleSwitch', toggleSwitch);\n\n  /** @ngInject */\n  function toggleSwitch() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/toggleSwitch/toggleSwitch.html',\n      controller: ToggleSwitchController,\n      controllerAs: 'toggleSwitch',\n      bindToController: true,\n      scope:{\n        model: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function ToggleSwitchController(models, units){\n      var vm = this;\n      vm.models = models;\n\n      vm.publish = function(){\n        units\n          .publishUnit(vm.model.id)\n          .then(function(){\n            angular.forEach(vm.models.levels, function(el){\n                angular.forEach(el.units, function(val){\n                  if(val.id == vm.model.id){\n                    val.published = true;\n                  }\n                })\n            })\n            angular.element(\"#\" + vm.model.id).addClass('title-pubblicata');\n            angular.element(\"#\" + vm.model.id + ' > i').addClass('title-pubblicata');\n            vm.models.current_unit.published = true;\n            vm.model.published = true;\n          });\n      }\n\n      vm.unpublish = function(){\n        units\n        .unpublishUnit(vm.model.id)\n        .then(function(){\n          angular.forEach(vm.models.levels, function(el){\n              angular.forEach(el.units, function(val){\n                if(val.id == vm.model.id){\n                  val.published = false;\n                }\n              })\n          })\n          angular.element(\"#\" + vm.model.id).removeClass('title-pubblicata');\n          angular.element(\"#\" + vm.model.id + ' > i').removeClass('title-pubblicata');\n          vm.models.current_unit.published = false;\n          vm.model.published = false;\n        });\n      }\n    }\n  }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabVideo', tabVideo);\n\n    /** @ngInject */\n    function tabVideo(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabVideo/tabVideo.html',\n        controller: TabVideoController,\n        controllerAs: 'tabVideo',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function TabVideoController(models, $scope) {\n        var vm = this;\n        vm.models = models;\n\n\n        vm.uploadVideoFile = function($file){\n          if($file){\n            vm.model.video = $file;\n            vm.model.video_filename = $file.name;\n          }\n        };\n\n\n        vm.uploadImageTipFile = function($file){\n          if($file){\n            vm.model.image_tip = $file;\n            vm.model.video_tips_image_filename = $file.name;\n          }\n        };\n\n        vm.removeFileCreated = function(){\n          vm.model.video_tips_image_filename = \"\";\n          vm.model.video_tips_image_url = \"\";\n        }\n\n        vm.removeFileTemp= function(){\n          vm.model.image_tip = \"\";\n        }\n\n        $scope.$watch('tabVideo.model', function (newVal, oldVal) {\n            if(newVal !== oldVal) {\n              vm.model.video = {};\n            }\n        });\n      }\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabTheoryInDepth', tabTheoryInDepth);\n\n    /** @ngInject */\n    function tabTheoryInDepth(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabTheoryInDepth/tabTheoryInDepth.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabTheory', tabTheory);\n\n    /** @ngInject */\n    function tabTheory(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabTheory/tabTheory.html',\n        controller: TabTheoryController,\n        controllerAs: 'tabTheory',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function TabTheoryController(models) {\n\n        var vm = this;\n        vm.models = models;\n\n        vm.removeFileCreated = function(){\n          vm.model.theory_image_filename = \"\";\n          vm.model.theory_image_url = \"\";\n        }\n\n        vm.removeFileTemp= function(){\n          vm.model.image_theory = \"\";\n        }\n\n        vm.removeVideoCreated = function(){\n          vm.model.video_filename = \"\";\n          vm.model.video_url = \"\";\n        }\n\n        vm.removeVideoTemp= function(){\n          vm.model.video = \"\";\n        }\n\n        vm.removeTipFileCreated = function(){\n          vm.model.theory_text_tips_image_filename = \"\";\n          vm.model.theory_text_tips_image_url = \"\";\n        }\n\n        vm.removeTipFileTemp= function(){\n          vm.model.image_tip_theory = \"\";\n        }\n\n        vm.uploadImageTipFile = function($file){\n          if($file){\n            vm.model.image_tip_theory = $file;\n            vm.model.theory_text_tips_image_filename = $file.name;\n          }\n        }\n\n        vm.uploadImageFile = function($file){\n          if($file){\n            vm.model.image_theory = $file;\n            vm.model.theory_image_upload = $file.name;\n          }\n        }\n\n        vm.uploadVideoFile = function($file){\n          if($file){\n            vm.model.video = $file;\n            vm.model.video_filename = $file.name;\n          }\n        };\n      }\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabInfoSection', tabInfoSection);\n\n    /** @ngInject */\n    function tabInfoSection(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabInfoSection/tabInfoSection.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabDialogue', tabDialogue);\n\n    /** @ngInject */\n    function tabDialogue(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabDialogue/tabDialogue.html',\n        controller: TabDialogueController,\n        controllerAs: 'tabDialogue',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function TabDialogueController($scope, models) {\n        var vm = this;\n        vm.models = models;\n\n        vm.uploadImageTipFile = function($file){\n          if($file){\n            vm.model.image_tip = $file;\n            vm.model.dialogue_tips_image_filename = $file.name;\n          }\n        };\n\n        vm.uploadAudioFile = function($files){\n          if($files){\n            vm.model.files_audio = $files;\n          }\n        };\n\n        vm.removeFileCreated = function(){\n          vm.model.dialogue_tips_image_filename = \"\";\n          vm.model.dialogue_tips_image_url = \"\";\n        }\n\n        vm.removeFileTemp= function(){\n          vm.model.image_tip = \"\";\n        }\n\n        vm.removeFile = function(file, index){\n            if(file.id && vm.model.audio_items){\n              angular.forEach(vm.model.audio_items, function(el, key){\n                if(el.id == file.id){\n                  el._destroy = true;\n                  vm.model.audio_items_temp[key]._destroy = true;\n                }\n              })\n            }else{\n                 vm.model.files_audio.splice(index, 1);\n            }\n        }\n\n        $scope.dynamicPopover = {\n            templateUrl: 'app/components/sectionB/infoPopoverTemplate.html'\n          };\n\n          $scope.$watch('tabDialogue.model.audio_items', function (newVal, oldVal) {\n            if(newVal !== oldVal) {\n              vm.model.audio_items_temp = angular.copy(vm.model.audio_items);\n            }\n          });\n      }\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('showOnHover', showOnHover);\n\n  /** @ngInject */\n  function showOnHover() {\n    var directive = {\n      restrict: 'A',\n      link: linkFunc,\n      scope: {\n        showOnHover: '@',\n        showAnimate: '='\n      }\n    };\n\n    return directive;\n\n    function linkFunc(scope, el) {\n      var visible = false;\n      var target = angular.element(scope.showOnHover);\n\n      scope.$watch('showOnHover', function () {\n        target.removeClass('show-on-hover-target').removeClass('not-visible').removeClass('show-animate');\n        target = angular.element(scope.showOnHover);\n        target.addClass('show-on-hover-target');\n        if(scope.showAnimate){\n          target.addClass('show-animate');\n        }\n        scope.updateVisibility();\n      })\n\n      scope.updateVisibility = function () {\n        if(visible){\n          target.removeClass('not-visible');\n        }\n        else{\n          target.addClass('not-visible');\n        }\n      }\n\n      el.hover(function() {\n          if(!visible){\n            visible = true;\n            scope.updateVisibility();\n          }\n        },\n        function() {\n          if(visible){\n            visible = false;\n            scope.updateVisibility();\n          }\n        }\n      );\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionUnit', sectionUnit);\n\n  /** @ngInject */\n  function sectionUnit() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionUnit/sectionUnit.html',\n      controller: SectionUnitController,\n      controllerAs: 'sectionUnit',\n      bindToController: true,\n      scope: {\n        unit: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionUnitController(models, $state, units, $q, $scope, $http, $uibModal) {\n      var vm = this;\n      vm.models = models;\n\n      vm.setLoading = function () {\n        vm.loading = true;\n        return $q.resolve();\n      }\n\n      vm.unsetLoading = function () {\n        vm.loading = false;\n        return $q.resolve();\n      }\n\n      vm.submit = function (id) {\n        return vm.setLoading()\n        .then(function(){\n          return units.update(id, {'unit': vm.form});\n        })\n        .finally(vm.unsetLoading);\n      }\n\n      vm.destroy = function() {\n        $uibModal.open({\n            templateUrl: 'app/pages/unit/destroy/destroy.html',\n            controller: 'UnitDestroyController',\n            controllerAs: 'unitDestroy',\n            windowClass: 'modal-default'\n          }).result\n          .then(function (res) {\n            if(res === true){\n              return units.destroyUnit(vm.form);\n            }\n          })\n          .then($state.go('main.admin.dashboard'))\n      }\n\n      vm.animationsEnabled = true;\n\n      $scope.$watch('sectionUnit.unit', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n          vm.form = angular.copy(vm.models.current_unit);\n        }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionE', sectionE);\n\n  /** @ngInject */\n  function sectionE() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionE/sectionE.html',\n      controller: SectionEController,\n      controllerAs: 'sectionE',\n      bindToController: true,\n      scope:{\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionEController(models, $state, units, $q, $scope) {\n      var vm = this;\n      vm.models = models;\n\n      vm.activeTabIndex = 0\n      vm.tabs = [];\n\n      vm.changeStatusSection = function(){\n        if(vm.form.active == true){\n          vm.form.active = false;\n        }else{\n          vm.form.active = true;\n        }\n        vm.submit();\n      }\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submit = function () {\n        return vm.setLoading()\n          .then(units.updateSection('e',vm.form.id,{'unit_section_e': vm.form}))\n          .finally(vm.unsetLoading);\n      }\n\n      vm.getExercises = function(isCollapsed){\n        if(isCollapsed){\n          return vm.setLoading()\n           .then(units.getExercises('e', vm.form.id))\n           .finally(vm.unsetLoading);\n        }\n      }\n\n      $scope.$watch('sectionE.section', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n          vm.form = angular.copy(vm.section);\n        }\n      });\n\n      $scope.$watch('sectionE.models.current_unit_sections_e_exercises.exercises', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n            vm.models.current_unit_sections_e_exercises.exercises = newVal;\n        }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionD', sectionD);\n\n  /** @ngInject */\n  function sectionD() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionD/sectionD.html',\n      controller: SectionDController,\n      controllerAs: 'sectionD',\n      bindToController: true,\n      scope: {\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionDController(models, $state, units, $q, $scope, toastr) {\n      var vm = this;\n      vm.models = models;\n\n      vm.changeStatusSection = function(){\n        if(vm.form.active == true){\n          vm.form.active = false;\n        }else{\n          vm.form.active = true;\n        }\n        vm.submit();\n      }\n\n      vm.setLoading = function () {\n        vm.loading = true;\n        return $q.resolve();\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.getExercises = function(isCollapsed){\n        if(isCollapsed && vm.form){\n         return vm.setLoading()\n          .then(units.getExercises('d', vm.form.id))\n          .finally(vm.unsetLoading);\n        }\n      }\n\n      vm.submitUpload = function(id){\n        var video_url = \"\";\n        var video_filename = \"\";\n        return units\n          .uploadVideo('d', id, { filename: vm.form.video.name, type: vm.form.video.type })\n          .then(function(res) {\n            video_filename = res.video_filename;\n            video_url = res.video_url;\n            return units.uploadFileS3(res.upload_url, vm.form.video.type, vm.form.video)\n          })\n          .then(function(){\n            vm.form.video_url = video_url;\n            vm.section.video_url = video_url;\n            vm.form.video_filename = video_filename;\n            vm.section.video_filename = video_filename;\n            delete vm.form.video;\n          });\n      }\n\n      vm.submitImageTheory = function(id){\n        var theory_image_url = \"\";\n        var theory_image_filename = \"\";\n        return units\n          .uploadImageTheory('d', id, { filename: vm.form.image_theory.name, type: vm.form.image_theory.type })\n          .then(function(res) {\n            theory_image_filename = res.theory_image_filename;\n            theory_image_url = res.theory_image_url;\n            return units.uploadFileS3(res.upload_url, vm.form.image_theory.type, vm.form.image_theory)\n          })\n          .then(function(){\n            vm.form.theory_image_url = theory_image_url;\n            vm.form.theory_image_filename = theory_image_filename;\n            vm.section.theory_image_url = theory_image_url;\n            vm.section.theory_image_filename = theory_image_filename;\n            delete vm.form.image_theory;\n          });\n      }\n\n      vm.submitImageTip = function(id){\n        var video_tips_image_url = \"\";\n        var video_tips_image_filename = \"\";\n        return units\n          .uploadImageTip('d', id, 'video_tips_image_upload', { filename: vm.form.image_tip.name, type: vm.form.image_tip.type })\n          .then(function(res) {\n            video_tips_image_filename = res.video_tips_image_filename;\n            video_tips_image_url = res.video_tips_image_url;\n            return units.uploadFileS3(res.upload_url, vm.form.image_tip.type, vm.form.image_tip)\n          })\n          .then(function(){\n            vm.form.video_tips_image_url = video_tips_image_url;\n            vm.form.video_tips_image_filename = video_tips_image_filename;\n            vm.section.video_tips_image_url = video_tips_image_url;\n            vm.section.video_tips_image_filename = video_tips_image_filename;\n            delete vm.form.image_tip;\n          });\n      }\n\n      vm.submitImageTheoryTip = function(id){\n        var theory_text_tips_image_url = \"\";\n        var theory_text_tips_image_filename = \"\";\n        return units\n          .uploadImageTip('d', id, 'theory_text_tips_image_upload', { filename: vm.form.image_tip_theory.name, type: vm.form.image_tip_theory.type })\n          .then(function(res) {\n            theory_text_tips_image_filename = res.theory_text_tips_image_filename;\n            theory_text_tips_image_url = res.theory_text_tips_image_url;\n            return units.uploadFileS3(res.upload_url, vm.form.image_tip_theory.type, vm.form.image_tip_theory)\n          })\n          .then(function(){\n            vm.form.theory_text_tips_image_url = theory_text_tips_image_url;\n            vm.form.theory_text_tips_image_filename = theory_text_tips_image_filename;\n            vm.section.theory_text_tips_image_url = theory_text_tips_image_url;\n            vm.section.theory_text_tips_image_filename = theory_text_tips_image_filename;\n            delete vm.form.image_tip_theory;\n          });\n      }\n\n      vm.submitSection = function(id){\n        return units.updateSection('d',id,{'unit_section_d': vm.form});\n      }\n\n      vm.submit = function () {\n        if(!vm.form.theory_title){\n          toastr.error('Inserire il titolo della teoria', 'Errore');\n          return;\n        }\n        if(!vm.form.theory_text){\n          toastr.error('Inserire il testo della teoria', 'Errore');\n          return;\n        }\n\n        return vm.setLoading()\n          .then(function(){\n            if(vm.form.video && vm.form.video.name){\n              return vm.submitUpload(vm.section.id);\n            }\n          })\n          .then(function(){\n            if(vm.form.image_tip && vm.form.image_tip.name){\n              return vm.submitImageTip(vm.section.id);\n            }\n          })\n          .then(function(){\n            if(vm.form.image_theory && vm.form.image_theory.name){\n              return vm.submitImageTheory(vm.section.id);\n            }\n          })\n          .then(function(){\n            if(vm.form.image_tip_theory && vm.form.image_tip_theory.name){\n              return vm.submitImageTheoryTip(vm.section.id);\n            }\n          })\n          .then(function(){\n            return vm.submitSection(vm.section.id);\n          })\n          .finally(vm.unsetLoading);\n      }\n\n      vm.removeVideo = function(){\n        vm.form.video_url = \"\";\n        vm.form.video = null;\n      }\n\n      $scope.$watch('sectionD.section', function (newVal, oldVal) {\n          if(newVal !== oldVal) {\n            vm.form = angular.copy(vm.section);\n          }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionC', sectionC);\n\n  /** @ngInject */\n  function sectionC() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionC/sectionC.html',\n      controller: SectionCController,\n      controllerAs: 'sectionC',\n      bindToController: true,\n      scope:{\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionCController(models, $state, units, $q, $scope, utils) {\n      var vm = this;\n      vm.models = models;\n\n      vm.counterC = utils.nextId();\n\n      vm.activeTabIndex = 0;\n\n      vm.changeStatusSection = function(){\n        if(vm.form.active == true){\n          vm.form.active = false;\n        }else{\n          vm.form.active = true;\n        }\n        vm.submit();\n      }\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submit = function () {\n        return vm.setLoading()\n          .then(units.updateSection('c',vm.form.id,{'unit_section_c': vm.form}))\n          .finally(vm.unsetLoading);\n      }\n\n      vm.getExercises = function(isCollapsed){\n        if(isCollapsed){\n         return vm.setLoading()\n          .then(function(){\n            return units.getExercises('c', vm.form.id)\n          })\n          .then(function(res){\n            vm.form.current_unit_sections_c_exercises = [];\n            vm.form.current_unit_sections_c_exercises.exercises = angular.copy(res.exercises);\n          })\n          .finally(vm.unsetLoading);\n        }\n      }\n\n      $scope.$watch('sectionC.section', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n          vm.form = angular.copy(vm.section);\n        }\n      });\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionB', sectionB);\n\n  /** @ngInject */\n  function sectionB() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionB/sectionB.html',\n      controller: SectionBController,\n      controllerAs: 'sectionB',\n      bindToController: true,\n      scope:{\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionBController(models, $state, units, $q, $scope, toastr) {\n      var vm = this;\n      vm.models = models;\n      var uploadPromises = [];\n\n      vm.changeStatusSection = function(){\n          if(vm.form.active == true){\n            vm.form.active = false;\n          }else{\n            vm.form.active = true;\n          }\n          vm.submit();\n      }\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n       vm.createFilesAudio = function(){\n        if(!vm.form.audio_items){\n          vm.form.audio_items = [];\n        }\n        angular.forEach(vm.form.files_audio, function(item){\n          if(item && item.name && !item._destroy){\n            var promise = units\n              .createFileAudio(vm.section.id, {'audio_item':{\n                'audio_url': \"\",\n                'audio_filename': item.name\n              }})\n              .then(function(res){\n                item.id_temp = res.audio_item.id;\n                item.file_name = res.audio_item.audio_filename;\n                return units\n                  .uploadFileAudio(vm.section.id, res.audio_item.id, { filename: item.name, type: item.type })\n                  .then(function(res) {\n                     item.audio_url = res.audio_url;\n                     return units.uploadFileS3(res.upload_url, item.type, item)\n                   })\n                   .then(function(){\n                     var audio = {};\n                     audio.id = item.id_temp;\n                     audio.audio_url = item.audio_url;\n                     audio.audio_filename = item.file_name;\n                     vm.form.audio_items.push(audio);\n                   });\n              });\n            uploadPromises.push(promise);\n          }\n        });\n       }\n\n      vm.submitImageTip = function(id){\n        var dialogue_tips_image_url = \"\";\n        var dialogue_tips_image_filename = \"\";\n        return units\n          .uploadImageTip('b', id, 'dialogue_tips_image_upload', { filename: vm.form.image_tip.name, type: vm.form.image_tip.type })\n          .then(function(res) {\n            dialogue_tips_image_filename = res.dialogue_tips_image_filename;\n            dialogue_tips_image_url = res.dialogue_tips_image_url;\n            return units.uploadFileS3(res.upload_url, vm.form.image_tip.type, vm.form.image_tip)\n          })\n          .then(function(){\n            vm.form.dialogue_tips_image_url = dialogue_tips_image_url;\n            vm.form.dialogue_tips_image_filename = dialogue_tips_image_filename;\n            vm.section.dialogue_tips_image_url = dialogue_tips_image_url;\n            vm.section.dialogue_tips_image_filename = dialogue_tips_image_filename;\n            delete vm.form.image_tip;\n          });\n      }\n\n      vm.submitSection = function(){\n        delete vm.form.audio_items_temp;\n        return units.updateSection('b',vm.form.id,{'unit_section_b': vm.form});\n      }\n\n      vm.submit = function () {\n        if(!vm.form.dialogue){\n          toastr.error('Inserire il dialogo', 'Errore');\n          return;\n        }\n        if((!vm.form.files_audio || vm.form.files_audio.length == 0)  && (!vm.form.audio_items || vm.form.audio_items.length == 0 )){\n          toastr.error('Caricare File Audio', 'Errore');\n          return;\n        }\n\n        return vm.setLoading()\n          .then(function(){\n            if(vm.form.image_tip && vm.form.image_tip.name){\n              return vm.submitImageTip(vm.section.id);\n            }\n          })\n          .then(function(){\n            if(vm.form.files_audio && vm.form.files_audio.length > 0){\n              vm.createFilesAudio();\n              return $q\n              .all(uploadPromises)\n            }\n          })\n          .then(function(){\n            delete vm.form.video;\n            delete vm.form.files_audio;\n            return vm.submitSection(vm.section.id);\n          })\n          .then(function(res){\n            vm.form.active = res.unit_section_b.active;\n            vm.form.audio_items = angular.copy(res.unit_section_b.audio_items);\n            uploadPromises = [];\n          })\n          .finally(vm.unsetLoading);\n      }\n\n      $scope.$watch('sectionB.section', function (newVal, oldVal) {\n        if(newVal !== oldVal) {\n          vm.form = angular.copy(vm.section);\n        }\n      });\n\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionA', sectionA);\n\n  /** @ngInject */\n  function sectionA() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionA/sectionA.html',\n      controller: SectionAController,\n      controllerAs: 'sectionA',\n      bindToController: true,\n      scope: {\n        section: '='\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionAController(models, $state, units, $q, $scope, toastr) {\n      var vm = this;\n      vm.models = models;\n\n      vm.setLoading = function () {\n        vm.loading = true;\n        return $q.resolve();\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submitUpload = function(id){\n        var video_url = \"\";\n        var video_filename = \"\";\n        return units\n          .uploadVideo('a', id, { filename: vm.form.video.name, type: vm.form.video.type })\n          .then(function(res) {\n            video_filename = res.video_filename;\n            video_url = res.video_url;\n            return units.uploadFileS3(res.upload_url, vm.form.video.type, vm.form.video)\n          })\n          .then(function(){\n            vm.form.video_url = video_url;\n            vm.form.video_filename = video_filename;\n            vm.section.video_url = video_url;\n            vm.section.video_filename = video_filename;\n            delete vm.form.video;\n          });\n      }\n\n      vm.submitImageTip = function(id){\n        var video_tips_image_url = \"\";\n        var video_tips_image_filename = \"\";\n        return units\n          .uploadImageTip('a', id, 'video_tips_image_upload', { filename: vm.form.image_tip.name, type: vm.form.image_tip.type })\n          .then(function(res) {\n            video_tips_image_filename = res.video_tips_image_filename;\n            video_tips_image_url = res.video_tips_image_url;\n            return units.uploadFileS3(res.upload_url, vm.form.image_tip.type, vm.form.image_tip)\n          })\n          .then(function(){\n            vm.form.video_tips_image_url = video_tips_image_url;\n            vm.form.video_tips_image_filename = video_tips_image_filename;\n            vm.section.video_tips_image_url = video_tips_image_url;\n            vm.section.video_tips_image_filename = video_tips_image_filename;\n          });\n      }\n\n      vm.submitSection = function(id){\n        return units.updateSection('a',id,{'unit_section_a': vm.form});\n      }\n\n      vm.submit = function () {\n        if(!vm.form.video.name && !vm.form.video_filename){\n           toastr.error('Caricare un video', 'Errore');\n           return;\n        }\n\n        return vm.setLoading()\n          .then(function(){\n            if(vm.form.video && vm.form.video.name){\n              return vm.submitUpload(vm.section.id);\n            }\n          })\n          .then(function(){\n            if(vm.form.image_tip && vm.form.image_tip.name){\n              return vm.submitImageTip(vm.section.id);\n            }\n          })\n          .then(function(){\n            delete vm.form.video;\n            delete vm.form.image_tip;\n            return vm.submitSection(vm.section.id);\n          })\n          .finally(vm.unsetLoading);\n      }\n\n      vm.removeVideo = function(){\n        vm.form.video_url = \"\";\n        $scope.file = null;\n      }\n\n      $scope.$watch('sectionA.section', function (newVal, oldVal) {\n          if(newVal !== oldVal) {\n            vm.form = angular.copy(vm.section);\n          }\n      });\n\n    }\n\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Response management pipeline.\n   * Utilities to process a response from the moment it arrives to the models update.\n   * To use in a promise chain as a pipeline\n   */\n  .factory('resPipe', function (longTermMemory, models, utils, $log) {\n    var resPipe = {\n\n      /**\n       * Parse the initial response\n       */\n      parseResponse: function(res) {\n        // Look for a valid model inside the response\n        for (var i = 0; i < helpers.validModels.length; i++) {\n          if(res[helpers.validModels[i]]){\n            res._model = helpers.validModels[i]; // Put the name of the model in res._model\n            break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Inject some default values inside the response\n       */\n      injectDefaults: function(res) {\n        // Parse the model depending of its nature\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'projects':\n            case 'project':\n              helpers.forEachModel(model, helpers.injectProjectDefaults);\n              break;\n            case 'user':\n              helpers.forEachModel(model, helpers.injectUserDefaults);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n      * Mark the model as to be reloaded. This allows the resPipe to delete it\n      * from cache (if present) and to add it again\n      */\n      markReload: function (res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, function (m) {\n          m._reload = true;\n        });\n        return res;\n      },\n\n\n      /**\n      * Mark the model as destroyed. This allows the resPipe to delete it\n      * from cache (if present)\n      */\n      markDestroyed: function (res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, function (m) {\n          m._destroyed = true;\n        });\n        return res;\n      },\n\n      /**\n       * Remove a unit from the model level\n       */\n      removeUnitFromLevels: function (unitId, levelId) {\n        if(!models.levels) return;\n\n        // Look for the right player\n        for (var i = 0; i < models.levels[levelId].units.length; i++) {\n          var curUnit = models.levels[levelId].units[i];\n          if(curUnit.id === unitId){\n            models.levels[levelId].units.splice(i,1);\n          }\n        }\n        return models.levels;\n      },\n\n      /**\n       * Sort frames and comments in projects\n       */\n      sortFramesAndComments: function(res) {\n        var model = helpers.fetchModel(res);\n        if(angular.isArray(model)){\n          angular.forEach(model, function(project) {\n            helpers.sortFramesAndCommentsSingle(project);\n          });\n        }\n        else if(model){\n          helpers.sortFramesAndCommentsSingle(model);\n        }\n        return res;\n      },\n\n      /**\n       * Sort frames in cache\n       */\n      sortFramesCache: function(res) {\n        var project = helpers.getRelatedProject(res);\n        if(project && project.frames){\n          utils.sortByOrder(project.frames);\n        }\n        return res;\n      },\n\n      /**\n       * Sort Comments given order\n       */\n      sortCommentsCache: function(res) {\n        var frame = helpers.getRelatedFrame(res);\n        if(frame && frame.comments){\n          utils.sortByOrder(frame.comments);\n        }\n        return res;\n      },\n\n      /**\n       * Update models cache\n       */\n      updateCache: function(res) {\n        var model = helpers.fetchModel(res);\n        var level = null;\n        if(model){\n          switch(res._model){\n            case 'levels':\n              res[res._model] = helpers.updateModelCache(models.levels, model);\n              break;\n            case 'faq_categories':\n              res[res._model] = helpers.updateModelCache(models.faq_categories, model);\n              break;\n            case 'faqs':\n              res[res._model] = helpers.updateModelCache(models.faqs, model);\n              break;\n            case 'glossary_items':\n              res[res._model] = helpers.updateModelCache(models.glossary_items, model);\n              break;\n            case 'users':\n              res[res._model] = helpers.updateModelCache(models.users, model);\n              break;\n            case 'unit':\n              level = helpers.getRelatedLevel(res);\n              res[res._model] = helpers.updateModelCache(level.units, model);\n              break;\n            case 'unit_section_a':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_a, model);\n              break;\n            case 'unit_section_b':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_b, model);\n              break;\n            case 'unit_section_c':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_c, model);\n              break;\n            case 'unit_section_d':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_d, model);\n              break;\n            case 'unit_section_e':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_e, model);\n              break;\n            case 'unit_sections_c_exercises':\n              res[res._model] = helpers.updateModelCache(models.current_unit_sections_c_exercises, model);\n              break;\n            case 'unit_sections_d_exercises':\n              res[res._model] = helpers.updateModelCache(models.current_unit_sections_d_exercises, model);\n              break;\n            case 'unit_sections_e_exercises':\n              res[res._model] = helpers.updateModelCache(models.current_unit_sections_e_exercises, model);\n              break;\n            case 'exercise':\n              res[res._model] = helpers.updateModelCache(models.current_exercise, model);\n              break;\n            case 'user':\n              res[res._model] = helpers.updateModelCache(models.user, model);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Update models cache\n       */\n      cleanCache: function(res) {\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'users':\n              models.users = [];\n              break;\n            case 'glossary_items':\n              models.glossary_items = [];\n              break;\n            case 'faq_categories':\n              models.faq_categories = [];\n              break;\n            case 'faqs':\n              models.faqs = [];\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n\n      /**\n       * Set the project(s) as mine mocking an owner\n       */\n      setProjectAsMine: function(res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, helpers.setProjectAsMineSingle);\n        return res;\n      },\n\n      updateCurrent: function(res){\n        var model = helpers.fetchModel(res);\n        if(model._destroyed){\n          delete models['current_' + res._model];\n        }\n        else{\n          models['current_' + res._model] = res[res._model];\n        }\n        return res;\n      },\n\n      /**\n       * Store models cache in long term memory\n       */\n      memorizeCache: function(res) {\n        angular.forEach(models, function(v, k){\n          longTermMemory.memorize(k,v);\n        })\n        return res;\n      },\n\n      log: function (res) {\n        $log.info(res);\n        return res;\n      },\n\n      debugger: function (res) {\n        debugger; // eslint-disable-line no-debugger\n        return res;\n      }\n    };\n\n    var helpers = {\n\n      /**\n       * Valid models names\n       */\n      validModels: [\n        'levels',\n        'unit',\n        'unit_section_a',\n        'unit_section_b',\n        'unit_section_c',\n        'unit_section_d',\n        'unit_section_e',\n        'unit_sections_c_exercises',\n        'unit_sections_d_exercises',\n        'unit_sections_e_exercises',\n        'faq_categories',\n        'faqs',\n        'glossary_items',\n        'exercise',\n        'users',\n        'user'\n      ],\n\n      /**\n       * Fetch the model from response\n       */\n      fetchModel: function(res) {\n        if(res._model && res[res._model] && res._model == 'users'){\n          var users_temp = {\n            'users':res[res._model],\n            'pagination':res.pagination\n          }\n          return users_temp;\n        }\n        else if(res._model && res[res._model] && res._model == 'glossary_items'){\n          var glossary_temp = {\n            'glossary_items':res[res._model],\n            'pagination':res.pagination\n          }\n          return glossary_temp;\n        }\n        if(res._model && res[res._model]){\n          return res[res._model];\n        }\n        else{\n          return null;\n        }\n      },\n\n      /**\n      * Get the related project referenced in res\n      */\n      getRelatedLevel: function (res) {\n        return utils.findFirst(models.levels, res[res._model].level_id);\n      },\n\n      /**\n       * Executes a function for each model\n       */\n      forEachModel: function(model, func) {\n        if(angular.isArray(model)){\n          angular.forEach(model, func);\n        }\n        else if(model){\n          func(model);\n        }\n      },\n\n      /**\n       * inject default values to a user\n       */\n      injectUserDefaults: function(user) {\n        return user;\n      },\n\n      /**\n       * Sort the frames and comments of a project by order\n       */\n      sortFramesAndCommentsSingle: function(project) {\n        utils.sortByOrder(project.frames);\n        angular.forEach(project.frames, function(frame) {\n          utils.sortByOrder(frame.comments);\n        });\n      },\n\n      updateModelCache: function (modelCache, model) {\n        var newData = model;\n        // modelCache is array\n        if(angular.isArray(modelCache)){\n\n          // if model is array, recursion\n          if(angular.isArray(model)){\n            newData = [];\n            angular.forEach(model, function(m) {\n              if(m){\n                var merged = helpers.updateModelCache(modelCache, m); // recursion\n                if(merged){\n                  newData.push(merged);\n                }\n              }\n            });\n          }\n\n          // single model\n          else if(model){\n            // if model is marked as _reload, remove it from cache and add it again\n            if(model._reload){\n              utils.removeFirst(modelCache, model.id);\n              delete model._reload; // Delete _reload metadata not to store it in cache\n              newData = utils.mergeOrPush(modelCache, model);\n            }\n            // if model is marked as _destroyed, remove it from cache\n            else if(model._destroyed){\n              utils.removeFirst(modelCache, model.id);\n            }\n            // otherwise, just update the cache\n            else{\n              newData = utils.mergeOrPush(modelCache, model);\n            }\n          }\n        }\n\n        return newData;\n      }\n    };\n\n    return resPipe;\n  });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Long Term Memory\n   * Persist data to make it available after the browser is closed\n   */\n  .factory('longTermMemory', function () {\n\n    var longTermMemory = {\n      memorize: function(key, val) {\n        localStorage[key] = angular.toJson(val);\n      },\n\n      remember: function(key) {\n        try {\n          return angular.fromJson(localStorage[key]);\n        }\n        catch(e){\n          delete localStorage[key];\n          return null;\n        }\n      },\n\n      forget: function(key) {\n        delete localStorage[key];\n      },\n\n      oblivion: function() {\n        localStorage.clear();\n      }\n    };\n\n    return longTermMemory;\n  });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * UI state service.\n   * Keep application-wide shared variables\n   */\n  .factory('galoreUploader', function (Upload, $q, utils, $timeout) {\n    var counter = 0;\n\n    var galoreUploader = {\n      files: [],\n      total: {},\n      upload: function(displayName, fileSize, obj) {\n        // Add an upload file object to the index\n        var uploadId = (counter++) + '';\n        galoreUploader.files.push({\n          id: uploadId,\n          status: 'queued',\n          name: displayName,\n          size: fileSize\n        });\n\n        helpers.updateTotal();\n\n        // Start upload\n        return Upload\n          .upload(obj)\n          .then(\n            // Response\n            function(response) {\n              var file = utils.findFirst(galoreUploader.files, uploadId);\n              file.status = 'success';\n              helpers.updateTotal();\n              $timeout(function() {\n                galoreUploader.dismiss(uploadId);\n              }, 5000);\n              return response;\n            },\n            // Error\n            function(err) {\n              var file = utils.findFirst(galoreUploader.files, uploadId);\n              file.status = 'error';\n              file.error = err;\n              helpers.updateTotal();\n              $timeout(function() {\n                galoreUploader.dismiss(uploadId);\n              }, 5000);\n              return $q.reject(err);\n            },\n            // Progress\n            function(evt) {\n              var file = utils.findFirst(galoreUploader.files, uploadId);\n              file.status = 'uploading';\n              file.loaded = evt.loaded;\n              file.size = evt.total;\n              file.percentage = parseInt(100.0 * evt.loaded / evt.total);\n              helpers.updateTotal();\n            }\n          );\n      },\n      dismiss: function(uploadId) {\n        var newFiles = [];\n        for (var i = 0; i < galoreUploader.files.length; i++) {\n          if(galoreUploader.files[i].id !== uploadId){\n            newFiles.push(galoreUploader.files[i]);\n          }\n        }\n        galoreUploader.files = newFiles;\n        helpers.updateTotal();\n      }\n    };\n\n    var helpers = {\n      updateTotal: function() {\n        galoreUploader.total.loaded = 0;\n        galoreUploader.total.size = 0;\n        galoreUploader.total.processing = 0;\n        galoreUploader.total.uploading = 0;\n        galoreUploader.total.canceled = 0;\n        galoreUploader.total.error = 0;\n        galoreUploader.total.success = 0;\n        galoreUploader.total.queued = 0;\n        angular.forEach(galoreUploader.files, function(file) {\n          switch(file.status){\n            case 'queued':\n              galoreUploader.total.queued++;\n              galoreUploader.total.size += file.size;\n              break;\n            case 'uploading':\n              galoreUploader.total.loaded += file.loaded;\n              galoreUploader.total.size += file.size;\n              galoreUploader.total.uploading++;\n              break;\n            case 'success':\n              galoreUploader.total.success++;\n              break;\n            case 'error':\n              galoreUploader.total.error++;\n              break;\n            case 'cancel':\n              galoreUploader.total.canceled++;\n              break;\n            default:\n              break;\n          }\n          galoreUploader.total.processing++;\n        });\n        galoreUploader.total.percentage = parseInt(100.0 * galoreUploader.total.loaded / galoreUploader.total.size);\n      }\n    };\n\n    helpers.updateTotal();\n\n    return galoreUploader;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreUploader', galoreUploaderDirective);\n\n  /** @ngInject */\n  function galoreUploaderDirective(galoreUploader) {\n    var directive = {\n      restrict: 'E',\n      link: linkFunc,\n      scope: {},\n      templateUrl: 'app/components/galoreUploader/galoreUploader.html'\n    };\n\n    return directive;\n\n    function linkFunc (scope) {\n      scope.expanded = false;\n      scope.uploader = galoreUploader;\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreSidebar', galoreSidebar);\n\n  /** @ngInject */\n  function galoreSidebar($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreSidebar/galoreSidebar.html',\n      controller: SidebarController,\n      controllerAs: 'sidebar',\n      link: SidebarLink,\n      bindToController: true,\n      replace: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SidebarController(models, $state, units) {\n      var vm = this;\n\n      vm.models = models;\n      vm.state = $state;\n\n      vm.addUnit = function(level_id){\n\n        var unit_code;\n        var sub_unit_code;\n\n        var sortUnits = function(array){\n          array.sort(function(a, b){\n              var keyA = a.unit_code,\n                  keyB = b.unit_code;\n              if(keyA < keyB) return -1;\n              if(keyA > keyB) return 1;\n              return 0;\n          });\n          return array;\n        }\n\n        if(vm.models.levels.length > 0 ){\n\n          angular.forEach(vm.models.levels, function(value) {\n\n            if(value.id === level_id){\n              if(value.units.length > 0){\n                var units = sortUnits(value.units);\n                unit_code = units[units.length-1].unit_code;\n                sub_unit_code = units[units.length-1].sub_unit_code + 1;\n              }else{\n                unit_code = 1;\n                sub_unit_code = 1;\n              }\n              return;\n            }\n          });\n        }\n\n        vm.newUnit = {\n            \"level_id\": level_id,\n            \"title\": \"Unit \" + unit_code + \".\" + sub_unit_code,\n            \"unit_code\": unit_code,\n            \"sub_unit_code\": sub_unit_code\n        };\n\n        units\n            .create({unit:vm.newUnit});\n      }\n\n      vm.checkCurrentUnit = function(unit){\n        if(vm.models.current_unit && (vm.models.current_unit.id == unit.id)){\n          return 'levels current-unit';\n        }else{\n          return 'levels other-unit';\n        }\n      }\n      vm.checkCurrentLevel = function(level){\n        if(vm.models.current_unit && vm.models.current_unit.level_id == level.id){\n          return 'levels active';\n        }\n      }\n\n      vm.checkDashboard = function(){\n        if(vm.state.current.name === 'main.admin.dashboard'){\n          angular.element('.levels').removeClass('active');\n          return 'active';\n        }\n      }\n\n    }\n\n    function SidebarLink(){\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreHeader', galoreHeader);\n\n  /** @ngInject */\n  function galoreHeader($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreHeader/galoreHeader.html',\n      controller: HeaderController,\n      controllerAs: 'header',\n      link: HeaderLink,\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function HeaderController(models) {\n      var vm = this;\n      vm.models = models;\n\n      vm.models.sidebar_mini = false;\n\n      vm.changeLevelsIcon = function(isCollapse){\n\n        if(isCollapse){\n          vm.models.sidebar_mini = true;\n        }else{\n          vm.models.sidebar_mini = false;\n        }\n      }\n\n\n    }\n\n    function HeaderLink(){\n\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreFooter', galoreFooter);\n\n  /** @ngInject */\n  function galoreFooter($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreFooter/galoreFooter.html',\n      controller: FooterController,\n      controllerAs: 'footer',\n      link: FooterLink,\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function FooterController(models) {\n      var vm = this;\n\n      vm.models = models;\n    }\n\n    function FooterLink(){\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n    }\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('galoreApi', function (\n      $q,\n      $http,\n      $auth,\n      apiUrl,\n      unitApiUrl,\n      showLevelsApiUrl,\n      sectionApiUrl,\n      exercisesApiUrl,\n      userApiUrl,\n      faqCategoriesApiUrl,\n      faqApiUrl,\n      glossaryApiUrl\n    ) {\n      // Cache the promises (just to avoid to call the same API before the previous has finished)\n      var cache = {};\n\n      // Api Helpers (accessible only from this factory)\n      var helpers = {\n        /**\n         * Try to retrieve the result from cache, or make HTTP call\n         * @param  {String} method  The HTTP method\n         * @param  {String} url The API url\n         * @param  {Object} data    The body\n         * @param  {Object} headers The headers\n         * @param  {Boolean} keep   If true, the promise is cached even after it's been fulfilled\n         * @return {Promise}        A promise of the response\n         */\n        cacheOrHttp: function(method, url, data, headers, keep, absUrl) {\n          var key = method + url + (data ? angular.toJson(data) : '');\n          var config = {};\n          if(method) config.method = method.toUpperCase();\n          if(absUrl){\n            config.url = absUrl;\n          }else{\n            config.url = apiUrl + url;\n          }\n          if(data) config.data = data;\n          if(headers) config.headers = headers;\n\n\n          if (!cache[key]) {\n            var promise;\n            var err = false;\n            switch(method){\n              case 'get':\n              case 'GET':\n              case 'post':\n              case 'POST':\n              case 'put':\n              case 'PUT':\n              case 'patch':\n              case 'PATCH':\n              case 'delete':\n              case 'DELETE':\n                promise = $http(config);\n                break;\n              default:\n                err = true;\n                promise = $q.reject();\n                break;\n            }\n            if(!err){\n              cache[key] = promise.finally(function(response,err) {\n                if(!keep){\n                  delete cache[key]; // delete the cache, so the next call will be fresh\n                }\n                if(err) { return $q.reject(err); }\n                if(response) { return response;  }\n              });\n            }\n          }\n\n          return cache[key];\n        },\n\n        uploadFileS3http: function(url, file_type, file){\n           return $http({\n             method: 'PUT',\n             url: url,\n             headers: {\n               'Content-Type': file_type,\n               'if-modified-since':undefined\n             },\n             data: file\n           })\n           .finally(function(response, err){\n            if(err) { return $q.reject(err); }\n            if(response) { return response; }\n           });\n        },\n\n\n        /**\n         * Expect a 200 response and return data.\n         * Otherwise, return a rejected promise.\n         */\n        expect200: function (response) {\n          if(response.status === 200){\n            return response.data;\n          }\n          else{\n            return $q.reject(response);\n          }\n        },\n\n        /**\n         * Expect a 201 response and return data.\n         * Otherwise, return a rejected promise.\n         */\n        expect201: function (response) {\n          if(response.status === 201){\n            return response.data;\n          }\n          else{\n            return $q.reject(response);\n          }\n        },\n\n        /**\n         * Expect a 204 response and return data.\n         * Otherwise, return a rejected promise.\n         */\n        expect204: function (response) {\n          if(response.status === 204){\n            return response.data;\n          }\n          else{\n            return $q.reject(response);\n          }\n        }\n      };\n\n      var galoreoApi = {\n        /** USER API **/\n\n        /**\n         * Authenticate the user\n         */\n        login: function(data) {\n          if(!cache.login){\n            cache.login = $auth\n              .submitLogin(data)\n              .finally(function(response,err) {\n                delete cache.login;\n                if(err) { return $q.reject(err); }\n                if(response) { return response; }\n              });\n          }\n          return cache.login;\n        },\n\n        /**\n         * Retrieve user data (together with role permissions)\n         */\n        getMe: function(){\n          return helpers\n            .cacheOrHttp('get', '/v1/me')\n            .then(helpers.expect200);\n        },\n\n        /**\n         * Logout the user\n         */\n        logout: function() {\n          if(!cache.logout){\n            cache.logout = $auth\n              .signOut()\n              .finally(function(response,err) {\n                delete cache.logout;\n                if(err) { return $q.reject(err); }\n                if(response) { return response; }\n              });\n          }\n          return cache.logout;\n        },\n\n        /**\n        * Change the password of the user\n        */\n        changePassword: function (data) {\n          if(!cache.changePassword){\n            cache.changePassword = $auth\n              .updatePassword(data)\n              .finally(function (response, err) {\n                  delete cache.changePassword;\n                  if(err) { return $q.reject(err); }\n                  if(response) { return response; }\n              });\n          }\n          return cache.changePassword;\n        },\n\n        /**\n        * Create Unit\n        */\n        createUnit: function(data) {\n          return helpers\n          .cacheOrHttp('post', unitApiUrl, data)\n          .then(helpers.expect201);\n        },\n\n        /**\n         * Destroy unit\n         */\n        destroyUnit: function (unit) {\n          return helpers\n            .cacheOrHttp('delete', unitApiUrl + '/' + unit.id)\n            .then(helpers.expect204)\n            .then(function(){\n              return {unit: unit};\n            });\n        },\n\n        /**\n         * Destroy exercise\n         */\n        destroyExercise: function (exercise) {\n\n          return helpers\n            .cacheOrHttp('delete', exercisesApiUrl + '/' + exercise.id)\n            .then(helpers.expect204)\n            .then(function(){\n              return {exercise: exercise};\n            });\n        },\n\n        /**\n        * Destroy a file audio\n        */\n        deleteFileAudio: function(section, file_id) {\n          return helpers\n            .cacheOrHttp('delete', sectionApiUrl + 'b/audio_items/' + section.id + '/' + file_id)\n            .then(helpers.expect204)\n            .then(function(){\n              return {section: section};\n            });\n        },\n\n\n        /**\n        * Create Exercise\n        */\n        createExercise: function(data) {\n          return helpers\n          .cacheOrHttp('post', exercisesApiUrl, data)\n          .then(helpers.expect201);\n        },\n\n        /**\n        * Create Exercise with image\n        */\n        createExerciseImage: function(id_exercise, data) {\n          return helpers\n          .cacheOrHttp('post', exercisesApiUrl + '/' + id_exercise + '/exercise_image_text_items', data)\n          .then(helpers.expect201);\n        },\n\n        /**\n        * Create a new file audio\n        */\n        createFileAudio: function(section_id, data) {\n          return helpers\n          .cacheOrHttp('post', sectionApiUrl +'b/' + section_id + '/audio_items', data)\n          .then(helpers.expect201);\n        },\n\n        /**\n        * Save Faq\n        */\n        saveFaq: function(data) {\n          return helpers\n          .cacheOrHttp('post', faqApiUrl + '/save', data)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Save Faq Category\n        */\n        saveFaqCategory: function(data) {\n          return helpers\n          .cacheOrHttp('post', faqCategoriesApiUrl + '/save', data)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Save Glossary\n        */\n        saveGlossary: function(data) {\n          return helpers\n          .cacheOrHttp('post', glossaryApiUrl + '/save', data)\n          .then(helpers.expect200);\n        },\n\n\n        /**\n        * Show Unit\n        */\n        showUnit: function(id) {\n          return helpers\n          .cacheOrHttp('get', unitApiUrl + '/' + id)\n          .then(helpers.expect200);\n        },\n\n\n        /**\n        * Show Users\n        */\n        showUsers: function() {\n          return helpers\n          .cacheOrHttp('get', userApiUrl + '/')\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Show Faq categories\n        */\n        showFaqCategories: function() {\n          return helpers\n          .cacheOrHttp('get', faqCategoriesApiUrl)\n          .then(helpers.expect200);\n        },\n\n\n        /**\n        * Show Faq categories\n        */\n        showFaq: function() {\n          return helpers\n          .cacheOrHttp('get', faqApiUrl)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Show Glossary\n        */\n        showGlossary: function() {\n          return helpers\n          .cacheOrHttp('get', glossaryApiUrl)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section A by id section\n        */\n        getSectionA: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl  + 'a/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section B by id section\n        */\n        getSectionB: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'b/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section C by id section\n        */\n        getSectionC: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'c/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section D by id section\n        */\n        getSectionD: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'd/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section E by id section\n        */\n        getSectionE: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'e/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get excercises by id section\n        */\n        getExercises: function(section, id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + section + '/' + id + '/exercises')\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get user page\n        */\n        getUserPage: function(page){\n          return helpers\n          .cacheOrHttp('get', userApiUrl + '?page=' + page)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get glossary page\n        */\n        getGlossaryPage: function(page){\n          return helpers\n          .cacheOrHttp('get', glossaryApiUrl + '?page=' + page)\n          .then(helpers.expect200);\n        },\n\n        /**\n         * Show all levels\n         */\n        indexLevels: function(){\n          return helpers\n            .cacheOrHttp('get', showLevelsApiUrl)\n            .then(helpers.expect200);\n        },\n\n\n       /**\n        * Update unit\n        */\n        updateUnit: function(id, data){\n          return helpers\n            .cacheOrHttp('put', unitApiUrl + '/' + id, data)\n            .then(helpers.expect200);\n        },\n\n        /**\n         * Update section\n         */\n         updateSection: function(section, id, data){\n           return helpers\n             .cacheOrHttp('put', sectionApiUrl + section + '/' + id, data)\n             .then(helpers.expect200);\n         },\n\n         /**\n          * Update excercise\n          */\n          updateExercise: function(id, data){\n            return helpers\n              .cacheOrHttp('put', exercisesApiUrl + '/' + id, data)\n              .then(helpers.expect200);\n          },\n\n\n          /**\n           * Update Glossary file\n           */\n           updateFileGlossary: function(data){\n             return helpers\n               .cacheOrHttp('post', '/v1/glossary_audio_items', data)\n               .then(helpers.expect201);\n           },\n\n         /**\n         * Upload Video\n         */\n         uploadVideo: function(section, section_id, data){\n           return helpers\n             .cacheOrHttp('post', sectionApiUrl + section + '/' + section_id + '/video_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload Video S3\n         */\n         uploadFileS3: function(url, file_type, file){\n           return helpers\n             .uploadFileS3http(url, file_type, file)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload image in exercise image/text\n         */\n         uploadFile: function(exercise_id, exercise_item_id, data){\n           return helpers\n             .cacheOrHttp('post', exercisesApiUrl  + '/' + exercise_id + '/exercise_image_text_items/' + exercise_item_id + '/image_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload audio in exercise image/text\n         */\n         uploadExerciseFileAudio: function(exercise_id, exercise_item_id, data){\n           return helpers\n             .cacheOrHttp('post', exercisesApiUrl  + '/' + exercise_id + '/exercise_image_text_items/' + exercise_item_id + '/audio_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload file\n         */\n         uploadFileAudio: function(section_id, audio_id, data){\n           return helpers\n             .cacheOrHttp('post', sectionApiUrl  + 'b/' + section_id + '/audio_items/' + audio_id + '/audio_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload file audio in glossary\n         */\n         uploadFileGlossary: function(data){\n           return helpers\n             .cacheOrHttp('post', '/v1/glossary_audio_items/audio_item_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload Image tip\n         */\n         uploadImageTip: function(section, section_id, type_of_tip, data){\n           return helpers\n             .cacheOrHttp('post', sectionApiUrl + section + '/' + section_id + '/' + type_of_tip, data)\n             .then(helpers.expect200);\n         },\n\n         uploadImageTheory: function(section, section_id, data){\n           return helpers\n             .cacheOrHttp('post', sectionApiUrl + section + '/' + section_id + '/theory_image_upload', data)\n             .then(helpers.expect200);\n         },\n\n         uploadImageTipExercise: function(exercise_id, data){\n           return helpers\n             .cacheOrHttp('post', exercisesApiUrl + '/' + exercise_id + '/exercise_tips_image_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload a new file audio for exercise dialogue\n         */\n         uploadFileAudioExerciseDialogue: function(id_exercise, data) {\n           return helpers\n           .cacheOrHttp('post', exercisesApiUrl +'/' + id_exercise + '/exercise_audio_items/audio_upload', data)\n           .then(helpers.expect200);\n         },\n\n         /**\n         * Publish current unit\n         */\n         publishUnit: function(id){\n           return helpers\n             .cacheOrHttp('post', unitApiUrl + '/' + id +'/publish')\n             .then(helpers.expect204);\n         },\n\n         /**\n         * unpublish current unit\n         */\n         unpublishUnit: function(id){\n           return helpers\n             .cacheOrHttp('post', unitApiUrl + '/' + id +'/unpublish')\n             .then(helpers.expect204);\n         }\n      };\n\n      return galoreoApi;\n   });\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exerciseTextText', exerciseTextText);\n\n    /** @ngInject */\n    function exerciseTextText(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/exerciseTextText/exerciseTextText.html',\n        controller: exerciseTextTextController,\n        controllerAs: 'exerciseTextText',\n        bindToController: true,\n        scope:{\n          model: '=',\n          idEx: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function exerciseTextTextController(models, $scope) {\n        var vm = this;\n        vm.models = models;\n\n        vm.addRow = function(){\n          if(!vm.exercise_text_text_item.item_number){\n            return;\n          }\n          if(!vm.model){\n              vm.model = [];\n          }\n          var newRow = angular.copy(vm.exercise_text_text_item);\n          vm.model.push(newRow);\n          vm.exercise_text_text_item.item_number = \"\";\n          vm.exercise_text_text_item.text_it = \"\";\n          vm.exercise_text_text_item.text_en = \"\";\n        }\n\n\n        $scope.$watch('exerciseTextText.model', function (newVal, oldVal) {\n            if(newVal !== oldVal) {\n              vm.form = angular.copy(vm.model);\n            }\n        });\n      }\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exerciseImageText', exerciseImageText);\n\n    /** @ngInject */\n    function exerciseImageText(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/exerciseImageText/exerciseImageText.html',\n        controller: exerciseImageTextController,\n        controllerAs: 'exerciseImageText',\n        bindToController: true,\n        scope:{\n          model: '=',\n          idex: '=',\n          type: '='\n        }\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function exerciseImageTextController(models, $scope) {\n        var vm = this;\n        vm.models = models;\n\n        vm.addRow = function(){\n          if(!vm.exercise_image_text_item.item_number){\n            return;\n          }\n          if(!vm.model){\n            vm.model = [];\n          }\n          var newRow = angular.copy(vm.exercise_image_text_item);\n          if(vm.exercise_image_text_item.image){\n            newRow.image = vm.exercise_image_text_item.image;\n          }\n          if(vm.exercise_image_text_item.audio){\n             newRow.audio = vm.exercise_image_text_item.audio;\n          }\n          vm.model.push(newRow);\n          vm.exercise_image_text_item.image = {};\n          vm.exercise_image_text_item.audio = {};\n          vm.exercise_image_text_item.item_number = \"\";\n          vm.exercise_image_text_item.text_en = \"\";\n        }\n\n        vm.uploadImageFile = function($file){\n          vm.exercise_image_text_item.image = {'file' : $file};\n        };\n\n        vm.changeImageFile = function($file, row){\n          row.image = {'file' : $file};\n        };\n\n        vm.uploadAudioFile = function($file){\n          vm.exercise_image_text_item.audio = {'file' : $file};\n        };\n\n        vm.changeAudioFile = function($file, row){\n          row.audio = {'file' : $file};\n        };\n\n        $scope.$watch('exerciseImageText.model', function (newVal, oldVal) {\n            if(newVal !== oldVal) {\n              vm.form = angular.copy(vm.model);\n            }\n        });\n\n      }\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exercise', exercise);\n\n  /** @ngInject */\n  function exercise() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/exercise/exercise.html',\n      controller: TabExerciseController,\n      controllerAs: 'exercise',\n      bindToController: true,\n      scope:{\n        model: '=',\n        section: '@',\n        currentsection: '=',\n        tabinfo: '@'\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function TabExerciseController(models, $state, units, $q, $timeout) {\n      var vm = this;\n      vm.models = models;\n\n      vm.data = {\n         availableOptions: [\n             {id: 1 , name: 'Dropdown'},\n             {id: 2 , name: 'Completamento'},\n             {id: 3 , name: 'Trova lintruso'},\n             {id: 4 , name: 'Riordina la parola'},\n             {id: 5 , name: 'Riordina le frasi'},\n             {id: 6 , name: 'Connetti immagine/frase'},\n             {id: 7 , name: 'Connetti frase/frase'},\n             {id: 8 , name: 'Vero o Falso'},\n             {id: 9 , name: 'Memory'},\n             {id: 10 , name: 'Dialogo'},\n             {id: 11 , name: 'Reading'}\n          ],\n         selectedOption: {id: 1, name: 'Dropdown'}\n      };\n\n      vm.setLoading = function (res) {\n        vm.loading = true;\n        return $q.resolve(res);\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.uploadImageTipFile = function($file){\n        if($file){\n          vm.form.image_tip = $file;\n          vm.form.exercise_tips_image_filename = $file.name;\n        }\n      }\n\n       vm.removeFileTemp= function(){\n          vm.form.image_tip = \"\";\n        }\n\n      vm.submitImageTip = function(id){\n        var exercise_tips_image_url = \"\";\n        var exercise_tips_image_filename = \"\";\n        return units\n          .uploadImageTipExercise(id, { filename: vm.form.image_tip.name, type: vm.form.image_tip.type })\n          .then(function(res) {\n            exercise_tips_image_filename = res.exercise_tips_image_filename;\n            exercise_tips_image_url = res.exercise_tips_image_url;\n            return units.uploadFileS3(res.upload_url, vm.form.image_tip.type, vm.form.image_tip)\n          })\n          .then(function(){\n            vm.form.exercise_tips_image_url = exercise_tips_image_url;\n            vm.form.exercise_tips_image_filename = exercise_tips_image_filename;\n            vm.model.exercise_tips_image_url = exercise_tips_image_url;\n            vm.model.exercise_tips_image_filename = exercise_tips_image_filename;\n            delete vm.form.image_tip;\n\n            return units.updateExercise(vm.form.id,  {'exercise':vm.form});\n          });\n      }\n\n      vm.submit = function () {\n\n        vm.form.unit_section_id = vm.model.id;\n        vm.form.unit_section_type = vm.section;\n        vm.form.exercise_type = vm.form.exercise_type.id;\n\n        delete vm.form.exercise_text_text;\n        delete vm.form.exercise_image_text;\n        delete vm.form.exercise_text;\n\n        return vm.setLoading()\n          .then(function(){\n            return units.createExercise({'exercise': vm.form});\n           })\n          .then(function(res){\n            vm.form.id = res.exercise.id;\n\n            if(vm.form.image_tip && vm.form.image_tip.name){\n              return vm.submitImageTip(vm.form.id);\n            }\n          })\n          .then(function(){\n            vm.currentsection.push(angular.copy(vm.form));\n            vm.models.activeTabIndex = 0;\n            vm.form.exercise_tips = \"\";\n            vm.form.title = \"\";\n            vm.form.subtitle = \"\";\n            vm.form.exercise_type = {id: 1, name: 'Dropdown'};\n\n              $timeout(function () {\n                vm.unsetLoading();\n                if(vm.section === 'UnitSectionD'){\n                  angular.element(\"#sectionD .tab-pane\").removeClass('active in');\n                  angular.element(\"#sectionD #info\").addClass('active in');\n                }\n                else if(vm.section === 'UnitSectionE'){\n                  angular.element(\"#sectionE .tab-pane\").removeClass('active in');\n                  angular.element(\"#sectionE #info\").addClass('active in');\n                }\n                angular.element(vm.tabinfo).tab('show');\n              }, 100);\n          })\n          .finally(function(){\n            vm.unsetLoading();\n          });\n      }\n    }\n\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Error Manager.\n   * Handles common HTTP error messages\n   */\n  .factory('errorManager', function (toastr, $log, $state, $q, longTermMemory, models) {\n    var errorManager = function(err) {\n      // log every errors\n      $log.error(err);\n\n      // Unwrap HTTP errors and take actions if needed\n      if(angular.isObject(err) && err.status){\n        switch(err.status){\n          case 401:\n            $state.go('main.logout');\n            err = err.data;\n            break;\n          case 403:\n            $state.go('main.home');\n            err = err.data;\n            break;\n          case 422:\n            err = err.data;\n            break;\n          case 404:\n            err = err.data;\n            break;\n          case 413:\n            err = 'Il file che stai cercando di caricare  troppo grande';\n            break;\n          case -1:\n            err = 'Il server non  raggiungibile o non sei connesso ad Internet';\n            break;\n          default:\n            break;\n        }\n      }\n\n      var getErrorString = function (err) {\n        if(angular.isString(err)){\n          return err;\n        }\n        else if(angular.isObject(err) && (err.full_messages || err.error_description || err.errors || err.data || err.msg || err.error)){\n          return getErrorString(err.full_messages || err.error_description || err.errors || err.data || err.msg || err.error );\n        }\n        else if(angular.isArray(err)){\n          var myErr = [];\n          for (var i = 0; i < err.length; i++) {\n            myErr[i] = getErrorString(err[i]);\n          }\n          return getErrorString(myErr.join('<br>'));\n        }\n        // Don't manage different kinds of error\n        else{\n          longTermMemory.oblivion(); // Forget everything. We don't want the app to be broken forever!\n          models.reset(); // Reset all the models. We don't want the app to be broken forever!\n          return 'Si  verificato un errore imprevisto. Si prega di riprovare pi tardi.';\n        }\n      }\n\n      toastr.error(getErrorString(err), 'Errore');\n\n      return $q.reject(err);\n    };\n\n    return errorManager;\n  });\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('ckeditorStandard', ckeditorStandard);\n\n    /** @ngInject */\n    function ckeditorStandard(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/ckeditorColor/ckeditorColor.html',\n        controller: CkEditorStandardController,\n        controllerAs: 'ckeditorColor',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n\n      /** @ngInject */\n      function CkEditorStandardController(models, $scope) {\n\n        var vm = this;\n        vm.models = models;\n\n        $scope.options = {\n            language: 'it',\n            allowedContent: true,\n            entities: false,\n            toolbar: 'Full',\n            colorButton_enableMore: false,\n            colorButton_enableAutomatic: false,\n            autoParagraph: false,\n            toolbar_Full:[\n              { name: 'document', items : [ 'Source','-','Save'] },\n              { name: 'tools', items : [ 'Maximize'] },\n              { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },\n              { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },\n              { name: 'paragraph', items : ['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-'] }\n            ]\n          };\n\n      }\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('ckeditorColor', ckeditorColor);\n\n    /** @ngInject */\n    function ckeditorColor(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/ckeditorColor/ckeditorColor.html',\n        controller: CkEditorColorController,\n        controllerAs: 'ckeditorColor',\n        bindToController: true,\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n\n\n      /** @ngInject */\n      function CkEditorColorController(models, $scope) {\n\n        var vm = this;\n        vm.models = models;\n\n        $scope.options = {\n            language: 'it',\n            allowedContent: true,\n            entities: false,\n            toolbar: 'Full',\n            autoParagraph: false,\n            ignoreEmptyParagraph: true,\n            extraPlugins: 'divarea',\n            // colorButton_colors: '337ab7,cf4555,00a65a,ffeb3b',\n            // colorButton_enableMore: false,\n            // colorButton_enableAutomatic: false,\n            toolbar_Full:[\n              { name: 'document', items : [ 'Source','-','Save'] },\n              { name: 'tools', items : [ 'Maximize'] },\n              { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },\n              { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },\n              { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote',\n              '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-'] },\n              { name: 'links', items : [ 'Link','Unlink'] },\n              { name: 'insert', items : ['Table'] },\n              { name: 'colors', items : [ 'TextColor'] }\n            ]\n          };\n      }\n\n    }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('can', function (models) {\n\n      var helpers = {\n        instanceCondition: function(action, resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          // Safely get condition function (avoiding undefined errors)\n          var cond = perms && perms.instanceConditions && perms.instanceConditions[action] && perms.instanceConditions[action][resource];\n          // If no condition was found, return true, else evaluate the condition\n          return !cond || cond(instance);\n        },\n        canManage: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.manage && (perms.manage.indexOf(resource) >= 0) && helpers.instanceCondition('manage', resource, instance);\n        },\n        canUpdate: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.update && (perms.update.indexOf(resource) >= 0) && helpers.instanceCondition('update', resource, instance);\n        },\n        canShow: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.show && (perms.show.indexOf(resource) >= 0) && helpers.instanceCondition('show', resource, instance);\n        },\n        canIndex: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.index && (perms.index.indexOf(resource) >= 0) && helpers.instanceCondition('index', resource, instance);\n        },\n        customCan: function(action, resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms[action] && (perms[action].indexOf(resource) >= 0) && helpers.instanceCondition(action, resource, instance);\n        }\n      };\n\n      var can = function(action, resource, instance){\n        switch(action){\n          case 'manage':\n            return helpers.canManage(resource, instance);\n          case 'update':\n            return helpers.canManage(resource, instance) || helpers.canUpdate(resource, instance);\n          case 'show':\n            return helpers.canManage(resource, instance) || helpers.canUpdate(resource, instance) || helpers.canShow(resource, instance);\n          case 'index':\n            return helpers.canShow(resource, instance) || helpers.canIndex(resource, instance);\n          default:\n            return helpers.customCan(action, resource, instance);\n        }\n      };\n\n      return can;\n   });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('can', canDirective);\n\n  /** @ngInject */\n  function canDirective(can, $log, models) {\n    var directive = {\n      restrict: 'A',\n      link: linkFunc,\n      scope: {\n        instance: '='\n      }\n    };\n\n    return directive;\n\n    function linkFunc(scope, el, attr) {\n      var watcher;\n      var shown;\n      var action;\n      var resource;\n      var negative;\n      scope.models = models;\n\n      // Update the visibility of the element\n      var updateVisibility = function() {\n        var toShow = can(action, resource, scope.instance);\n        if(negative){ toShow = !toShow; } // invert the condition if needed\n        // Show the element if not shown\n        if(toShow && !shown){\n          el.removeClass('can-hide');\n          shown = true;\n        }\n\n        // Hide the element if shown\n        else if(!toShow && shown){\n          el.addClass('can-hide');\n          shown = false;\n        }\n      };\n\n      // Parse can attribute\n      var parsed = attr.can.split(':');\n      if(parsed.length !== 2){\n        $log.error('Syntax error in \"can\" directive: ' + angular.toJson(attr.can));\n        return;\n      }\n\n      // If the action starts with \"!\", the action is negative\n      negative = parsed[0].slice(0, 1) === '!';\n\n\n      // In that case, remove ! from the string\n      if(negative){\n        parsed[0] = parsed[0].substr(1);\n      }\n\n      // Extract the action and the resource\n      action = parsed[0];\n      resource = parsed[1];\n\n      // Update the visibility for the first time\n      shown = true;\n      updateVisibility();\n\n      // Update the visibility as soon as the permissions change\n      watcher = scope.$watch('models.current_user.can', function(newVal, oldVal) {\n        if(newVal && oldVal !== newVal){\n          updateVisibility();\n        }\n      });\n\n      // Update the visibility as soon as the instance changes\n      watcher = scope.$watch('instance', function(newVal, oldVal) {\n        if(newVal && oldVal !== newVal){\n          updateVisibility();\n        }\n      });\n\n      scope.$on('$destroy', function () {\n        watcher();\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('boxExpander', boxExpander);\n\n  /** @ngInject */\n  function boxExpander() {\n    var directive = {\n      restrict: 'A',\n      scope: {\n        boxExpander: '='\n      },\n      link: boxExpanderLink\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function boxExpanderLink(scope, el) {\n      el.addClass(\"panel-collapse collapse\");\n\n      scope.$watch('boxExpander', function (newVal, oldVal) {\n        if(newVal !== oldVal){\n          if(newVal){\n            //el.collapse('show');\n          }else{\n            el.collapse('hide');\n          }\n        }\n      })\n    }\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My user Overview API service\n   */\n   .factory('users', function (galoreApi, errorManager, resPipe, models) {\n\n      var users = {\n\n        /**\n         * Get current user\n         */\n        me: function(){\n          return galoreApi\n            .getMe()\n            .then(resPipe.parseResponse)\n            .then(resPipe.updateCache)\n            .then(resPipe.updateCurrent)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        },\n\n        /**\n        * Update current user\n        */\n        updateMe: function (data) {\n          return galoreApi\n            .updateMe(data)\n            .then(function (res) {\n              if(res.status === \"success\")\n              {\n                return {\n                  user: res.data\n                }\n              }\n              return res;\n            })\n            .then(resPipe.parseResponse)\n            .then(resPipe.injectDefaults)\n            .then(helpers.addInstanceConditions)\n            .then(resPipe.updateCache)\n            .then(resPipe.updateCurrent)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        },\n\n        showUsers: function(){\n          return galoreApi\n            .showUsers()\n            .then(resPipe.parseResponse)\n            .then(resPipe.updateCache)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        },\n\n        getUserPage: function(page){\n          return galoreApi\n            .getUserPage(page)\n            .then(resPipe.parseResponse)\n            .then(resPipe.cleanCache)\n            .then(resPipe.updateCache)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        }\n      };\n\n      var helpers = {\n        addInstanceConditions: function(res) {\n          if(res.user){\n            res.user.can.instanceConditions = models.getInstanceConditions();\n          }\n          return res;\n        }\n      };\n\n      return users;\n   });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('units', function (galoreApi, resPipe, utils, errorManager, $q) {\n      var units = {\n\n        /**\n         * get a unit from server (given id)\n         */\n        show: function(id){\n          return galoreApi\n            .showUnit(id)                     // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * create a new unit\n         */\n        create: function(data){\n          return galoreApi\n            .createUnit(data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * create a new exercise\n         */\n        createExercise: function(data){\n          return galoreApi\n            .createExercise(data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n\n        /**\n         * create a new exercise with image\n         */\n        createExerciseImage: function(id, data){\n          return galoreApi\n            .createExerciseImage(id, data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * create a new file audio\n         */\n        createFileAudio: function(id, data){\n          return galoreApi\n            .createFileAudio(id, data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionA by level id\n        */\n        getSectionA: function(id){\n          return galoreApi\n            .getSectionA(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionB by level id\n        */\n        getSectionB: function(id){\n          return galoreApi\n            .getSectionB(id)                   // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionC by level id\n        */\n        getSectionC: function(id){\n          return galoreApi\n            .getSectionC(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionD by level id\n        */\n        getSectionD: function(id){\n          return galoreApi\n            .getSectionD(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionE by level id\n        */\n        getSectionE: function(id){\n          return galoreApi\n            .getSectionE(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get excercises by section id\n        */\n        getExercises: function(section, id){\n          return galoreApi\n            .getExercises(section, id)         // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * update unit\n         */\n        update: function(id, data){\n\n          return galoreApi\n            .updateUnit(id, data)             // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current project\n            .then(resPipe.memorizeCache)      // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * update section\n         */\n        updateSection: function(section, id, data){\n          return galoreApi\n            .updateSection(section, id, data) // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current project\n            .then(resPipe.memorizeCache)      // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * upload a new file audio for exercise dialogue\n         */\n        uploadFileAudioExerciseDialogue: function(id, data){\n          return galoreApi\n            .uploadFileAudioExerciseDialogue(id, data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n\n        /**\n         * update exercise exercise_id, exercise_item_id, data\n         */\n        updateExercise: function(exercise_id, data){\n          var uploadPromises = [];\n          if(angular.isArray(data.exercise.exercise_image_text_items)){\n            angular.forEach(data.exercise.exercise_image_text_items, function(item){\n              if(item.image && item.image.file){\n                var promise = units\n                  .uploadFile(exercise_id, item.id, {\n                    filename: item.image.file.name,\n                    type: item.image.file.type\n                  })\n                  .then(function(res){\n                    item.temp_url = res.image_url;\n                    item.file_name = res.image_filename;\n                    return units\n                      .uploadFileS3(res.upload_url, item.image.file.type, item.image.file)\n                      .then(function(){\n                        item.image_filename = item.file_name;\n                        item.image_url = item.temp_url;\n                        delete item.image;\n                        delete item.file_name;\n                        delete item.temp_url;\n                      });\n                  });\n                   uploadPromises.push(promise);\n              }\n              if(item.audio && item.audio.file){\n                var promiseAudio = units\n                  .uploadExerciseFileAudio(exercise_id, item.id, {\n                    filename: item.audio.file.name,\n                    type: item.audio.file.type\n                  })\n                  .then(function(res){\n                    item.temp_audio_url = res.audio_url;\n                    item.audio_file_name = res.audio_filename;\n                    return units\n                      .uploadFileS3(res.upload_url, item.audio.file.type, item.audio.file)\n                      .then(function(){\n                        item.audio_filename = item.audio_file_name;\n                        item.audio_url = item.temp_audio_url;\n                        delete item.audio;\n                        delete item.audio_file_name;\n                        delete item.temp_audio_url;\n                      });\n                  });\n                  uploadPromises.push(promiseAudio);\n              }\n            });\n          }\n\n          return $q\n            .all(uploadPromises)\n            .then(function(){\n              return galoreApi.updateExercise(exercise_id, data)\n            })\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.updateCurrent)       // Set as current project\n            .then(resPipe.memorizeCache)      // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /*\n        * Publish current unit\n        */\n        publishUnit: function(id){\n          return galoreApi\n            .publishUnit(id)\n            .catch(errorManager);\n        },\n\n        /*\n        * Unpublish current unit\n        */\n        unpublishUnit: function(id){\n          return galoreApi\n            .unpublishUnit(id)\n            .catch(errorManager);\n        },\n\n        uploadVideo: function(section, section_id, data){\n          return galoreApi\n            .uploadVideo(section, section_id, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadExerciseFileAudio: function(exercise_id, exercise_item_id, data){\n          return galoreApi\n            .uploadExerciseFileAudio(exercise_id, exercise_item_id, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadFile: function(exercise_id, exercise_item_id, data){\n          return galoreApi\n            .uploadFile(exercise_id, exercise_item_id, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadFileAudio: function(section_id, file_id, data){\n          return galoreApi\n            .uploadFileAudio(section_id, file_id, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadImageTip: function(section, section_id, type_of_tip, data){\n          return galoreApi\n            .uploadImageTip(section, section_id, type_of_tip, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadImageTheory: function(section, section_id, data){\n          return galoreApi\n            .uploadImageTheory(section, section_id, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadImageTipExercise: function(exercise_id, data){\n          return galoreApi\n            .uploadImageTipExercise(exercise_id, data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadFileS3 :function(url, file_type, file){\n          return galoreApi\n            .uploadFileS3(url, file_type, file) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * destroy a unit\n         */\n        destroyUnit: function(unit){\n          return galoreApi\n            .destroyUnit(unit)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markDestroyed)      // Mark the unit as destroyed\n            .then(resPipe.updateCache)        // Update cache\n            .then(resPipe.updateCurrent)        // Update current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n\n        /**\n         * destroy an exercise\n         */\n        destroyExercise: function(exercise){\n          return galoreApi\n            .destroyExercise(exercise)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markDestroyed)      // Mark the unit as destroyed\n            .then(resPipe.updateCache)        // Update cache\n            .then(resPipe.updateCurrent)        // Update current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        deleteFileAudio: function(section, file_id){\n          return galoreApi\n            .deleteFileAudio(section, file_id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markDestroyed)      // Mark the unit as destroyed\n            .then(resPipe.updateCache)        // Update cache\n            .then(resPipe.updateCurrent)        // Update current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        }\n\n\n\n\n      };\n\n      return units;\n   });\n\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n  * Models cache\n  */\n  .factory('models', function (longTermMemory) {\n\n    var models = {\n       reset: function () {\n         models.levels = longTermMemory.remember('levels') || [];\n         models.current_unit = longTermMemory.remember('current_unit') || [];\n         models.users = longTermMemory.remember('users') || [];\n         models.user = longTermMemory.remember('user') || [];\n         models.faq_categories = longTermMemory.remember('faq_categories') || [];\n         models.faqs = longTermMemory.remember('faqs') || [];\n         models.glossary_items = longTermMemory.remember('glossary_items') || [];\n         models.current_user = longTermMemory.remember('current_user') || undefined;\n       }\n    };\n\n    models.reset();\n\n    return models;\n  });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('levels', function (galoreApi, resPipe, utils, errorManager) {\n      var levels = {\n\n        /**\n         * List of levels\n         */\n        index: function(){\n          return galoreApi\n            .indexLevels()                // API call\n            .then(resPipe.parseResponse)    // Parse the raw response\n            .then(resPipe.injectDefaults)   // Inject some defatult values\n            .then(resPipe.updateCache)      // Update the cache\n            .then(resPipe.memorizeCache) // Memorize projects in local storage\n            .catch(errorManager);           // Handle errors\n        }\n      };\n\n      return levels;\n   });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My user Overview API service\n   */\n   .factory('glossary', function (galoreApi, errorManager, resPipe) {\n\n      var glossary = {\n\n        getGlossaryPage: function(page){\n          return galoreApi\n            .getGlossaryPage(page)\n            .then(resPipe.parseResponse)\n            .then(resPipe.cleanCache)\n            .then(resPipe.updateCache)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        },\n\n        showGlossary: function(){\n          return galoreApi\n            .showGlossary()\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        saveGlossary: function(data){\n          return galoreApi\n            .saveGlossary(data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadFileGlossary: function(data){\n          return galoreApi\n            .uploadFileGlossary(data) // API call\n            .catch(errorManager);             // Handle errors\n        },\n\n        updateFileGlossary: function(data){\n          return galoreApi\n            .updateFileGlossary(data) // API call\n            .catch(errorManager);             // Handle errors\n        }\n      };\n\n      return glossary;\n   });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My user Overview API service\n   */\n   .factory('faq', function (galoreApi, errorManager, resPipe) {\n\n      var faq = {\n\n        saveFaqCategory: function(data){\n          return galoreApi\n            .saveFaqCategory(data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.cleanCache)\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        saveFaq: function(data){\n          return galoreApi\n            .saveFaq(data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.cleanCache)\n            .then(resPipe.log)\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        showFaqCategories: function(){\n          return galoreApi\n            .showFaqCategories()\n            .then(resPipe.parseResponse)\n            .then(resPipe.updateCache)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        },\n\n        showFaq: function(){\n          return galoreApi\n            .showFaq()\n            .then(resPipe.parseResponse)\n            .then(resPipe.updateCache)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        }\n      };\n\n      return faq;\n   });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log,\n    $rootScope,\n    uiState,\n    defaultBodyClasses,\n    longTermMemory\n    ) {\n        // Bind the uiState to $rootScope as it's used in index.html\n        $rootScope.uiState = uiState;\n\n        // On state change\n        var stateChangeSuccess = $rootScope.$on('$stateChangeSuccess', function (event, toState) {\n          var pms = toState.params || {};\n          uiState.bodyClasses = pms.bodyClasses || defaultBodyClasses;\n        });\n\n        // Destroy watchers\n        $rootScope.$on('$destroy', function() {\n          stateChangeSuccess();\n        });\n\n        longTermMemory.oblivion();\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('main', {\n        abstract: true,\n        templateUrl: 'app/pages/main/main.html'\n      })\n      .state('main.admin', {\n        templateUrl: 'app/pages/admin/admin.html',\n        controller: 'AdminController',\n        controllerAs: 'vm',\n        resolve: {\n          loggedIn: function($auth, $q, users, levels) {\n            return $auth\n              .validateUser()\n              .then(function(res){\n                if(res.signedIn !== true){\n                  return $q.reject();\n                }\n              })\n              .then(users.me)\n              .then(levels.index)\n              .then(function(){\n                return true;\n              })\n              .catch(function(){\n                return false;\n              });\n          }\n        },\n        onEnter: function($timeout, $state, loggedIn){\n          if(!loggedIn){\n            $timeout(function(){\n              $state.go('main.login');\n            });\n          }\n        }\n      })\n      .state('main.logout', {\n        url: '/logout',\n        onEnter: function($q, galoreApi, $state, toastr, models, longTermMemory) {\n          galoreApi.logout()\n            .finally(function() {\n              delete models.current_user;\n              models.user = [];\n              longTermMemory.forget('user');\n              longTermMemory.forget('current_user');\n              $state.go('main.login');\n            });\n        }\n      })\n      .state('main.login', {\n        url: '/login',\n        templateUrl: 'app/pages/login/login.html',\n        controller: 'LoginController',\n        controllerAs: 'vm',\n        params: {\n          bodyClasses: 'hold-transition login-page'\n        }\n      })\n      .state('main.admin.unit', {\n        url: '/units/:id',\n        templateUrl: 'app/pages/unit/unit.html',\n        controller: 'UnitController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.profile', {\n        url: '/profile',\n        templateUrl: 'app/pages/profile/profile.html',\n        controller: 'ProfileController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.dashboard', {\n        url: '/',\n        templateUrl: 'app/pages/dashboard/dashboard.html',\n        controller: 'DashboardController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.createUnit', {\n        url: '/create-unit',\n        templateUrl: 'app/pages/createUnit/createUnit.html',\n        controller: 'CreateUnitController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.user', {\n        url: '/user',\n        templateUrl: 'app/pages/user/user.html',\n        controller: 'UserController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.faq', {\n        url: '/faq',\n        templateUrl: 'app/pages/faq/faq.html',\n        controller: 'FaqController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.category', {\n        url: '/faq/category',\n        templateUrl: 'app/pages/faq/category/category.html',\n        controller: 'CategoryController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.glossary', {\n        url: '/glossary',\n        templateUrl: 'app/pages/glossary/glossary.html',\n        controller: 'GlossaryController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.upload', {\n        url: '/glossary/upload',\n        templateUrl: 'app/pages/glossary/upload/upload.html',\n        controller: 'UploadTermsController',\n        controllerAs: 'vm'\n      })\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .constant('apiUrl', 'http://eg-api.tandu.it')\n    .constant('defaultBodyClasses', 'skin-purple-light sidebar-mini')\n    .constant('unitApiUrl', '/v1/units')\n    .constant('showLevelsApiUrl', '/v1/levels')\n    .constant('sectionApiUrl', '/v1/unit_sections_')\n    .constant('exercisesApiUrl', '/v1/exercises')\n    .constant('userApiUrl', '/v1/users')\n    .constant('faqCategoriesApiUrl', '/v1/faq_categories')\n    .constant('faqApiUrl', '/v1/faqs')\n    .constant('glossaryApiUrl', '/v1/glossary_items')\n})();\n\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig, $animateProvider, $locationProvider, $provide, $authProvider, apiUrl) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Animate only elements with class \"animate\"\n    $animateProvider.classNameFilter(/animate/);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = false;\n    toastrConfig.progressBar = false;\n    toastrConfig.toastClass =  'toast';\n\n    //Removes '#' from the URL\n    $locationProvider.html5Mode(true);\n    $locationProvider.hashPrefix('!');\n\n    $authProvider.configure({\n      apiUrl:                  apiUrl,\n      tokenValidationPath:     '/v1/auth/validate_token',\n      signOutUrl:              '/v1/auth/logout',\n      emailRegistrationPath:   '/v1/auth/register',\n      accountDeletePath:       '/v1/auth/delete_account',\n      passwordResetPath:       '/v1/auth/password',\n      passwordUpdatePath:      '/v1/auth/password',\n      passwordResetSuccessUrl: window.location.origin, //eslint-disable-line\n      emailSignInPath:         '/v1/auth/login'\n    });\n  }\n\n})();\n\nangular.module(\"englishGalore\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/ckeditorColor/ckeditorColor.html\",\"<div ckeditor=options ng-model=ckeditorColor.model></div>\");\n$templateCache.put(\"app/components/exerciseTextText/exerciseTextText.html\",\"<div class=separator></div><div class=col-sm-12><p><strong>Connetti frase/frase</strong></p></div><div class=col-sm-12><table class=\\\"table table-responsive\\\"><tbody><tr><th>Ordine</th><th>Frase in Italiano</th><th>Traduzione in Inglese</th><th></th></tr><tr><td width=80px><div class=form-group><input ng-init=\\\"exerciseTextText.exercise_text_text_item.item_number = 1\\\" ng-model=exerciseTextText.exercise_text_text_item.item_number name=item_number type=number class=form-control></div></td><td><div class=form-group><input ng-model=exerciseTextText.exercise_text_text_item.text_it name=text_it type=text class=form-control placeholder=\\\"Inserisci la frase in italiano\\\"></div></td><td><div class=form-group><input ng-model=exerciseTextText.exercise_text_text_item.text_en name=text_en type=text class=form-control placeholder=\\\"Inserisci la traduzione in inglese\\\"></div></td><td class=text-center width=93px><a role=button class=\\\"btn btn-sm btn-default accordion-toggle pull-right\\\" data-toggle=collapse ng-click=exerciseTextText.addRow()><i class=\\\"fa fa-plus\\\" aria-hidden=true></i></a></td></tr><tr ng-repeat-start=\\\"row in exerciseTextText.model | orderBy:\\'item_number\\'\\\" ng-if=\\\"row._destroy == false || !row._destroy\\\"><td>{{row.item_number}}</td><td>{{row.text_it}}</td><td>{{row.text_en}}</td><td><div class=\\\"pull-right opacity-transition\\\"><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse data-target=#open-text-row-{{exerciseTextText.idEx}}-{{$index}}><i class=\\\"fa fa-pencil\\\"></i> </a><a role=button class=\\\"btn btn-sm btn-danger\\\" ng-click=\\\"row._destroy=true\\\"><i class=\\\"fa fa-trash\\\"></i></a></div></td></tr><tr ng-repeat-end class=\\\"collapse background-gray\\\" id=open-text-row-{{exerciseTextText.idEx}}-{{$index}}><td colspan=8><div class=col-md-2><div class=form-group><label>Modifica Ordine</label><input ng-model=row.item_number name=item_number type=number class=form-control></div></div><div class=col-md-4><label>Modifica Frase in Italiano</label><input ng-model=row.text_it name=text_it type=text class=form-control placeholder=\\\"Inserisci la frase in italiano\\\"></div><div class=col-md-6><div class=form-group><label>Modifica Frase in Inglese</label><input ng-model=row.text_en name=text_en type=text class=form-control placeholder=\\\"Inserisci la traduzione in inglese\\\"></div></div></td></tr></tbody></table></div>\");\n$templateCache.put(\"app/components/exercise/exercise.html\",\"<div class=exercise><form name=formExercise ng-submit=exercise.submit() ng-model=exercise.form><div class=row><div class=col-sm-6><div class=from-group><label>Numero Esercizio</label><input ng-init=\\\"exercise.form.exercise_number = 1\\\" ng-model=exercise.form.exercise_number placeholder=\\\"Inserisci l\\'ordine dell\\'esercizio\\\" class=form-control required></div></div><div class=col-sm-6><div class=form-group><label>Tipologia Esercizio</label><select ng-init=\\\"exercise.form.exercise_type = exercise.data.selectedOption\\\" ng-model=exercise.form.exercise_type class=form-control ng-options=\\\"option.name for option in exercise.data.availableOptions track by option.id\\\" required></select></div></div></div><div class=row><div class=col-sm-6><div class=form-group ng-class=\\\"\\\"><label>Titolo Esercizio</label><input ng-model=exercise.form.title type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'esercizio\\\" required></div></div><div class=col-sm-6><div class=form-group ng-class=\\\"\\\"><label>Sottotitolo Esercizio</label><input ng-model=exercise.form.subtitle type=text class=form-control placeholder=\\\"Inserisci il sottotitolo dell\\'esercizio\\\" required></div></div></div><div class=row><div class=col-sm-6><div class=form-group><label for=\\\"\\\">Tip Esercizio</label><ckeditor-color model=exercise.form.exercise_tips></ckeditor-color><div class=separator></div><a ngf-select=exercise.uploadImageTipFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=exercise.form.image_tip><label><i class=\\\"fa fa-upload\\\"></i> Carica Immagine del Tip</label></a><div ng-if=exercise.form.image_tip.name class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><span class=file-name>{{exercise.form.image_tip.name}}</span> <span ng-click=exercise.removeFileTemp()><i class=\\\"fa fa-trash\\\"></i></span><br></div></div></div></div><div class=row><div class=col-sm-12><input type=submit class=\\\"btn btn-success pull-right\\\" value=\\\"Crea Esercizio\\\"></div></div></form><div ng-show=exercise.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div>\");\n$templateCache.put(\"app/components/exerciseImageText/exerciseImageText.html\",\"<div class=separator></div><div class=col-sm-12><p><strong>Connetti immagine/frase</strong></p></div><div class=col-sm-12><table class=\\\"table table-responsive\\\"><tbody><tr><th>Ordine</th><th>Immagine</th><th>Frase</th><th ng-if=\\\"exerciseImageText.type == 11\\\">Audio</th><th></th></tr><tr><td width=80px><div class=form-group><input ng-init=\\\"exerciseImageText.exercise_image_text_item.item_number = 1\\\" ng-model=exerciseImageText.exercise_image_text_item.item_number name=item_number type=number class=form-control></div></td><td ng-init=\\\"exerciseImageText.exercise_image_text_item.image = {}\\\"><a ngf-select=exerciseImageText.uploadImageFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=exerciseImageText.exercise_image_text_item.image><label><i class=\\\"fa fa-upload\\\"></i> Upload image</label></a><br><span ng-if=exerciseImageText.exercise_image_text_item.image.file.name>Immagine: {{exerciseImageText.exercise_image_text_item.image.file.name}}</span></td><td><div class=form-group><ckeditor-color model=exerciseImageText.exercise_image_text_item.text_en></ckeditor-color></div></td><td ng-init=\\\"exerciseImageText.exercise_image_text_item.audio = {}\\\" ng-if=\\\"exerciseImageText.type == 11\\\"><a ngf-select=exerciseImageText.uploadAudioFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=exerciseImageText.exercise_image_text_item.audio><label><i class=\\\"fa fa-upload\\\"></i> Upload audio</label></a><br><span ng-if=exerciseImageText.exercise_image_text_item.audio.file.name>Audio: {{exerciseImageText.exercise_image_text_item.audio.file.name}}</span></td><td width=93px><div class=pull-right><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse ng-click=exerciseImageText.addRow()><i class=\\\"fa fa-plus\\\" aria-hidden=true></i></a></div></td></tr><tr ng-repeat-start=\\\"row in exerciseImageText.model | orderBy:\\'item_number\\'\\\" ng-if=\\\"row._destroy == false || !row._destroy\\\"><td>{{row.item_number}}</td><td><a href={{row.image_url}} target=_blank ng-if=\\\"row.image_url && !row.image.file.name\\\">{{row.image_filename}} </a><span ng-if=row.image.file.name>{{row.image.file.name}}</span></td><td ng-bind-html=row.text_en></td><td ng-if=\\\"exerciseImageText.type == 11\\\"><a href={{row.audio_url}} target=_blank ng-if=\\\"row.audio_url && !row.audio.file.name\\\">{{row.audio_filename}} </a><span ng-if=row.audio.file.name>{{row.audio.file.name}}</span></td><td><div class=\\\"pull-right opacity-transition\\\"><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse data-target=#open-row-{{exerciseImageText.idex}}-{{$index}}><i class=\\\"fa fa-pencil\\\"></i> </a><a role=button class=\\\"btn btn-sm btn-danger\\\" ng-click=\\\"row._destroy=true\\\"><i class=\\\"fa fa-trash\\\"></i></a></div></td></tr><tr ng-repeat-end class=\\\"collapse background-gray\\\" id=open-row-{{exerciseImageText.idex}}-{{$index}} ng-if=!row._destroy><td colspan=8><div class=col-md-2><div class=form-group><label>Modifica Ordine</label><input ng-model=row.item_number name=item_number type=number class=form-control></div></div><div class=col-md-2><label>Modifica Immagine</label><br><span><a ngf-select=\\\"exerciseImageText.changeImageFile($file, row)\\\" ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=row.image><label><i class=\\\"fa fa-upload\\\"></i> Upload image</label></a></span><br><a href={{row.image_url}} target=_blank ng-if=\\\"row.image_url && !row.image.file.name\\\">{{row.image_filename}} </a><span ng-if=row.image.file.name>{{row.image.file.name}}</span></div><div class=col-md-6><div class=form-group><label>Modifica Frase</label><ckeditor-color model=row.text_en></ckeditor-color></div></div><div class=col-md-2 ng-if=\\\"exerciseImageText.type == 11\\\"><label>Modifica Audio</label><br><span><a ngf-select=\\\"exerciseImageText.changeAudioFile($file, row)\\\" ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=row.image><label><i class=\\\"fa fa-upload\\\"></i> Upload audio</label></a></span><br><a href={{row.audio_url}} target=_blank ng-if=\\\"row.audio_url && !row.audio.file.name\\\">{{row.audio_filename}} </a><span ng-if=row.audio.file.name>{{row.audio.file.name}}</span></div></td></tr></tbody></table></div>\");\n$templateCache.put(\"app/components/galoreSidebar/galoreSidebar.html\",\"<div class=main-sidebar><!-- Inner sidebar --><div class=sidebar><!-- Sidebar Menu --><ul class=sidebar-menu><!-- SECTION Main Menu --><!-- Home --><li class=treeview ng-class=sidebar.checkDashboard()><a ui-sref=main.admin.dashboard><i class=\\\"fa fa-dashboard\\\" aria-hidden=true></i> <span>Dashboard</span></a></li><!-- !Home --><!-- SECTION Livelli --><li ng-repeat=\\\"level in sidebar.models.levels | orderBy:\\'title\\'\\\" ng-class=sidebar.checkCurrentLevel(level)><a href=#><i ng-show=\\\"!sidebar.models.sidebar_mini || sidebar.models.sidebar_mini == false\\\" class=\\\"fa fa-circle\\\"></i><div ng-show=\\\"sidebar.models.sidebar_mini == true\\\">{{level.title}}</div><span>Livello {{level.title}}</span> <span class=pull-right-container><i class=\\\"fa fa-angle-left\\\"></i></span></a><ul class=treeview-menu><!-- Visualizza Unit --><li ng-repeat=\\\"unit in level.units | orderBy:[\\'unit_code\\',\\'sub_unit_code\\',\\'title\\']\\\" ng-class=sidebar.checkCurrentUnit(unit)><a id={{unit.id}} ui-sref=\\\"main.admin.unit({id: unit.id})\\\" ng-class=\\\"{\\'title-pubblicata\\': {{unit.published}} == true, \\'\\': {{unit.published}} == false}\\\" role=button><i ng-class=\\\"{\\'fa fa-circle-o title-pubblicata\\': {{unit.published}} == true, \\'fa fa-circle-o\\':{{unit.published}} == false}\\\"></i> <span ng-if=unit.sub_unit_code>Unit {{unit.unit_code}}.{{unit.sub_unit_code}} - {{ unit.title }} </span><span ng-if=!unit.sub_unit_code>Unit {{unit.unit_code}} - {{ unit.title }}</span></a></li><!-- Aggiungi Unit --><li ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.createUnit\\'}\\\"><a ng-click=sidebar.addUnit(level.id) role=button><i class=\\\"fa fa-plus\\\"></i> Aggiungi unit</a></li></ul></li><!-- !SECTION Livelli --><!-- SECTION Support --><!-- Users --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.user\\'}\\\"><a ui-sref=main.admin.user><i class=\\\"fa fa-users\\\" aria-hidden=true></i> <span>Utenti</span></a></li><!-- !Users --><!-- Glossario --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.glossary\\'}\\\"><a href=#><i class=\\\"fa fa-book\\\" aria-hidden=true></i> <span>Glossario</span> <span class=pull-right-container><i class=\\\"fa fa-angle-left\\\"></i></span></a><ul class=treeview-menu><li><a ui-sref=main.admin.glossary role=button><i class=\\\"fa fa-circle-o\\\"></i> Visualizza Glossario</a></li><li><a ui-sref=main.admin.upload><i class=\\\"fa fa-circle-o\\\"></i> Caricamento Massivo</a></li></ul></li><!-- !Glossario --><!-- Faq --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.faq\\'}\\\"><a href=#><i class=\\\"fa fa-comments-o\\\" aria-hidden=true></i> <span>Faq</span> <span class=pull-right-container><i class=\\\"fa fa-angle-left\\\"></i></span></a><ul class=treeview-menu><li><a ui-sref=main.admin.category role=button><i class=\\\"fa fa-circle-o\\\"></i> Categorie</a></li><li><a ui-sref=main.admin.faq><i class=\\\"fa fa-circle-o\\\"></i> Tutte le Faq</a></li></ul></li><!-- !Faq --><!-- !SECTION Support --></ul><!-- /.sidebar-menu --></div><!-- /.sidebar --></div><!-- /.main-sidebar -->\");\n$templateCache.put(\"app/components/galoreFooter/galoreFooter.html\",\"<footer class=main-footer><div class=\\\"pull-right hidden-xs\\\"><b>Version</b> 1.0.0</div><strong>Copyright  2016-2017 <a href=#>English Galore</a>.</strong> All rights reserved.</footer>\");\n$templateCache.put(\"app/components/galoreHeader/galoreHeader.html\",\"<header class=\\\"main-header galore-header\\\"><a ui-sref=main.admin.dashboard class=logo><!-- mini logo for sidebar mini 50x50 pixels --> <span class=logo-mini><img src=/assets/images/logo-sm.png></span><!-- logo for regular state and mobile devices --> <span class=logo-lg><img src=/assets/images/logo.png></span></a><nav class=\\\"navbar navbar-static-top\\\" role=navigation><!-- Sidebar toggle button--> <a href=# class=sidebar-toggle data-toggle=offcanvas role=button ng-click=\\\"isCollapse = !isCollapse; header.changeLevelsIcon(isCollapse)\\\"><span class=sr-only>Toggle navigation</span> </a><!-- Navbar Right Menu --><div class=navbar-custom-menu><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown user user-menu\\\"><a href=# class=dropdown-toggle data-toggle=dropdown aria-expanded=false><span class=hidden-xs><i class=\\\"fa fa-user\\\" aria-hidden=true></i> {{ header.models.current_user.firstname }} {{ header.models.current_user.lastname }}</span></a><ul class=dropdown-menu><!-- User image --><li class=user-header><img ng-src=\\\"{{ header.models.current_user.image || \\'/assets/images/logo-sm.png\\' }}\\\" ng-class=\\\"{\\'default-user-img\\': !header.models.current_user.image}\\\" class=img-circle alt=\\\"User Image\\\"><p>{{ header.models.current_user.email }}</p></li><!-- Menu Footer--><li class=user-footer><!-- <div class=\\\"pull-left\\\">\\n                <a ui-sref=\\\"main.admin.profile\\\" class=\\\"btn btn-default btn-flat\\\">Profilo</a>\\n              </div> --><div class=pull-right><a ui-sref=main.logout class=\\\"btn btn-default btn-flat\\\">Esci</a></div></li></ul></li></ul></div></nav></header>\");\n$templateCache.put(\"app/components/galoreUploader/galoreUploader.html\",\"<div class=galore-uploader ng-show=\\\"uploader.total.processing > 0\\\"><div class=summary ng-click=\\\"expanded = !expanded\\\"><i ng-class=\\\"{\\'fa-chevron-down\\': expanded, \\'fa-chevron-up\\': !expanded}\\\" class=fa></i> Processing {{ uploader.total.processing }} files: <span ng-show=uploader.total.queued>{{ uploader.total.queued }} queued </span><span ng-show=uploader.total.uploading>{{ uploader.total.uploading }} uploading </span><span ng-show=uploader.total.canceled>{{ uploader.total.canceled }} canceled </span><span ng-show=uploader.total.error>{{ uploader.total.error }} errors </span><span ng-show=uploader.total.success>{{ uploader.total.success }} done</span><div class=progress ng-show=\\\"!expanded && uploader.total.size > 0\\\"><div class=\\\"progress-bar progress-bar-striped progress-bar-primary active\\\" role=progressbar aria-valuenow=\\\"{{ uploader.total.percentage }}\\\" aria-valuemin=0 aria-valuemax=100 style=\\\"width: {{ uploader.total.percentage }}%\\\"></div></div></div><div class=details ng-show=expanded><div ng-repeat=\\\"file in uploader.files\\\"><div class=file-details>{{ file.name }} <i class=\\\"status-icon {{ file.status }}\\\"></i><div class=progress ng-show=\\\"file.status === \\'uploading\\'\\\"><div class=\\\"progress-bar progress-bar-striped progress-bar-primary active\\\" role=progressbar aria-valuenow=\\\"{{ file.percentage }}\\\" aria-valuemin=0 aria-valuemax=100 style=\\\"width: {{ file.percentage }}%\\\"></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionA/sectionA.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a data-toggle=collapse data-target=#intro aria-expanded=false class=\\\"collapsed title-active\\\" role=button ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>A) {{sectionA.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a></div><div id=intro box-expander=sectionA.form><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=sectionA.submit() ng-model=sectionA.form><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a data-target=#sec_a_tab_video data-toggle=tab aria-expanded=false role=button>Video</a></li></ul><div class=tab-content><div class=\\\"tab-pane tab-big active\\\" id=sec_a_tab_video><tab-video model=sectionA.form></tab-video></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --><div ng-show=sectionA.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></form></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionB/infoPopoverTemplate.html\",\"<div class=info-popover><p class=info-popover-title>Regole di inserimento</p><ul><li>I <strong>nomi dei personaggi</strong> devono essere contenuti tra i caratteri <strong>@</strong><br><span class=popover-example>es. @Pietro@</span></li><li>Le <strong>traduzioni</strong> devono essere tra parentesi quadre <strong>[...]</strong><br><span class=popover-example>es.[Chi  alla porta?]</span></li><li>Bisogna caricare <strong>un file audio per ogni pezzo di dialogo.</strong><br>Il nome del file audio associato alla porzione di dialogo <strong>va specificato dopo la fine del dialogo</strong> e devono essere contenuti tra i caratteri <strong>/</strong> <span class=popover-example>es. /1.1-r1.mp3/</span></li><li>Usare il carattere <strong>#</strong> per le <strong>frasi che non sono associate ad un personaggio</strong></li></ul></div>\");\n$templateCache.put(\"app/components/sectionB/sectionB.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a ng-class=\\\"{\\'title-active\\': sectionB.form.active}\\\" data-toggle=collapse role=button data-target=#sectionB aria-expanded=false class=collapsed ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>B) {{sectionB.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a><div class=pull-right><label class=switch ng-click=sectionB.changeStatusSection();$event.stopPropagation();><input type=checkbox ng-model=sectionB.form.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionB box-expander=sectionB.form.active><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=sectionB.submit() ng-model=sectionB.form novalidate><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a role=button data-target=#sec_b_tab_info data-toggle=tab aria-expanded=true>Info</a></li><li><a role=button data-target=#sec_b_tab_dialogo data-toggle=tab aria-expanded=false>Dialogo</a></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" id=sec_b_tab_info><tab-info-section model=sectionB.form></tab-info-section></div><div class=clear></div><!-- /.tab-pane --><div class=tab-pane id=sec_b_tab_dialogo><tab-dialogue model=sectionB.form></tab-dialogue><div class=separator></div></div><div class=clear></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --></form><div ng-show=sectionB.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionUnit/sectionUnit.html\",\"<div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a data-toggle=collapse data-target=#sectionUnit aria-expanded=false class=\\\"collapsed title-active\\\" role=button ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>Info Unit <i ng-class=\\\"{\\'fa fa-angle-up\\': !isCollapsed, \\'fa fa-angle-down\\': isCollapsed}\\\" aria-hidden=true></i></h4></a></div><div id=sectionUnit box-expander=sectionUnit.form class=\\\"panel-collapse collapse in\\\"><div class=box-body><form id=formIntroVideo name=formIntroVideo ng-submit=sectionUnit.submit(sectionUnit.form.id) ng-model=sectionUnit.form><div class=row id=tab_intro><div class=col-sm-6><div class=form-group><label>Codice Unit</label><input name=unit_code ng-model=sectionUnit.form.unit_code type=number class=form-control placeholder=\\\"Inserisci il codice dell\\'unit\\\" required><!-- <select\\n                    name = \\\"unit_code\\\"\\n                    ng-model=\\\"sectionUnit.form.unit_code\\\"\\n                    class=\\\"form-control\\\"\\n                    ng-options=\\\"n for n in [] | range:1:21\\\"\\n                  >\\n                  </select> --></div></div><div class=col-sm-6><div class=form-group><label>Sotto Codice Unit</label><!-- <select\\n                    name = \\\"sub_unit_code\\\"\\n                    ng-model=\\\"sectionUnit.form.sub_unit_code\\\"\\n                    class=\\\"form-control\\\"\\n                    ng-options=\\\"n for n in [] | range:1:21\\\"\\n                  >\\n                  </select> --> <input name=sub_unit_code ng-model=sectionUnit.form.sub_unit_code type=number class=form-control placeholder=\\\"Inserisci il sotto codice dell\\'unit\\\"></div></div><div class=col-sm-6><div class=form-group><label for=\\\"\\\">Titolo Unit</label><input name=title ng-model=sectionUnit.form.title type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'unit\\\" required></div></div></div><div class=row><div class=col-xs-12><input type=submit class=\\\"btn btn-default pull-right btn-blue\\\" value=\\\"Salva Info Unit\\\"> <input type=button ng-click=sectionUnit.destroy(sectionUnit.form.id) class=\\\"btn btn-success pull-right btn-red\\\" value=\\\"Elimina Unit\\\"></div></div><div ng-show=sectionUnit.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></form></div></div></div>\");\n$templateCache.put(\"app/components/sectionC/sectionC.html\",\"<div class=\\\"row sectionC\\\"><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a ng-class=\\\"{\\'title-active\\': sectionC.form.active}\\\" data-toggle=collapse role=button data-target=#sectionC aria-expanded=false class=collapsed ng-click=\\\"isCollapsed = !isCollapsed; sectionC.getExercises(isCollapsed)\\\"><h4 class=box-title>C) {{sectionC.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a><div class=pull-right><label class=switch ng-click=sectionC.changeStatusSection();$event.stopPropagation();><input type=checkbox ng-model=sectionC.form.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionC box-expander=sectionC.form.active><div class=box-body><div class=row><div class=col-xs-12><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active role=button><a data-target=#info-tab-c id=tab-c role=tab data-toggle=tab aria-expanded=false role=button>Info</a></li><li class=dropdown role=button><a data-target=# class=dropdown-toggle id=exercise-drop data-toggle=dropdown aria-controls=exercise-drop-contents aria-expanded=true role=button>Esercizi <span class=\\\"fa fa-angle-down\\\"></span></a><ul class=dropdown-menu aria-labelledby=exercise-drop id=exercise-drop-contents><li role=button><a data-target=#addExercise role=tab id=addExercise-tab data-toggle=tab aria-controls=addExercise aria-expanded=true><span class=\\\"fa fa-plus\\\"></span> Aggiungi esercizio</a></li><li ng-repeat=\\\"row in sectionC.models.current_unit_sections_c_exercises.exercises | orderBy:\\'exercise_number\\'\\\" id=row_{{row.id}} ng-if=\\\"row._destroyed == false || !row._destroyed\\\" role=button><a data-target=#ex-{{row.id}} id=ex-tab-{{row.id}} role=tab data-toggle=tab aria-controls=ex-{{row.id}}>{{row.title}}</a></li></ul></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" role=tabpanel id=info-tab-c><form id=formIntroVideo name=formIntroVideo ng-submit=sectionC.submit()><div class=row><tab-info-section model=sectionC.form></tab-info-section></div><input type=submit class=\\\"btn btn-success btn-save-section\\\" value=\\\"Salva Sezione\\\"></form></div><div class=\\\"tab-pane fade\\\" role=tabpanel id=addExercise aria-labelledby=addExercise-tab><exercise model=sectionC.form section=UnitSectionC currentsection=sectionC.models.current_unit_sections_c_exercises.exercises tabinfo=\\\"#sectionC #tab-c\\\"></exercise></div><div class=\\\"tab-pane fade\\\" role=tabpanel id=ex-{{rowC.id}} ng-repeat=\\\"rowC in sectionC.models.current_unit_sections_c_exercises.exercises | orderBy:\\'exercise_number\\'\\\"><exercise-show model=rowC section=UnitSectionC currentsection=sectionC.models.current_unit_sections_c_exercises.exercises section=UnitSectionC currenttab=#ex-tab-{{rowC.id}} tabinfo=#tab-c></exercise-show></div></div><div ng-show=sectionC.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div><!-- /.tab-content --></div><!-- nav-tabs-custom --></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionE/sectionE.html\",\"<div class=\\\"row sectionE\\\"><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a ng-class=\\\"{\\'title-active\\': sectionE.form.active}\\\" data-toggle=collapse role=button data-target=#sectionE aria-expanded=false class=collapsed ng-click=\\\"isCollapsed = !isCollapsed; sectionE.getExercises(isCollapsed)\\\"><h4 class=box-title>E) {{sectionE.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a><div class=pull-right><label class=switch ng-click=sectionE.changeStatusSection();$event.stopPropagation();><input type=checkbox ng-model=sectionE.form.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionE box-expander=sectionE.form.active><div class=box-body><div class=row><div class=col-xs-12><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active role=button><a data-target=#info-tab-e id=tab-e role=tab data-toggle=tab aria-expanded=false role=button>Info</a></li><li class=dropdown role=button><a data-target=# class=dropdown-toggle id=exercise-drop-e data-toggle=dropdown aria-controls=exercise-drop-e-contents aria-expanded=true role=button>Esercizi <span class=\\\"fa fa-angle-down\\\"></span></a><ul class=dropdown-menu aria-labelledby=exercise-drop-e id=exercise-drop-e-contents><li role=button><a data-target=#addExerciseE role=tab id=addExerciseE-tab data-toggle=tab aria-controls=addExerciseE aria-expanded=true><span class=\\\"fa fa-plus\\\"></span> Aggiungi esercizio</a></li><li ng-repeat=\\\"row in sectionE.models.current_unit_sections_e_exercises.exercises | orderBy:\\'exercise_number\\'\\\" id=row_{{row.id}} ng-if=\\\"row._destroyed == false || !row._destroyed\\\" role=button><a data-target=#ex-{{row.id}} id=ex-tab-{{row.id}} role=tab data-toggle=tab aria-controls=ex-{{row.id}}>{{row.title}}</a></li></ul></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" role=tabpanel id=info-tab-e><form id=formIntroVideo name=formIntroVideo ng-submit=sectionE.submit()><div class=row><tab-info-section model=sectionE.form></tab-info-section></div><input type=submit class=\\\"btn btn-success btn-save-section\\\" value=\\\"Salva Sezione\\\"></form></div><div class=\\\"tab-pane fade\\\" role=tabpanel id=addExerciseE aria-labelledby=addExerciseE-tab><exercise model=sectionE.form section=UnitSectionE currentsection=sectionE.models.current_unit_sections_e_exercises.exercises tabinfo=\\\"#sectionE #tab-e\\\"></exercise></div><div class=\\\"tab-pane fade\\\" role=tabpanel id=ex-{{rowE.id}} ng-repeat=\\\"rowE in sectionE.models.current_unit_sections_e_exercises.exercises | orderBy:\\'exercise_number\\'\\\"><exercise-show model=rowE section=UnitSectionE currentsection=sectionE.models.current_unit_sections_e_exercises.exercises section=UnitSectionE currenttab=#ex-tab-{{rowE.id}} tabinfo=#tab-e></exercise-show></div><div ng-show=sectionE.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div><!-- /.tab-content --></div><!-- nav-tabs-custom --></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionD/sectionD.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a ng-class=\\\"{\\'title-active\\': sectionD.form.active}\\\" data-toggle=collapse role=button data-target=#sectionD aria-expanded=false class=collapsed ng-click=\\\"isCollapsed = !isCollapsed; sectionD.getExercises(isCollapsed);\\\"><h4 class=box-title>D) {{sectionD.form.section_label}} <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=true></i></h4></a><div class=pull-right><label class=switch ng-click=sectionD.changeStatusSection();$event.stopPropagation();><input type=checkbox ng-model=sectionD.form.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionD box-expander=sectionD.form.active><div class=box-body><div class=row><div class=col-xs-12><div class=nav-tabs-custom><div ng-model=sectionD.form novalidate><ul class=\\\"nav nav-tabs\\\"><li class=active role=button><a data-target=#info-tab-d id=tab-d role=tab data-toggle=tab aria-expanded=false role=button>Info</a></li><li role=button><a data-target=#theory role=tab data-toggle=tab aria-expanded=false role=button>Teoria</a></li><li class=dropdown role=button><a data-target=# class=dropdown-toggle id=exercise-drop-d data-toggle=dropdown aria-controls=exercise-drop-d-contents aria-expanded=true role=button>Esercizi <span class=\\\"fa fa-angle-down\\\"></span></a><ul class=dropdown-menu aria-labelledby=exercise-drop-d id=exercise-drop-d-contents><li role=button><a data-target=#addExerciseD role=tab id=addExerciseD-tab data-toggle=tab aria-controls=addExerciseD aria-expanded=true><span class=\\\"fa fa-plus\\\"></span> Aggiungi esercizio</a></li><li ng-repeat=\\\"row in sectionD.models.current_unit_sections_d_exercises.exercises | orderBy:\\'exercise_number\\'\\\" id=row_{{row.id}} ng-if=\\\"row._destroyed == false || !row._destroyed\\\" role=button><a data-target=#ex-{{row.id}} id=ex-tab-{{row.id}} role=tab data-toggle=tab aria-controls=ex-{row.id}}>{{row.title}}</a></li></ul></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" role=tabpanel id=info-tab-d><tab-info-section model=sectionD.form></tab-info-section></div><div class=tab-pane role=tabpanel id=theory><tab-theory model=sectionD.form></tab-theory></div><div class=\\\"tab-pane fade\\\" role=tabpanel id=addExerciseD aria-labelledby=addExerciseD-tab><div class=content><exercise model=sectionD.form section=UnitSectionD currentsection=sectionD.models.current_unit_sections_d_exercises.exercises tabinfo=#tab-d></exercise></div></div><div class=\\\"tab-pane fade\\\" role=tabpanel id=ex-{{rowD.id}} ng-repeat=\\\"rowD in sectionD.models.current_unit_sections_d_exercises.exercises | orderBy:\\'exercise_number\\'\\\"><exercise-show model=rowD section=UnitSectionD currentsection=sectionD.models.current_unit_sections_d_exercises.exercises section=UnitSectionD currenttab=#ex-tab-{{rowD.id}} tabinfo=#tab-d></exercise-show></div></div></div><!-- /.tab-content --><div class=separator></div><div class=pull-right><div class=separator></div><input type=button class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\" ng-click=sectionD.submit()></div><div ng-show=sectionD.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div><!-- nav-tabs-custom --></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/tabTheory/tabTheory.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Titolo</label><input ng-model=tabTheory.model.theory_title name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il titolo\\\" required><span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo  obbligatorio</span></span></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': formIntroVideo[\\'name\\' + ($index+1)].$dirty && formIntroVideo[\\'name\\' + ($index+1)].$invalid}\\\"><label for=formIntroVideo-subUnitCod{{$index+1}}>Sottotitolo</label><input ng-model=tabTheory.model.theory_subtitle name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il sottotitolo\\\" required> <span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo  obbligatorio</span></span></div></div><div class=separator></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Testo</label><ckeditor-color model=tabTheory.model.theory_text></ckeditor-color></div><a ngf-select=tabTheory.uploadVideoFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=tabTheory.model.video><label><i class=\\\"fa fa-upload\\\"></i> Carica video</label></a><div ng-if=\\\"tabTheory.model.video_url && !tabTheory.model.video.name\\\" class=\\\"url-video-box tip-image\\\"><span>Video: </span><a href={{tabTheory.model.video_url}} target=_blank class=file-name>{{tabTheory.model.video_filename}}</a> <span ng-click=tabTheory.removeVideoCreated()><i class=\\\"fa fa-trash\\\"></i></span><br></div><div ng-if=tabTheory.model.video.name class=\\\"url-video-box tip-image\\\"><span>Video: </span><span class=file-name>{{tabTheory.model.video.name}}</span> <span ng-click=tabTheory.removeVideoTemp()><i class=\\\"fa fa-trash\\\"></i></span></div><div class=sm-separator></div><a ngf-select=tabTheory.uploadImageFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=tabTheory.model.image_theory><label><i class=\\\"fa fa-upload\\\"></i> Carica immagine</label></a><div ng-if=\\\"tabTheory.model.theory_image_url && !tabTheory.model.image_theory.name\\\" class=\\\"url-image_theory-box tip-image\\\"><span>Immagine: </span><a href={{tabTheory.model.theory_image_url}} target=_blank class=file-name>{{tabTheory.model.theory_image_filename}}</a> <span ng-click=tabTheory.removeFileCreated()><i class=\\\"fa fa-trash\\\"></i></span><br></div><div ng-if=tabTheory.model.image_theory.name class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><span class=file-name>{{tabTheory.model.image_theory.name}}</span> <span ng-click=tabTheory.removeFileTemp()><i class=\\\"fa fa-trash\\\"></i></span></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Tip Teoria</label><ckeditor-color model=tabTheory.model.theory_text_tips></ckeditor-color><div class=separator></div><a ngf-select=tabTheory.uploadImageTipFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=tabTheory.model.image_tip_theory><label><i class=\\\"fa fa-upload\\\"></i> Carica Immagine del Tip</label></a><div ng-if=\\\"tabTheory.model.theory_text_tips_image_url && !tabTheory.model.image_tip_theory.name\\\" class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><a href={{tabTheory.model.theory_text_tips_image_url}} target=_blank class=file-name>{{tabTheory.model.theory_text_tips_image_filename}}</a> <span ng-click=tabTheory.removeTipFileCreated()><i class=\\\"fa fa-trash\\\"></i></span><br></div><div ng-if=tabTheory.model.image_tip_theory.name class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><span class=file-name>{{tabTheory.model.image_tip_theory.name}}</span> <span ng-click=tabTheory.removeTipFileTemp()><i class=\\\"fa fa-trash\\\"></i></span><br></div></div></div>\");\n$templateCache.put(\"app/components/tabDialogue/tabDialogue.html\",\"<div class=col-sm-12><a ngf-select=tabDialogue.uploadAudioFile($files) ngf-multiple=true ngf-allow-dir=false class=upload-video-label instance=tabDialogue.model.files_audio><label><i class=\\\"fa fa-upload\\\"></i> Carica File Audio</label></a><div class=files-audio><ul class=list-inline><li ng-repeat=\\\"file in tabDialogue.model.files_audio | orderBy:\\'file.name\\'\\\" ng-if=!file._destroy>{{file.name}} <span ng-click=\\\"tabDialogue.removeFile(file, $index)\\\"><i class=\\\"fa fa-trash\\\"></i></span></li></ul></div><div class=files-audio ng-if=\\\"tabDialogue.model.audio_items.length > 0\\\">File Audio:<ul class=list-inline ng-init=\\\"tabDialogue.model.audio_items_temp = tabDialogue.model.audio_items\\\"><li ng-repeat=\\\"file in tabDialogue.model.audio_items_temp | orderBy:\\'file.name\\'\\\" ng-if=!file._destroy><a href={{file.audio_url}} target=_blank>{{file.audio_filename}}</a> <span ng-click=\\\"tabDialogue.removeFile(file, $index)\\\"><i class=\\\"fa fa-trash\\\"></i></span></li></ul></div></div><div class=separator></div><div class=col-sm-12><div class=form-group ng-class=\\\"\\\"><label for=\\\"\\\">Testo dialogo</label><button uib-popover-template=dynamicPopover.templateUrl type=button class=\\\"btn btn-default pull-right btn-popover-info\\\" popover-placement=right><i class=\\\"fa fa-info-circle\\\" aria-hidden=true></i></button><textarea rows=4 cols=50 ng-model=tabDialogue.model.dialogue name=dialogue type=text class=\\\"form-control textarea-dialogue\\\" placeholder=\\\"Inserisci il testo del dialogo\\\" required>\\n    </textarea></div></div><div class=separator></div><div class=col-sm-12><label for=\\\"\\\">Tip Dialogo</label><ckeditor-color model=tabDialogue.model.dialogue_tips></ckeditor-color><div class=separator></div><a ngf-select=tabDialogue.uploadImageTipFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=tabDialogue.model.image_tip><label><i class=\\\"fa fa-upload\\\"></i> Carica Immagine del Tip</label></a><div ng-if=\\\"tabDialogue.model.dialogue_tips_image_url && !tabDialogue.model.image_tip.name\\\" class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><a href={{tabDialogue.model.dialogue_tips_image_url}} target=_blank class=file-name>{{tabDialogue.model.dialogue_tips_image_filename}}</a> <span ng-click=tabDialogue.removeFileCreated()><i class=\\\"fa fa-trash\\\"></i></span><br></div><div ng-if=tabDialogue.model.image_tip.name class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><span class=file-name>{{tabDialogue.model.image_tip.name}}</span> <span ng-click=tabDialogue.removeFileTemp()><i class=\\\"fa fa-trash\\\"></i></span><br></div></div>\");\n$templateCache.put(\"app/components/tabInfoSection/tabInfoSection.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\"><label for=\\\"\\\">Titolo Sessione</label><input ng-model=model.title name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il titolo della sessione\\\"></div></div>\");\n$templateCache.put(\"app/components/tabTheoryInDepth/tabTheoryInDepth.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Titolo</label><input ng-model=model.theory_in_depth_title name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il titolo\\\"></div></div><div class=col-sm-6><div class=form-group><label>Sottotitolo</label><input ng-model=model.theory_in_depth_subtitle name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il sottotitolo\\\"></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Testo</label><ckeditor-color model=model.theory_in_depth_text></ckeditor-color></div></div>\");\n$templateCache.put(\"app/components/tabVideo/tabVideo.html\",\"<div class=col-sm-6><div class=form-group><label for=\\\"\\\">Titolo Video</label><input ng-model=tabVideo.model.video_title name=video_title type=text class=form-control placeholder=\\\"Inserisci il titolo del video\\\" required></div></div><div class=col-sm-6><div class=form-group><label>Sottotitolo Video</label><input ng-model=tabVideo.model.video_subtitle name=video_subtitle type=text class=form-control placeholder=\\\"Inserisci il sottotitolo del video\\\" required></div></div><div class=col-sm-6><a ngf-select=tabVideo.uploadVideoFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=tabVideo.model.video><label><i class=\\\"fa fa-upload\\\"></i> Carica video</label></a><div ng-if=\\\"tabVideo.model.video_url && !tabVideo.model.video.name\\\" class=url-video-box><span>Video: </span><a href={{tabVideo.model.video_url}} target=_blank>{{tabVideo.model.video_filename}}</a><br></div><div ng-if=tabVideo.model.video.name class=url-video-box><span>Video: </span>{{tabVideo.model.video.name}}</div></div><div class=col-sm-6><label for=\\\"\\\">Tip Video</label><br><ckeditor-color model=tabVideo.model.video_tips></ckeditor-color><div class=separator></div><a ngf-select=tabVideo.uploadImageTipFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=tabVideo.model.image_tip><label><i class=\\\"fa fa-upload\\\"></i> Carica Immagine del Tip</label></a><div ng-if=\\\"tabVideo.model.video_tips_image_url && !tabVideo.model.image_tip.name\\\" class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><a href={{tabVideo.model.video_tips_image_url}} target=_blank class=file-name>{{tabVideo.model.video_tips_image_filename}}</a> <span ng-click=tabVideo.removeFileCreated()><i class=\\\"fa fa-trash\\\"></i></span><br></div><div ng-if=tabVideo.model.image_tip.name class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><span class=file-name>{{tabVideo.model.image_tip.name}}</span> <span ng-click=tabVideo.removeFileTemp()><i class=\\\"fa fa-trash\\\"></i></span><br></div></div>\");\n$templateCache.put(\"app/pages/admin/admin.html\",\"<div class=wrapper ng-if=vm.loggedIn><galore-header></galore-header><galore-sidebar></galore-sidebar><galore-uploader></galore-uploader><div class=content-wrapper><div ui-view></div></div><galore-footer></galore-footer></div>\");\n$templateCache.put(\"app/components/uploadFile/uploadFile.html\",\"<input name=file type=file ng-model=model.video_url class=input-file>\");\n$templateCache.put(\"app/pages/dashboard/dashboard.html\",\"<div class=\\\"content events\\\"><div class=row><div class=col-xs-12><div class=\\\"box box-default\\\"><div class=box-header><div class=box-title>Dashboard</div></div></div><!-- /.box --></div></div></div>\");\n$templateCache.put(\"app/components/toggleSwitch/toggleSwitch.html\",\"<div class=toggle-switch><span class=title-pubblica>Pubblica:</span><div class=switch><input type=radio class=switch-input name=view value=true id=yes ng-checked=toggleSwitch.model.published ng-model=toggleSwitch.switch ng-init=\\\"toggleSwitch.switch = toggleSwitch.model.published\\\" ng-click=\\\"toggleSwitch.publish(); $event.preventDefault();\\\"><label for=yes class=\\\"switch-label switch-label-off\\\">Si</label><input type=radio class=switch-input name=view value=false id=no ng-checked=!toggleSwitch.model.published ng-model=toggleSwitch.switch ng-init=\\\"toggleSwitch.switch = toggleSwitch.model.published\\\" ng-click=\\\"toggleSwitch.unpublish(); $event.preventDefault();\\\"><label for=no class=\\\"switch-label switch-label-on\\\">No</label><span class=switch-selection></span></div></div>\");\n$templateCache.put(\"app/pages/faq/faq.html\",\"<section class=unit><section class=content-header><h1>Faq</h1></section><section class=content><div class=\\\"box box-default\\\"><div class=box-header><a data-toggle=collapse data-target=#addFaq aria-expanded=false class=\\\"collapsed title-active\\\" role=button ng-click=\\\"isCollapsedA = !isCollapsedA\\\"><h4 class=box-title>Aggiungi Faq <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsedA, \\'fa fa-angle-up\\': isCollapsedA}\\\" aria-hidden=true class=\\\"fa fa-angle-down\\\"></i></h4></a></div><div id=addFaq class=\\\"panel-collapse collapse\\\"><div class=box-body><form name=formCategory ng-model=vm.form><div class=row><div class=col-sm-6><div class=form-group><label>Ordine</label><input ng-model=vm.form.faq_number name=faq_number type=number class=form-control></div></div><div class=col-sm-6><div class=form-group><label>Categoria</label><select ng-init=\\\"vm.form.category_type = vm.models.faq_categories[0]\\\" ng-model=vm.form.category_type class=form-control ng-options=\\\"option.title for option in vm.models.faq_categories track by option.id\\\" ng-if=\\\"vm.models.faq_categories  && vm.models.faq_categories.length > 0\\\"></select><div ng-if=\\\"!vm.models.faq_categories || vm.models.faq_categories.length < 1\\\" class=label-create-faqcategory><a ui-sref=main.admin.category>Crea una categoria</a></div></div></div></div><div class=row><div class=col-sm-6><div class=form-group><label>Domanda</label><ckeditor-color model=vm.form.question></ckeditor-color></div></div><div class=col-sm-6><div class=form-group><label>Risposta</label><ckeditor-color model=vm.form.answer></ckeditor-color></div></div></div><div class=row><div class=col-sm-12><input type=button class=\\\"btn btn-success pull-right\\\" value=\\\"Aggiungi Faq\\\" ng-click=vm.addRow()></div></div></form><div ng-show=vm.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div></div></div><div class=\\\"box box-default\\\"><div class=box-header><a data-toggle=collapse data-target=#showFaq aria-expanded=false class=\\\"collapsed title-active\\\" role=button ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>Tutte le Faq <i ng-class=\\\"{\\'fa fa-angle-up\\': !isCollapsed, \\'fa fa-angle-down\\': isCollapsed}\\\" aria-hidden=true class=\\\"fa fa-angle-up\\\"></i></h4></a></div><div id=showFaq box-expander=\\\"\\\" class=\\\"panel-collapse collapse in ng-isolate-scope\\\"><div class=box-body><form name=showCategory ng-submit=vm.submit() ng-model=vm.form ng-if=\\\"vm.faqs.length > 0\\\"><div class=row><div class=col-xs-12><table class=\\\"table table-responsive\\\"><tbody><tr><th>Ordine</th><th>Domanda</th><th>Risposta</th><th>Categoria</th><th></th></tr><tr ng-repeat-start=\\\"row in vm.faqs  | orderBy:\\'faq_number\\'\\\" ng-if=\\\"row._destroy == false || !row._destroy\\\"><td ng-bind-html=row.faq_number></td><td ng-bind-html=row.question width=183></td><td ng-bind-html=row.answer></td><td width=200>{{row.category_type.title}}</td><td width=100><div class=\\\"pull-right opacity-transition\\\"><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse data-target=#open-text-row-{{row.id}}-{{$index}}><i class=\\\"fa fa-pencil\\\"></i> </a><a role=button class=\\\"btn btn-sm btn-danger\\\" ng-click=\\\"row._destroy=true\\\"><i class=\\\"fa fa-trash\\\"></i></a></div></td></tr><tr ng-repeat-end class=\\\"collapse background-gray\\\" id=open-text-row-{{row.id}}-{{$index}} ng-if=\\\"row._destroy == false || !row._destroy\\\"><td colspan=8><div class=separator></div><div class=col-sm-6><div class=form-group><label>Modifica Ordine</label><input ng-model=row.faq_number name=faq_number type=number class=form-control></div></div><div class=col-sm-6><div class=form-group><label>Modifica Categoria</label><select ng-init=\\\"row.category_type = row.category_temp\\\" ng-model=row.category_type class=form-control ng-options=\\\"option.title for option in vm.models.faq_categories track by option.id\\\" ng-if=\\\"vm.models.faq_categories  && vm.models.faq_categories.length > 0\\\"></select><div ng-if=\\\"!vm.models.faq_categories || vm.models.faq_categories.length < 1\\\" class=label-create-faqcategory><a ui-sref=main.admin.category>Crea una categoria</a></div></div></div><div class=col-sm-6><label>Modifica Domanda</label><ckeditor-color model=row.question></ckeditor-color></div><div class=col-sm-6><label>Modifica Risposta</label><ckeditor-color model=row.answer></ckeditor-color></div><div class=separator></div></td></tr></tbody></table></div></div><div class=row><div class=col-sm-12><input type=submit class=\\\"btn btn-success pull-right\\\" value=Salva></div></div></form><div ng-if=\\\"vm.faqs.length < 1\\\"><p>Nessuna Faq presente</p><div class=separator></div></div><div ng-show=vm.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div></div></div></section></section>\");\n$templateCache.put(\"app/pages/main/main.html\",\"<div class=animate ui-view></div>\");\n$templateCache.put(\"app/pages/createUnit/createUnit.html\",\"<section class=create-unit><section class=content-header><h1>Aggiungi unit</h1></section><section class=content><section-a></section-a><section-b></section-b><section-c></section-c><section-d></section-d><section-e></section-e></section></section>\");\n$templateCache.put(\"app/pages/profile/profile.html\",\"<div class=profile><section class=content-header><h1>Gestione Profilo</h1></section></div>\");\n$templateCache.put(\"app/pages/login/login.html\",\"<div class=\\\"login login-box\\\"><div class=login-logo><img src=/assets/images/logo-login.png alt=\\\"English Galore\\\"></div><!-- /.login-logo --><div class=login-box-body><p class=login-box-msg>Sign in to start your session</p><form id=loginForm name=loginForm ng-submit=vm.login()><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': loginForm.email.$dirty && loginForm.email.$invalid}\\\"><input ng-model=vm.user.email name=email type=email class=form-control placeholder=Email required> <span class=\\\"glyphicon glyphicon-envelope form-control-feedback\\\"></span> <span ng-show=loginForm.email.$dirty ng-messages=loginForm.email.$error class=help-block role=alert><span ng-message=required>Questo campo  obbligatorio</span> <span ng-message=email>Inserire un indirizzo email valido</span></span></div><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': loginForm.password.$dirty && loginForm.password.$invalid}\\\"><input ng-model=vm.user.password name=password type=password class=form-control placeholder=Password required> <span class=\\\"glyphicon glyphicon-lock form-control-feedback\\\"></span> <span ng-show=loginForm.password.$dirty ng-messages=loginForm.password.$error class=help-block role=alert><span ng-message=required>Questo campo  obbligatorio</span></span></div><div class=row><!-- /.col --><div class=col-xs-12><button ng-disabled=loginForm.$invalid type=submit class=\\\"btn btn-success btn-block btn-flat\\\">Sign In</button></div><!-- /.col --></div></form></div><!-- /.login-box-body --></div>\");\n$templateCache.put(\"app/pages/unit/unit.html\",\"<section class=unit><section class=content-header><h1>{{vm.models.current_unit.title}} <span ng-if=!vm.models.current_unit.published class=title-bozza>- Bozza</span> <span ng-if=vm.models.current_unit.published class=title-pubblicata>- Pubblicata</span></h1><div class=pull-right><toggle-switch model=vm.models.current_unit></toggle-switch></div></section><section class=content><section-unit unit=vm.models.current_unit></section-unit><section-a section=vm.models.current_unit_section_a></section-a><section-b section=vm.models.current_unit_section_b></section-b><section-c section=vm.models.current_unit_section_c></section-c><section-d section=vm.models.current_unit_section_d></section-d><section-e section=vm.models.current_unit_section_e></section-e></section></section>\");\n$templateCache.put(\"app/pages/glossary/glossary.html\",\"<section class=\\\"unit glossary\\\"><section class=content-header><h1>Glossario</h1></section><section class=content><div class=\\\"box box-default\\\"><div class=box-header><a data-toggle=collapse data-target=#showFaq aria-expanded=false class=\\\"collapsed title-active\\\" role=button ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>Tutte le voci <i ng-class=\\\"{\\'fa fa-angle-up\\': !isCollapsed, \\'fa fa-angle-down\\': isCollapsed}\\\" aria-hidden=true class=\\\"fa fa-angle-up\\\"></i></h4></a></div><div id=showFaq box-expander=\\\"\\\" class=\\\"panel-collapse collapse in ng-isolate-scope\\\"><div class=box-body><form name=showCategory ng-submit=vm.submit()><div class=row><div class=col-xs-12><table class=\\\"table table-responsive\\\"><tbody><tr><th>Trad_en</th><th>Desc_en</th><th>Trad_ita</th><th>Desc_ita</th><th>Nome_file</th><th>File_audio</th><th></th><th></th></tr><tr ng-show=\\\"vm.page == 1\\\"><td><div class=form-group><input ng-model=vm.form.trad_en name=trad_en type=text class=form-control></div></td><td><div class=form-group><input ng-model=vm.form.desc_en name=desc_en type=text class=form-control></div></td><td><div class=form-group><input ng-model=vm.form.trad_it name=trad_it type=text class=form-control></div></td><td><div class=form-group><input ng-model=vm.form.desc_it name=desc_it type=text class=form-control></div></td><td><div class=form-group><input ng-model=vm.form.audio_filename name=audio_filename type=text class=form-control></div></td><td><a ngf-select=vm.uploadAudioFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=vm.file_audio><label><i class=\\\"fa fa-upload\\\"></i> Carica</label></a></td><td><a role=button class=\\\"btn btn-sm btn-default accordion-toggle pull-right\\\" data-toggle=collapse ng-click=vm.addRow()><i class=\\\"fa fa-plus\\\" aria-hidden=true></i></a></td></tr><tr dir-paginate-start=\\\"row in vm.glossary_items[0].glossary_items  | itemsPerPage: 20\\\" current-page=vm.page total-items=vm.glossary_items[0].pagination.total ng-show=\\\"row._destroy == false || !row._destroy\\\"><td>{{row.trad_en}}</td><td>{{row.desc_en}}</td><td>{{row.trad_it}}</td><td>{{row.desc_it}}</td><td>{{row.audio_filename}}</td><td><div ng-if=\\\"row.audio_filename && row.audio_url && row.audio_present && !row.file_audio.name\\\" class=text-center><i role=button class=\\\"fa fa-volume-up\\\" aria-hidden=true ng-click=vm.playAudio(row.audio_url)></i></div><div ng-if=row.file_audio.name>{{row.file_audio.name}}</div></td><td width=100><div class=\\\"pull-right opacity-transition\\\"><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse data-target=#open-text-row-{{row.id}}-{{$index}}><i class=\\\"fa fa-pencil\\\"></i> </a><a role=button class=\\\"btn btn-sm btn-danger\\\" ng-click=vm.destroy(row)><i class=\\\"fa fa-trash\\\"></i></a></div></td></tr><tr dir-paginate-end class=\\\"collapse background-gray\\\" id=open-text-row-{{row.id}}-{{$index}} ng-show=\\\"row._destroy == false || !row._destroy\\\"><td colspan=8><div class=separator></div><div class=col-sm-4><div class=form-group><label>Modifica Trad_en</label><input ng-model=row.trad_en name=faq_number type=text class=form-control></div></div><div class=col-sm-4><div class=form-group><label>Modifica Desc_en</label><input ng-model=row.desc_en name=faq_number type=text class=form-control></div></div><div class=col-sm-4><div class=form-group><label>Modifica Trad_ita</label><input ng-model=row.trad_it name=faq_number type=text class=form-control></div></div><div class=col-sm-4><div class=form-group><label>Modifica Desc_ita</label><input ng-model=row.desc_it name=faq_number type=text class=form-control></div></div><div class=col-sm-4><div class=form-group><label>Modifica Nome_file</label><input ng-model=row.audio_filename name=faq_number type=text class=form-control></div></div><div class=\\\"col-sm-4 load-file-label\\\"><a ngf-select=\\\"vm.uploadAudioFileTemp($file, row.id)\\\" ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=row.file_audio><label><i class=\\\"fa fa-upload\\\"></i> Carica File Audio</label></a><br>{{row.file_audio.name}}</div><div class=separator></div></td></tr></tbody></table><dir-pagination-controls></dir-pagination-controls></div></div><div class=row><div class=col-sm-12><input type=submit class=\\\"btn btn-success pull-right\\\" value=Salva></div></div></form><div ng-show=vm.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div></div></div></section></section>\");\n$templateCache.put(\"app/pages/user/user.html\",\"<section class=unit><section class=content-header><h1>Utenti</h1></section><section class=content><div class=\\\"box box-default\\\"><div class=box-header><div class=box-tools><div class=\\\"input-group input-group-sm\\\" style=\\\"width: 150px\\\"><input type=text name=table_search class=\\\"form-control pull-right\\\" placeholder=Search ng-model=vm.model.search><div class=input-group-btn><button type=submit class=\\\"btn btn-default\\\"><i class=\\\"fa fa-search\\\"></i></button></div></div></div></div><div class=separator></div><div class=box-body><div class=row><div class=col-xs-12><table class=\\\"table table-responsive table-striped\\\"><tr><th>Nome</th><th>Email</th><th>Ruolo</th></tr><tr dir-paginate=\\\"user in vm.models.users[0].users  | filter:vm.model.search | itemsPerPage: 20\\\" current-page=vm.models.users[0].pagination.current_page total-items=vm.models.users[0].pagination.total><td>{{user.firstname}} {{user.lastname}}</td><td>{{user.email}}</td><td>{{user.role}}</td></tr></table></div></div></div><div class=\\\"box-footer clearfix\\\"><div class=pull-right><dir-pagination-controls on-page-change=vm.users.getUserPage(newPageNumber)></dir-pagination-controls></div></div></div></section></section>\");\n$templateCache.put(\"app/pages/faq/category/category.html\",\"<section class=unit><section class=content-header><h1>Categorie</h1></section><section class=content><div class=\\\"box box-default\\\"><div class=box-header></div><div class=box-body><form name=formCategory ng-submit=vm.submit() ng-model=vm.form><div class=row><div class=col-xs-12><table class=\\\"table table-responsive\\\"><tbody><tr><th>Ordine</th><th>Categoria</th><th></th></tr><tr><td width=80px><div class=form-group><input ng-model=vm.form.faq_category_number name=faq_category_number type=number class=form-control></div></td><td><div class=form-group><input ng-model=vm.form.title name=title type=text class=form-control placeholder=\\\"Inserisci la categoria\\\"></div></td><td class=text-center width=93px><a role=button class=\\\"btn btn-sm btn-default accordion-toggle pull-right\\\" data-toggle=collapse ng-click=vm.addRow()><i class=\\\"fa fa-plus\\\" aria-hidden=true></i></a></td></tr><tr ng-repeat-start=\\\"row in vm.faq_categories  | orderBy:\\'faq_category_number\\'\\\" ng-if=\\\"row._destroy == false || !row._destroy\\\"><td>{{row.faq_category_number}}</td><td>{{row.title}}</td><td><div class=\\\"pull-right opacity-transition\\\"><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse data-target=#open-text-row-{{row.id}}-{{$index}}><i class=\\\"fa fa-pencil\\\"></i> </a><a role=button class=\\\"btn btn-sm btn-danger\\\" ng-click=vm.destroy(row)><i class=\\\"fa fa-trash\\\"></i></a></div></td></tr><tr ng-repeat-end class=\\\"collapse background-gray\\\" id=open-text-row-{{row.id}}-{{$index}} ng-if=\\\"row._destroy == false || !row._destroy\\\"><td colspan=8><div class=col-md-2><div class=form-group><label>Modifica Ordine</label><input ng-model=row.faq_category_number name=faq_category_number type=number class=form-control></div></div><div class=col-md-9><label>Modifica Categoria</label><input ng-model=row.title name=title type=text class=form-control placeholder=\\\"Inserisci la categoria\\\"></div></td></tr></tbody></table></div></div><div class=row><div class=col-sm-12><input type=submit class=\\\"btn btn-success pull-right\\\" value=Salva></div></div></form></div><div ng-show=vm.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div></section></section>\");\n$templateCache.put(\"app/components/exercise/destroy/destroy.html\",\"<div class=modal-header><a role=button class=close ng-click=exerciseDestroy.cancel()><span aria-hidden=true></span></a><h3 class=modal-title>Sei sicuro?</h3></div><div class=modal-body>Questa operazione <strong>non  reversibile</strong>.</div><div class=modal-footer><a role=button class=\\\"btn btn-blue pull-left\\\" ng-click=exerciseDestroy.cancel()>Annulla</a> <a role=button class=\\\"btn btn-success btn-red\\\" ng-click=exerciseDestroy.ok()>Elimina esercizio</a></div>\");\n$templateCache.put(\"app/components/exercise/exerciseShow/exerciseShow.html\",\"<div class=\\\"content exercise\\\"><form ng-submit=exerciseShow.submit($event) ng-model=exerciseShow.form><div class=row><div class=col-sm-6><div class=form-group><input type=hidden ng-init=\\\"exerciseShow.form.id = exerciseShow.model.id\\\" ng-model=exerciseShow.form.id><label>Numero Esercizio</label><input ng-init=\\\"exerciseShow.form.exercise_number = exerciseShow.model.exercise_number\\\" ng-model=exerciseShow.form.exercise_number class=form-control required></div></div><div class=col-sm-6><div class=form-group><label>Tipologia Esercizio</label><select ng-init=\\\"exerciseShow.exercise_type_temp = {id: exerciseShow.model.exercise_type}\\\" ng-model=exerciseShow.exercise_type_temp class=form-control ng-options=\\\"option.name for option in exerciseShow.data.availableOptions track by option.id\\\" required></select></div></div><div class=col-sm-6><div class=form-group ng-class=\\\"\\\"><label>Titolo Esercizio</label><input ng-init=\\\"exerciseShow.form.title = exerciseShow.model.title\\\" ng-model=exerciseShow.form.title type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'esercizio\\\" required></div></div><div class=col-sm-6><div class=form-group ng-class=\\\"\\\"><label>Sottotitolo Esercizio</label><input ng-init=\\\"exerciseShow.form.subtitle = exerciseShow.model.subtitle\\\" ng-model=exerciseShow.form.subtitle type=text class=form-control placeholder=\\\"Inserisci il sottotitolo dell\\'esercizio\\\" required></div></div></div><div class=row><div class=col-sm-6><div class=form-group ng-init=\\\"exerciseShow.form.exercise_tips = exerciseShow.model.exercise_tips\\\"><label for=\\\"\\\">Tip Esercizio</label><ckeditor-color model=exerciseShow.form.exercise_tips></ckeditor-color><div class=separator></div><a ngf-select=exerciseShow.uploadImageTipFile($file) ngf-multiple=false ngf-allow-dir=false class=upload-video-label instance=exerciseShow.form.image_tip><label><i class=\\\"fa fa-upload\\\"></i> Carica Immagine del Tip</label></a><div ng-if=\\\"exerciseShow.model.exercise_tips_image_url && !exerciseShow.form.image_tip.name\\\" class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><a href={{exerciseShow.model.exercise_tips_image_url}} target=_blank class=file-name>{{exerciseShow.model.exercise_tips_image_filename}}</a> <span ng-click=exerciseShow.removeFileCreated()><i class=\\\"fa fa-trash\\\"></i></span><br></div><div ng-if=exerciseShow.form.image_tip.name class=\\\"url-video-box tip-image\\\"><span>Immagine: </span><span class=file-name>{{exerciseShow.form.image_tip.name}}</span> <span ng-click=exerciseShow.removeFileTemp()><i class=\\\"fa fa-trash\\\"></i></span><br></div></div></div><div class=col-sm-6 ng-if=\\\"(exerciseShow.exercise_type_temp.id > 0 && exerciseShow.exercise_type_temp.id < 6) || exerciseShow.exercise_type_temp.id === 8 || exerciseShow.exercise_type_temp.id === 10\\\"><div class=form-group ng-init=\\\"exerciseShow.form.exercise_text = exerciseShow.model.exercise_text\\\"><label for=\\\"\\\" ng-if=\\\"exerciseShow.exercise_type_temp.id != 10\\\">Testo Esercizio</label><label for=\\\"\\\" ng-if=\\\"exerciseShow.exercise_type_temp.id === 10\\\">Dialogo</label><textarea rows=4 cols=50 ng-model=exerciseShow.form.exercise_text name=dialogue type=text class=\\\"form-control textarea-dialogue\\\" placeholder=\\\"Inserisci il testo dell\\'esercizio\\\" required>\\n        </textarea><div class=\\\"col-sm-12 exercise-dialogue\\\" ng-if=\\\"exerciseShow.exercise_type_temp.id === 10\\\"><a ngf-select=exerciseShow.uploadAudioFile($files) ngf-multiple=true ngf-allow-dir=false class=upload-video-label instance=exerciseShow.form.files_audio><label><i class=\\\"fa fa-upload\\\"></i> Carica File Audio</label></a><div class=files-audio><ul class=list-inline><li ng-repeat=\\\"file in exerciseShow.form.files_audio | orderBy:\\'file.name\\'\\\" ng-if=!file._destroy>{{file.name}} <span ng-click=\\\"exerciseShow.removeFile(file, $index)\\\"><i class=\\\"fa fa-trash\\\"></i></span></li></ul></div><div class=files-audio ng-if=\\\"exerciseShow.model.exercise_audio_items.length > 0\\\">File Audio:<ul class=list-inline ng-init=\\\"exerciseShow.form.exercise_audio_items = exerciseShow.model.exercise_audio_items\\\"><li ng-repeat=\\\"file in exerciseShow.form.exercise_audio_items | orderBy:\\'file.name\\'\\\" ng-if=!file._destroy><a href={{file.audio_url}} target=_blank>{{file.audio_filename}}</a> <span ng-click=\\\"exerciseShow.removeFile(file, $index)\\\"><i class=\\\"fa fa-trash\\\"></i></span></li></ul></div></div></div></div><div class=separator></div><div ng-if=\\\"exerciseShow.exercise_type_temp.id === 6 || exerciseShow.exercise_type_temp.id === 9 || exerciseShow.exercise_type_temp.id === 11\\\"><exercise-image-text idex=exerciseShow.model.id type=exerciseShow.exercise_type_temp.id model=exerciseShow.form.exercise_image_text_items ng-init=\\\"exerciseShow.form.exercise_image_text_items = exerciseShow.model.exercise_image_text_items\\\"></exercise-image-text></div><div ng-if=\\\"exerciseShow.exercise_type_temp.id === 7\\\"><exercise-text-text idex=exerciseShow.model.id model=exerciseShow.exercise_text_text_items ng-init=\\\"exerciseShow.exercise_text_text_items = exerciseShow.model.exercise_text_text_items\\\"></exercise-text-text></div><div class=separator></div><div class=row><div class=col-sm-12><input type=submit class=\\\"btn btn-success pull-right btn-blue\\\" value=\\\"Salva Esercizio\\\"> <input type=button ng-click=exerciseShow.destroy(exerciseShow.form.id) class=\\\"btn btn-success pull-right btn-red\\\" value=\\\"Elimina Esercizio\\\"></div></div><div ng-show=exerciseShow.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div></form></div>\");\n$templateCache.put(\"app/pages/unit/destroy/destroy.html\",\"<div class=modal-header><a role=button class=close ng-click=unitDestroy.cancel()><span aria-hidden=true></span></a><h3 class=modal-title>Sei sicuro?</h3></div><div class=modal-body>Se elimini questa unit, verranno eliminate anche tutte le sezioni associate.<br>Questa operazione <strong>non  reversibile</strong>.</div><div class=modal-footer><a role=button class=\\\"btn btn-blue pull-left\\\" ng-click=unitDestroy.cancel()>Annulla</a> <a role=button class=\\\"btn btn-success btn-red\\\" ng-click=unitDestroy.ok()>Elimina unit</a></div>\");\n$templateCache.put(\"app/pages/glossary/upload/upload.html\",\"<section class=\\\"unit glossary\\\"><section class=content-header><h1>Glossario - Caricamento massivo</h1></section><section class=content><div class=\\\"box box-default\\\"><div class=box-header><a data-toggle=collapse data-target=#uploadFile aria-expanded=false class=title-active role=button ng-click=\\\"isCollapsedA = !isCollapsedA\\\"><h4 class=box-title>1) Carica File Audio <i ng-class=\\\"{\\'fa fa-angle-up\\': !isCollapsedA, \\'fa fa-angle-down\\': isCollapsedA}\\\" aria-hidden=true class=\\\"fa fa-angle-up\\\"></i></h4></a></div><div id=uploadFile class=\\\"panel-collapse collapse in\\\"><div class=box-body><div class=col-sm-12><a ngf-select=vm.uploadAudioFile($files) ngf-multiple=true ngf-allow-dir=false class=upload-video-label instance=vm.files_audio><label><i class=\\\"fa fa-upload\\\"></i> Carica</label></a><div class=files-audio><ul class=list-inline><li ng-repeat=\\\"file in vm.files_audio | orderBy:\\'file.name\\'\\\" ng-if=!file._destroy>{{file.name}} <span ng-click=vm.removeFile($index)><i class=\\\"fa fa-trash\\\"></i></span></li></ul></div></div></div></div></div><div class=\\\"box box-default\\\"><div class=box-header><a data-toggle=collapse data-target=#showGlossary aria-expanded=false class=title-active role=button ng-click=\\\"isCollapsed = !isCollapsed\\\"><h4 class=box-title>2) Carica File CSV <i ng-class=\\\"{\\'fa fa-angle-up\\': !isCollapsed, \\'fa fa-angle-down\\': isCollapsed}\\\" aria-hidden=true class=\\\"fa fa-angle-up\\\"></i></h4></a></div><div id=showGlossary box-expander=\\\"\\\" class=\\\"panel-collapse collapse in\\\"><div class=box-body><ng-csv-import content=vm.content class=import-csv header=false separator=vm.separator result=vm.result accept=vm.accept callback=vm.csvCallback></ng-csv-import><span class=\\\"check-file pull-right\\\" ng-if=\\\"vm.result && vm.result.length > 0\\\" ng-click=vm.checkFile()><i class=\\\"fa fa-exchange\\\" aria-hidden=true></i> Check File</span><div class=separator></div><form name=showCategory ng-if=\\\"vm.result && vm.result.length > 0\\\"><div class=row><div class=col-xs-12><table class=\\\"table table-responsive\\\"><tbody><tr><th>Trad_en</th><th>Desc_en</th><th>Trad_ita</th><th>Desc_ita</th><th>Nome_file</th><th>File_caricato</th><th></th></tr><tr ng-repeat-start=\\\"row in vm.result  | orderBy:\\'faq_number\\'\\\" ng-if=\\\"row._destroy == false || !row._destroy\\\"><td>{{row[0]}}</td><td>{{row[1]}}</td><td>{{row[2]}}</td><td>{{row[3]}}</td><td>{{row[4]}}</td><td width=50 class=text-center><span ng-if=row.check><i class=\\\"fa fa-check\\\" aria-hidden=true></i></span> <span ng-if=\\\"row.check == false\\\"><i class=\\\"fa fa-times\\\" aria-hidden=true></i></span></td><td width=100><div class=\\\"pull-right opacity-transition\\\"><a role=button class=\\\"btn btn-sm btn-default accordion-toggle\\\" data-toggle=collapse data-target=#open-text-row-{{row.id}}-{{$index}}><i class=\\\"fa fa-pencil\\\"></i> </a><a role=button class=\\\"btn btn-sm btn-danger\\\" ng-click=\\\"row._destroy=true\\\"><i class=\\\"fa fa-trash\\\"></i></a></div></td></tr><tr ng-repeat-end class=\\\"collapse background-gray\\\" id=open-text-row-{{row.id}}-{{$index}}><td colspan=8><div class=separator></div><div class=col-sm-4><div class=form-group><label>Modifica Trad_en</label><input ng-model=row[0] name=faq_number type=text class=form-control></div></div><div class=col-sm-4><div class=form-group><label>Modifica Desc_en</label><input ng-model=row[1] name=faq_number type=text class=form-control></div></div><div class=col-sm-4><div class=form-group><label>Modifica Trad_ita</label><input ng-model=row[2] name=faq_number type=text class=form-control></div></div><div class=col-sm-4><div class=form-group><label>Modifica Desc_ita</label><input ng-model=row[3] name=faq_number type=text class=form-control></div></div><div class=col-sm-4><div class=form-group><label>Modifica Nome_file</label><input ng-model=row[4] name=faq_number type=text class=form-control></div></div><div class=separator></div></td></tr></tbody></table></div></div></form><div ng-show=vm.loading class=\\\"overlay absolute fill\\\"><i class=\\\"fa fa-refresh fa-spin\\\"></i></div></div></div></div><div class=row><div class=col-sm-12><input type=button class=\\\"btn btn-success pull-right\\\" ng-click=vm.submit() value=Salva></div></div></section></section>\");\n$templateCache.put(\"app/pages/faq/category/destroy/destroy.html\",\"<div class=modal-header><a role=button class=close ng-click=faqCategoryDestroy.cancel()><span aria-hidden=true></span></a><h3 class=modal-title>Sei sicuro?</h3></div><div class=modal-body>Eliminando la categoria verranno eliminate tutte le Faq associate.<br>Questa operazione <strong>non  reversibile</strong>.</div><div class=modal-footer><a role=button class=\\\"btn btn-blue pull-left\\\" ng-click=faqCategoryDestroy.cancel()>Annulla</a> <a role=button class=\\\"btn btn-success btn-red\\\" ng-click=faqCategoryDestroy.ok()>Elimina</a></div>\");}]);"],"sourceRoot":"/source/"}