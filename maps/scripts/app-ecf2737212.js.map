{"version":3,"sources":["scripts/app.js"],"names":["angular","module","UnitController","models","units","$stateParams","vm","this","show","id","then","res","unit","unit_section_a","getSectionA","level_id","unit_section_b","getSectionB","unit_section_c","getSectionC","unit_section_d","getSectionD","unit_section_e","getSectionE","$inject","controller","ProfileController","LoginController","users","$state","galoreApi","errorManager","user","login","go","CreateUnitController","newUnit","title","unit_code","sub_unit_code","RangeFilter","input","min","max","parseInt","i","push","filter","AdminController","factory","utils","findFirst","array","length","findFirstByName","name","removeFirst","found","splice","sortByOrder","isArray","sort","a","b","order","mergeOrPush","elem","added","merge","file","UploadFileController","$http","UploadFileLink","scope","el","bind","event","files","target","$parent","$apply","directive","restrict","link","controllerAs","bindToController","uiState","tabTheoryInDepth","templateUrl","model","tabTheory","tabInfoSection","tabExercise","sectionUnit","SectionUnitController","$q","$scope","setLoading","loading","resolve","unsetLoading","submit","form","current_unit","update","SectionALink","attrs","replace","sectionE","sectionD","sectionC","sectionB","sectionA","SectionAController","uploadVideo","filename","type","reject","uploadVideoS3","upload_url","current_unit_section_a","updateSection","longTermMemory","$log","apiUrl","resPipe","parseResponse","helpers","validModels","_model","injectDefaults","fetchModel","forEachModel","injectProjectDefaults","injectUserDefaults","markReload","m","_reload","markDestroyed","_destroyed","sortFramesAndComments","forEach","project","sortFramesAndCommentsSingle","sortFramesCache","getRelatedProject","frames","sortCommentsCache","frame","getRelatedFrame","comments","updateCache","level","updateModelCache","levels","getRelatedLevel","current_unit_section_b","current_unit_section_c","current_unit_section_d","current_unit_section_e","cleanCache","current_user","pruneProjectCache","projects","ids","newCache","indexOf","owner","forcePruneProjectCache","removeFromCache","removeProjectFileFromCache","setProjectAsMine","setProjectAsMineSingle","setAsCurrent","humanize","humanizeProject","memorizeCache","v","k","memorize","sideEffects","side_effects","project_files","warn","log","info","debugger","_project_id","_frame_id","func","image","download_url","privateString","modelCache","newData","merged","key","val","localStorage","toJson","remember","fromJson","e","forget","oblivion","clear","galoreSidebar","$timeout","SidebarController","state","addUnit","create","SidebarLink","element","window","trigger","galoreHeader","HeaderController","HeaderLink","galoreFooter","FooterController","FooterLink","$auth","unitApiUrl","showLevelsApiUrl","sectionApiUrl","cache","cacheOrHttp","method","url","data","headers","keep","absUrl","config","toUpperCase","promise","err","response","expect200","status","galoreoApi","submitLogin","getMe","logout","signOut","changePassword","updatePassword","createUnit","showUnit","indexLevels","updateUnit","section","section_id","file_type","Content-Type","if-modified-since","undefined","exerciseDialogue","exerciseDialogueController","dynamicPopover","editableTextAngular","editableDirectiveFactory","directiveName","inputTpl","addListeners","self","parent","call","single","buttons","autosubmit","inputEl","ctrlKey","metaKey","keyCode","$form","$submit","toastr","error","isObject","getErrorString","isString","full_messages","error_description","errors","msg","myErr","join","reset","boxExpander","boxExpanderLink","addClass","$watch","newVal","oldVal","collapse","instanceCondition","action","resource","instance","perms","can","cond","instanceConditions","canManage","manage","canUpdate","canShow","canIndex","index","customCan","canDirective","linkFunc","attr","watcher","shown","negative","updateVisibility","toShow","removeClass","parsed","split","slice","substr","$on","me","updateMe","addInstanceConditions","getInstanceConditions","debug","destroy","destroyProject","memorizeProjects","createProjectFile","projectId","project_file","destroyProjectFile","setByName","currentProject","form2Section","formData","isDefined","section_title","active","video_title","video_subtitle","video_tips","video_url","runBlock","$rootScope","defaultBodyClasses","stateChangeSuccess","toState","pms","params","bodyClasses","run","routerConfig","$stateProvider","$urlRouterProvider","abstract","currentUser","validateUser","signedIn","levelsData","onEnter","otherwise","constant","$logProvider","toastrConfig","$animateProvider","$locationProvider","$provide","$authProvider","debugEnabled","classNameFilter","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","html5Mode","hashPrefix","configure","tokenValidationPath","signOutUrl","emailRegistrationPath","accountDeletePath","passwordResetPath","passwordUpdatePath","passwordResetSuccessUrl","location","origin","emailSignInPath","decorator","taRegisterTool","taOptions","toolbar","$templateCache","put"],"mappings":"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","file":"scripts/app-ecf2737212.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore', [\n      'ngAnimate',\n      'ngCookies',\n      'ngSanitize',\n      'ngMessages',\n      'ui.router',\n      'toastr',\n      'ui.bootstrap',\n      'textAngular',\n      'ng-token-auth'\n      ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('UnitController', UnitController);\n\n  /** @ngInject */\n  function UnitController(models, units, $stateParams) {\n    var vm = this;\n    vm.models = models;\n\n     units\n      .show($stateParams.id)\n      .then(function(res){\n        if(res.unit.unit_section_a){\n          units.getSectionA(res.unit.level_id)\n        }\n        if(res.unit.unit_section_b){\n          units.getSectionB(res.unit.level_id)\n        }\n        if(res.unit.unit_section_c){\n          units.getSectionC(res.unit.level_id)\n        }\n        if(res.unit.unit_section_d){\n          units.getSectionD(res.unit.level_id)\n        }\n        if(res.unit.unit_section_e){\n          units.getSectionE(res.unit.level_id)\n        }\n      });\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('ProfileController', ProfileController);\n\n  /** @ngInject */\n  function ProfileController(models) {\n    var vm = this;\n    vm.models = models;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('LoginController', LoginController);\n\n  /** @ngInject */\n  function LoginController(users, $state, galoreApi, errorManager) {\n    var vm = this;\n\n    vm.user = vm.user || {};\n\n    // Login with username and password\n    vm.login = function () {\n      galoreApi\n        .login(vm.user)\n        .then(function () {\n          $state.go('main.admin.dashboard');\n        })\n        .catch(errorManager);\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('CreateUnitController', CreateUnitController)\n    .filter('range', RangeFilter);\n\n  /** @ngInject */\n  function CreateUnitController(models) {\n    var vm = this;\n    vm.models = models;\n    vm.newUnit = {\n      \"level_id\": 1,\n      \"title\": \"Titolo\",\n      \"unit_code\": 1,\n      \"sub_unit_code\": 3\n    };\n  }\n\n  function RangeFilter(){\n    return function(input, min, max) {\n        min = parseInt(min);\n        max = parseInt(max);\n        for (var i=min; i<max; i++)\n          input.push(i);\n        return input;\n      };\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .controller('AdminController', AdminController)\n\n  /** @ngInject */\n  function AdminController(models) {\n    var vm = this;\n\n    vm.models = models;\n  }\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * UI state service.\n   * Keep application-wide shared variables\n   */\n  .factory('utils', function () {\n    var utils = {\n      /**\n       * Find the first occurrence of an object (given an 'id' field) in an array\n       */\n      findFirst: function(array,id) {\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].id === id){\n            return array[i];\n          }\n        }\n        return null;\n      },\n\n      /**\n       * Find the first occurrence of an object (given a 'name' field) in an array\n       */\n      findFirstByName: function(array,name) {\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].name === name){\n            return array[i];\n          }\n        }\n        return null;\n      },\n\n      /**\n      * Remove the first occurence of a an object (given an 'id' field) in an array\n      */\n      removeFirst: function (array, id) {\n        var found = false;\n        for (var i = 0; i < array.length; i++) {\n          if(array[i].id === id){\n            found = i;\n            break;\n          }\n        }\n        array.splice(found,1);\n      },\n\n      /**\n       * Sort given array by 'order' key\n       */\n      sortByOrder: function(array) {\n        if(angular.isArray(array)){\n          return array.sort(function(a,b) {\n            if(a.order > b.order){\n              return 1;\n            }\n            if(a.order < b.order){\n              return -1;\n            }\n            return 0;\n          });\n        }\n        return array;\n      },\n\n      /**\n       * Try to merge elem to a target object with the same id in array\n       * If the target doesn't exist, push elem in the array\n       */\n      mergeOrPush: function(array,elem) {\n        var added = utils.merge(array, elem);\n        if(!added){\n          added = elem;\n          array.push(added);\n        }\n        return added;\n      },\n\n      /**\n       * Merge elem to a target object with the same id in array\n       * If the target doesn't exist, return null\n       */\n      merge: function(array, elem) {\n        var found = utils.findFirst(array, elem.id);\n        if(found){\n          angular.merge(found, elem);\n        }\n        return found;\n      }\n    };\n\n    return utils;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('file', file);\n\n  /** @ngInject */\n  function file() {\n    var directive = {\n      restrict: 'AE',\n      link: UploadFileLink,\n      controller: UploadFileController,\n      controllerAs: 'file',\n      bindToController: true,\n      scope:{\n        file: '@'\n      }\n    };\n\n    return directive;\n\n\n    /** @ngInject */\n    function UploadFileController(models, $http) {\n\n      var vm = this;\n      vm.models = models;\n\n    }\n\n\n    function UploadFileLink(scope, el) {\n      el.bind('change', function(event){\n          var files = event.target.files;\n          var file = files[0];\n          scope.file = file;\n          scope.$parent.file = file;\n          scope.$apply();\n        });\n    }\n\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * UI state service.\n   * Keep application-wide shared variables\n   */\n  .factory('uiState', function () {\n    var uiState = {};\n\n    return uiState;\n  });\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabTheoryInDepth', tabTheoryInDepth);\n\n    /** @ngInject */\n    function tabTheoryInDepth(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabTheoryInDepth/tabTheoryInDepth.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabTheory', tabTheory);\n\n    /** @ngInject */\n    function tabTheory(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabTheory/tabTheory.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabInfoSection', tabInfoSection);\n\n    /** @ngInject */\n    function tabInfoSection(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabInfoSection/tabInfoSection.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('tabExercise', tabExercise);\n\n    /** @ngInject */\n    function tabExercise(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/tabExercise/tabExercise.html',\n        scope:{\n          model: '='\n        }\n      };\n\n      return directive;\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionUnit', sectionUnit);\n\n  /** @ngInject */\n  function sectionUnit() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/sectionUnit/sectionUnit.html',\n      controller: SectionUnitController,\n      controllerAs: 'sectionUnit',\n      bindToController: true,\n      link: SectionALink,\n      replace: true,\n      scope: {\n        event: '=sectionUnit'\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionUnitController(models, $state, units, $q, $scope, $http) {\n      var vm = this;\n      vm.models = models;\n\n      vm.setLoading = function () {\n        vm.loading = true;\n        return $q.resolve();\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submit = function (id) {\n\n        return vm.setLoading()\n        .then(function(){\n          delete vm.form.current_unit.unit['_reload'];\n          units.update(id, {'unit': vm.form.current_unit.unit});\n        })\n      }\n\n    }\n\n    function SectionALink(scope, el, attrs, vm) {\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionE', sectionE);\n\n  /** @ngInject */\n  function sectionE() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionE/sectionE.html'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionD', sectionD);\n\n  /** @ngInject */\n  function sectionD() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionD/sectionD.html'\n    };\n\n    return directive;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionC', sectionC);\n\n  /** @ngInject */\n  function sectionC() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionC/sectionC.html'\n    };\n\n    return directive;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionB', sectionB);\n\n  /** @ngInject */\n  function sectionB() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/sectionB/sectionB.html'\n    };\n\n    return directive;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('sectionA', sectionA);\n\n  /** @ngInject */\n  function sectionA() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/sectionA/sectionA.html',\n      controller: SectionAController,\n      controllerAs: 'sectionA',\n      bindToController: true,\n      link: SectionALink,\n      replace: true,\n      scope: {\n        event: '=sectionA'\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SectionAController(models, $state, units, $q, $scope, $http) {\n      var vm = this;\n      vm.models = models;\n\n      vm.setLoading = function () {\n        vm.loading = true;\n        return $q.resolve();\n      }\n\n      vm.unsetLoading = function (res) {\n        vm.loading = false;\n        return $q.resolve(res);\n      }\n\n      vm.submit = function (id) {\n\n        return vm.setLoading()\n        .then(function(){\n          if($scope.file){\n            return units.uploadVideo('a', id, { filename: $scope.file.name, type: $scope.file.type })\n          }else{\n            return $q.reject();\n          }\n        })\n        .then(function(res){\n          return units.uploadVideoS3(res.upload_url, $scope.file.type, $scope.file)\n        })\n        .then(function(){\n          delete vm.form.current_unit_section_a.unit_section_a['_reload'];\n          units.updateSection('a',id,{'unit_section_a': vm.form.current_unit_section_a.unit_section_a});\n        })\n        .catch(function(){\n          delete vm.form.current_unit_section_a.unit_section_a['_reload'];\n          return units.updateSection('a',id, {'unit_section_a':vm.form.current_unit_section_a.unit_section_a});\n        })\n      }\n\n    }\n\n    function SectionALink(scope, el, attrs, vm) {\n    }\n\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Response management pipeline.\n   * Utilities to process a response from the moment it arrives to the models update.\n   * To use in a promise chain as a pipeline\n   */\n  .factory('resPipe', function (longTermMemory, models, utils, $log, apiUrl) {\n    var resPipe = {\n\n      /**\n       * Parse the initial response\n       */\n      parseResponse: function(res) {\n        // Look for a valid model inside the response\n        for (var i = 0; i < helpers.validModels.length; i++) {\n          if(res[helpers.validModels[i]]){\n            res._model = helpers.validModels[i]; // Put the name of the model in res._model\n            break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Inject some default values inside the response\n       */\n      injectDefaults: function(res) {\n        // Parse the model depending of its nature\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'projects':\n            case 'project':\n              helpers.forEachModel(model, helpers.injectProjectDefaults);\n              break;\n            case 'users':\n            case 'user':\n              helpers.forEachModel(model, helpers.injectUserDefaults);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n      * Mark the model as to be reloaded. This allows the resPipe to delete it\n      * from cache (if present) and to add it again\n      */\n      markReload: function (res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, function (m) {\n          m._reload = true;\n        });\n        return res;\n      },\n\n\n      /**\n      * Mark the model as destroyed. This allows the resPipe to delete it\n      * from cache (if present)\n      */\n      markDestroyed: function (res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, function (m) {\n          m._destroyed = true;\n        });\n        return res;\n      },\n\n      /**\n       * Sort frames and comments in projects\n       */\n      sortFramesAndComments: function(res) {\n        var model = helpers.fetchModel(res);\n        if(angular.isArray(model)){\n          angular.forEach(model, function(project) {\n            helpers.sortFramesAndCommentsSingle(project);\n          });\n        }\n        else if(model){\n          helpers.sortFramesAndCommentsSingle(model);\n        }\n        return res;\n      },\n\n      /**\n       * Sort frames in cache\n       */\n      sortFramesCache: function(res) {\n        var project = helpers.getRelatedProject(res);\n        if(project && project.frames){\n          utils.sortByOrder(project.frames);\n        }\n        return res;\n      },\n\n      /**\n       * Sort Comments given order\n       */\n      sortCommentsCache: function(res) {\n        var frame = helpers.getRelatedFrame(res);\n        if(frame && frame.comments){\n          utils.sortByOrder(frame.comments);\n        }\n        return res;\n      },\n\n      /**\n       * Update models cache\n       */\n      updateCache: function(res) {\n        var model = helpers.fetchModel(res);\n        var level = null;\n        if(model){\n          switch(res._model){\n            case 'levels':\n              res[res._model] = helpers.updateModelCache(models.levels, model);\n              break;\n            case 'unit':\n              level = helpers.getRelatedLevel(res);\n              res[res._model] = helpers.updateModelCache(level.units, model);\n              break;\n            case 'unit_section_a':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_a, model);\n              break;\n            case 'unit_section_b':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_b, model);\n              break;\n            case 'unit_section_c':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_c, model);\n              break;\n            case 'unit_section_d':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_d, model);\n              break;\n            case 'unit_section_e':\n              res[res._model] = helpers.updateModelCache(models.current_unit_section_e, model);\n              break;\n            case 'user':\n            case 'users':\n              res[res._model] = helpers.updateModelCache(models.users, model);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Update models cache\n       */\n      cleanCache: function(res) {\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'users':\n              models.users = [];\n              if(models.current_user){\n                models.users.push(models.current_user);\n              }\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Prune the cache, removing old projects which probably has been deleted\n       */\n      pruneProjectCache: function(res) {\n        if(angular.isArray(res.projects)){\n          var ids = [];\n          var newCache = [];\n          // Remember projects returned by server in the response\n          angular.forEach(res.projects, function(project) {\n            ids.push(project.id);\n          });\n          // Keep in cache only allowed projects\n          angular.forEach(models.projects, function(project) {\n            // If the project was present in response, or if the project is not mine, keep.\n            // (Don't keep the project if it's mine but it's not present in response. This means it's been recently deleted)\n            if(ids.indexOf(project.id) >= 0 || project.owner.id !== models.current_user.id){\n              newCache.push(project);\n            }\n          });\n          models.projects = newCache; // Replace the cache\n        }\n        return res;\n      },\n\n      /**\n       * Prune the cache, removing old projects which probably has been deleted\n       */\n      forcePruneProjectCache: function(res) {\n        if(angular.isArray(res.projects)){\n          var ids = [];\n          var newCache = [];\n          // Remember projects returned by server in the response\n          angular.forEach(res.projects, function(project) {\n            ids.push(project.id);\n          });\n          // Keep in cache only allowed projects\n          angular.forEach(models.projects, function(project) {\n            // Keep only the projects that are in response\n            if(ids.indexOf(project.id) >= 0){\n              newCache.push(project);\n            }\n          });\n          models.projects = newCache; // Replace the cache\n        }\n        return res;\n      },\n\n      /**\n       * Removes a model from cache\n       */\n      removeFromCache: function(res) {\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'project_files':\n            case 'project_file':\n              helpers.forEachModel(model, helpers.removeProjectFileFromCache);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Set the project(s) as mine mocking an owner\n       */\n      setProjectAsMine: function(res) {\n        var model = helpers.fetchModel(res);\n        helpers.forEachModel(model, helpers.setProjectAsMineSingle);\n        return res;\n      },\n\n      setAsCurrent: function(res){\n        var model = helpers.fetchModel(res);\n        models['current_' + res._model] = res;\n        return res;\n      },\n\n      /**\n       * Convert values to a human readable format\n       */\n      humanize: function(res) {\n        var model = helpers.fetchModel(res);\n        if(model){\n          switch(res._model){\n            case 'projects':\n            case 'project':\n              helpers.forEachModel(model, helpers.humanizeProject);\n              break;\n            default:\n              break;\n          }\n        }\n        return res;\n      },\n\n      /**\n       * Store models cache in long term memory\n       */\n      memorizeCache: function(res) {\n        angular.forEach(models, function(v, k){\n          longTermMemory.memorize(k,v);\n        })\n        return res;\n      },\n\n      /**\n       * Manage side effects, if any\n       */\n      sideEffects: function(res) {\n        if(res.side_effects){\n          angular.forEach(res.side_effects, function(v,k) {\n            var project = null;\n            var frame = null;\n\n            switch(k){\n              case 'projects':\n              case 'project':\n                helpers.updateModelCache(models.projects, v);\n                break;\n              case 'user':\n              case 'users':\n                helpers.updateModelCache(models.users, v);\n                break;\n              case 'frames':\n              case 'frame':\n                project = helpers.getRelatedProject(res);\n                helpers.updateModelCache(project.frames, v);\n                break;\n              case 'project_files':\n              case 'project_file':\n                project = helpers.getRelatedProject(res);\n                helpers.updateModelCache(project.project_files, v);\n                break;\n              case 'comments':\n              case 'comment':\n                frame = helpers.getRelatedFrame(res);\n                helpers.updateModelCache(frame.comments, v);\n                break;\n              default:\n                $log.warn('Don\\'t know how to handle side effect \"' + k + '\":');\n                $log.warn(v);\n                break;\n            }\n          });\n        }\n        return res;\n      },\n\n      log: function (res) {\n        $log.info(res);\n        return res;\n      },\n\n      debugger: function (res) {\n        debugger; // eslint-disable-line no-debugger\n        return res;\n      }\n    };\n\n    var helpers = {\n\n      /**\n       * Valid models names\n       */\n      validModels: [\n        'levels',\n        'unit',\n        'unit_section_a',\n        'unit_section_b',\n        'unit_section_c',\n        'unit_section_d',\n        'unit_section_e',\n        'users',\n        'user'\n      ],\n\n      /**\n       * Fetch the model from response\n       */\n      fetchModel: function(res) {\n        if(res._model && res[res._model]){\n          return res[res._model];\n        }\n        return null;\n      },\n\n      /**\n      * Get the related project referenced in res\n      */\n      getRelatedProject: function (res) {\n        return utils.findFirst(models.projects, res._project_id);\n      },\n\n      /**\n      * Get the related project referenced in res\n      */\n      getRelatedLevel: function (res) {\n        return utils.findFirst(models.levels, res[res._model].level_id);\n      },\n\n      /**\n      * Get the related frame referenced in res\n      */\n      getRelatedFrame: function (res) {\n        var project = helpers.getRelatedProject(res);\n        return utils.findFirst(project.frames, res._frame_id);\n      },\n\n      /**\n       * Executes a function for each model\n       */\n      forEachModel: function(model, func) {\n        if(angular.isArray(model)){\n          angular.forEach(model, func);\n        }\n        else if(model){\n          func(model);\n        }\n      },\n\n      /**\n       * inject default values to a project\n       */\n      injectProjectDefaults: function(project) {\n        // Set default image if not set\n        if(!project.image){\n          project.image = 'assets/images/default-img.png';\n        }\n\n        // Default download url\n        if(!project.download_url){\n          project.download_url = apiUrl + '/v1/projects/' + project.id + '/download';\n        }\n      },\n\n      /**\n       * inject default values to a user\n       */\n      injectUserDefaults: function(user) {\n        return user;\n      },\n\n      /**\n       * Set a project as mine\n       */\n      setProjectAsMineSingle: function(project) {\n        if(!project.owner && models.current_user && models.current_user.id){\n          project.owner = { id: models.current_user.id };\n        }\n      },\n\n      /**\n       * Sort the frames and comments of a project by order\n       */\n      sortFramesAndCommentsSingle: function(project) {\n        utils.sortByOrder(project.frames);\n        angular.forEach(project.frames, function(frame) {\n          utils.sortByOrder(frame.comments);\n        });\n      },\n\n      humanizeProject: function(project) {\n        // force private to be a boolean (defaults to false), and set private string\n        project.private = !!project.private;\n        if(project.private){\n          project.privateString = 'Private Project';\n        }\n        else{\n          project.privateString = 'Public Project';\n        }\n      },\n\n      updateModelCache: function (modelCache, model) {\n        var newData = model;\n\n        // modelCache is array\n        if(angular.isArray(modelCache)){\n\n          // if model is array, recursion\n          if(angular.isArray(model)){\n            newData = [];\n            angular.forEach(model, function(m) {\n              if(m){\n                var merged = helpers.updateModelCache(modelCache, m); // recursion\n                if(merged){\n                  newData.push(merged);\n                }\n              }\n            });\n          }\n\n          // single model\n          else if(model){\n            // if model is marked as _reload, remove it from cache and add it again\n            if(model._reload){\n              utils.removeFirst(modelCache, model.id);\n              delete model._reload; // Delete _reload metadata not to store it in cache\n              newData = utils.mergeOrPush(modelCache, model);\n            }\n            // if model is marked as _destroyed, remove it from cache\n            else if(model._destroyed){\n              utils.removeFirst(modelCache, model.id);\n            }\n            // otherwise, just update the cache\n            else{\n              newData = utils.mergeOrPush(modelCache, model);\n            }\n          }\n        }\n\n        return newData;\n      }\n    };\n\n    return resPipe;\n  });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Long Term Memory\n   * Persist data to make it available after the browser is closed\n   */\n  .factory('longTermMemory', function () {\n\n    var longTermMemory = {\n      memorize: function(key, val) {\n        localStorage[key] = angular.toJson(val);\n      },\n\n      remember: function(key) {\n        try {\n          return angular.fromJson(localStorage[key]);\n        }\n        catch(e){\n          delete localStorage[key];\n          return null;\n        }\n      },\n\n      forget: function(key) {\n        delete localStorage[key];\n      },\n\n      oblivion: function() {\n        localStorage.clear();\n      }\n    };\n\n    return longTermMemory;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreSidebar', galoreSidebar);\n\n  /** @ngInject */\n  function galoreSidebar($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreSidebar/galoreSidebar.html',\n      controller: SidebarController,\n      controllerAs: 'sidebar',\n      link: SidebarLink,\n      bindToController: true,\n      replace: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SidebarController(models, $state, units) {\n      var vm = this;\n\n      vm.models = models;\n      vm.state = $state;\n\n      vm.addUnit = function(level_id, unit_code, sub_unit_code){\n\n        if(!unit_code){\n          unit_code = 1;\n        }else{\n          unit_code += 1;\n        }\n\n        if(!sub_unit_code){\n          sub_unit_code = 1;\n        }else{\n          sub_unit_code += 1;\n        }\n\n        vm.newUnit = {\n            \"level_id\": level_id,\n            \"title\": \"Unità \" + unit_code + \".\" + sub_unit_code,\n            \"unit_code\": unit_code,\n            \"sub_unit_code\": sub_unit_code\n        };\n\n        units\n            .create({unit:vm.newUnit});\n      }\n\n    }\n\n    function SidebarLink(){\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreHeader', galoreHeader);\n\n  /** @ngInject */\n  function galoreHeader($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreHeader/galoreHeader.html',\n      controller: HeaderController,\n      controllerAs: 'header',\n      link: HeaderLink,\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function HeaderController(models) {\n      var vm = this;\n\n      vm.models = models;\n    }\n\n    function HeaderLink(){\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('galoreFooter', galoreFooter);\n\n  /** @ngInject */\n  function galoreFooter($timeout) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/galoreFooter/galoreFooter.html',\n      controller: FooterController,\n      controllerAs: 'footer',\n      link: FooterLink,\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function FooterController(models) {\n      var vm = this;\n\n      vm.models = models;\n    }\n\n    function FooterLink(){\n      $timeout(function () {\n        angular.element(window).trigger('resize'); // Trigger a resize event to adjust AdminLTE height\n      });\n    }\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('galoreApi', function (\n      $q,\n      $http,\n      $auth,\n      apiUrl,\n      unitApiUrl,\n      showLevelsApiUrl,\n      sectionApiUrl\n    ) {\n      // Cache the promises (just to avoid to call the same API before the previous has finished)\n      var cache = {};\n\n      // Api Helpers (accessible only from this factory)\n      var helpers = {\n        /**\n         * Try to retrieve the result from cache, or make HTTP call\n         * @param  {String} method  The HTTP method\n         * @param  {String} url The API url\n         * @param  {Object} data    The body\n         * @param  {Object} headers The headers\n         * @param  {Boolean} keep   If true, the promise is cached even after it's been fulfilled\n         * @return {Promise}        A promise of the response\n         */\n        cacheOrHttp: function(method, url, data, headers, keep, absUrl) {\n          var key = method + url + (data ? angular.toJson(data) : '');\n          var config = {};\n          if(method) config.method = method.toUpperCase();\n          if(absUrl){\n            config.url = absUrl;\n          }else{\n            config.url = apiUrl + url;\n          }\n          if(data) config.data = data;\n          if(headers) config.headers = headers;\n\n\n          if (!cache[key]) {\n            var promise;\n            var err = false;\n            switch(method){\n              case 'get':\n              case 'GET':\n              case 'post':\n              case 'POST':\n              case 'put':\n              case 'PUT':\n              case 'patch':\n              case 'PATCH':\n              case 'delete':\n              case 'DELETE':\n                promise = $http(config);\n                break;\n              default:\n                err = true;\n                promise = $q.reject();\n                break;\n            }\n            if(!err){\n              cache[key] = promise.finally(function(response,err) {\n                if(!keep){\n                  delete cache[key]; // delete the cache, so the next call will be fresh\n                }\n                if(err) { return $q.reject(err); }\n                if(response) { return response; }\n              });\n            }\n          }\n\n          return cache[key];\n        },\n\n\n        /**\n         * Expect a 200 response and return data.\n         * Otherwise, return a rejected promise.\n         */\n        expect200: function (response) {\n          if(response.status === 200){\n            return response.data;\n          }\n          else{\n            return $q.reject(response);\n          }\n        }\n      };\n\n      var galoreoApi = {\n        /** USER API **/\n\n        /**\n         * Authenticate the user\n         */\n        login: function(data) {\n          if(!cache.login){\n            cache.login = $auth\n              .submitLogin(data)\n              .finally(function(response,err) {\n                delete cache.login;\n                if(err) { return $q.reject(err); }\n                if(response) { return response; }\n              });\n          }\n          return cache.login;\n        },\n\n        /**\n         * Retrieve user data (together with role permissions)\n         */\n        getMe: function(){\n          return helpers\n            .cacheOrHttp('get', '/v1/me')\n            .then(helpers.expect200);\n        },\n\n        /**\n         * Logout the user\n         */\n        logout: function() {\n          if(!cache.logout){\n            cache.logout = $auth\n              .signOut()\n              .finally(function(response,err) {\n                delete cache.logout;\n                if(err) { return $q.reject(err); }\n                if(response) { return response; }\n              });\n          }\n          return cache.logout;\n        },\n\n        /**\n        * Change the password of the user\n        */\n        changePassword: function (data) {\n          if(!cache.changePassword){\n            cache.changePassword = $auth\n              .updatePassword(data)\n              .finally(function (response, err) {\n                  delete cache.changePassword;\n                  if(err) { return $q.reject(err); }\n                  if(response) { return response; }\n              });\n          }\n          return cache.changePassword;\n        },\n\n        /**\n        * Create Unit\n        */\n        createUnit: function(data) {\n          return helpers\n          .cacheOrHttp('post', unitApiUrl, data)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Create Unit\n        */\n        showUnit: function(id) {\n          return helpers\n          .cacheOrHttp('get', unitApiUrl + '/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section A by id section\n        */\n        getSectionA: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'a/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section B by id section\n        */\n        getSectionB: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'b/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section C by id section\n        */\n        getSectionC: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'c/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section D by id section\n        */\n        getSectionD: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'd/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n        * Get Section E by id section\n        */\n        getSectionE: function(id){\n          return helpers\n          .cacheOrHttp('get', sectionApiUrl + 'e/' + id)\n          .then(helpers.expect200);\n        },\n\n        /**\n         * Show all levels\n         */\n        indexLevels: function(){\n          return helpers\n            .cacheOrHttp('get', showLevelsApiUrl)\n            .then(helpers.expect200);\n        },\n\n       /**\n        * Update unit\n        */\n        updateUnit: function(id, data){\n          return helpers\n            .cacheOrHttp('put', unitApiUrl + '/' + id, data)\n            .then(helpers.expect200);\n        },\n\n        /**\n         * Update section\n         */\n         updateSection: function(section, id, data){\n           return helpers\n             .cacheOrHttp('put', sectionApiUrl + section + '/' + id, data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload Video\n         */\n         uploadVideo: function(section, section_id, data){\n           return helpers\n             .cacheOrHttp('post', sectionApiUrl + section + '/' + section_id + '/video_upload', data)\n             .then(helpers.expect200);\n         },\n\n         /**\n         * Upload Video S3\n         */\n         uploadVideoS3: function(url, file_type, file){\n           return helpers\n             .cacheOrHttp('put', null, file, {'Content-Type': file_type, 'if-modified-since':undefined}, null, url)\n             .then(helpers.expect200);\n         }\n\n        /* API */\n      };\n\n      return galoreoApi;\n   });\n\n(function(){\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('exerciseDialogue', exerciseDialogue);\n\n    /** @ngInject */\n    function exerciseDialogue(){\n      var directive = {\n        restrict: 'E',\n        templateUrl: 'app/components/exerciseDialogue/exerciseDialogue.html',\n        scope:{\n          model: '='\n        },\n        controller: exerciseDialogueController,\n        controllerAs: 'exerciseDialogue',\n        bindToController: true\n      };\n\n      return directive;\n\n      /** @ngInject */\n      function exerciseDialogueController($scope) {\n        $scope.dynamicPopover = {\n            templateUrl: 'app/components/sectionB/infoPopoverTemplate.html'\n          };\n      }\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('editableTextAngular', editableTextAngular);\n\n  function editableTextAngular (editableDirectiveFactory) {\n    return editableDirectiveFactory({\n      directiveName: 'editableTextAngular',\n      inputTpl: '<div text-angular></div>',\n      addListeners: function () {\n        var self = this;\n        self.parent.addListeners.call(self);\n        // submit textarea by ctrl+enter even with buttons\n        if (self.single && self.buttons !== 'no') {\n          self.autosubmit();\n        }\n      },\n      autosubmit: function () {\n        var self = this;\n        self.inputEl.bind('keydown', function (e) {\n          if ((e.ctrlKey || e.metaKey) && (e.keyCode === 13)) {\n            self.scope.$apply(function () {\n              self.scope.$form.$submit();\n            });\n          }\n        });\n      }\n    });\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * Error Manager.\n   * Handles common HTTP error messages\n   */\n  .factory('errorManager', function (toastr, $log, $state, $q, longTermMemory, models) {\n    var errorManager = function(err) {\n      // log every errors\n      $log.error(err);\n\n      // Unwrap HTTP errors and take actions if needed\n      if(angular.isObject(err) && err.status){\n        switch(err.status){\n          case 401:\n            $state.go('main.logout');\n            err = err.data;\n            break;\n          case 403:\n            $state.go('main.home');\n            err = err.data;\n            break;\n          case 422:\n            err = err.data;\n            break;\n          case 404:\n            err = err.data;\n            break;\n          case 413:\n            err = 'Il file che stai cercando di caricare è troppo grande';\n            break;\n          case -1:\n            err = 'Il server non è raggiungibile o non sei connesso ad Internet';\n            break;\n          default:\n            break;\n        }\n      }\n\n      var getErrorString = function (err) {\n        if(angular.isString(err)){\n          return err;\n        }\n        else if(angular.isObject(err) && (err.full_messages || err.error_description || err.errors || err.data || err.msg || err.error)){\n          return getErrorString(err.full_messages || err.error_description || err.errors || err.data || err.msg || err.error );\n        }\n        else if(angular.isArray(err)){\n          var myErr = [];\n          for (var i = 0; i < err.length; i++) {\n            myErr[i] = getErrorString(err[i]);\n          }\n          return getErrorString(myErr.join('<br>'));\n        }\n        // Don't manage different kinds of error\n        else{\n          longTermMemory.oblivion(); // Forget everything. We don't want the app to be broken forever!\n          models.reset(); // Reset all the models. We don't want the app to be broken forever!\n          return 'Si è verificato un errore imprevisto. Si prega di riprovare più tardi.';\n        }\n      }\n\n      toastr.error(getErrorString(err), 'Errore');\n\n      return $q.reject(err);\n    };\n\n    return errorManager;\n  });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('boxExpander', boxExpander);\n\n  /** @ngInject */\n  function boxExpander() {\n    var directive = {\n      restrict: 'A',\n      scope: {\n        boxExpander: '='\n      },\n      link: boxExpanderLink\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function boxExpanderLink(scope, el) {\n      el.addClass(\"panel-collapse collapse\");\n\n      scope.$watch('boxExpander', function (newVal, oldVal) {\n        if(newVal !== oldVal){\n          if(newVal){\n            //el.collapse('show');\n          }else{\n            el.collapse('hide');\n          }\n        }\n      })\n    }\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('can', function (models) {\n\n      var helpers = {\n        instanceCondition: function(action, resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          // Safely get condition function (avoiding undefined errors)\n          var cond = perms && perms.instanceConditions && perms.instanceConditions[action] && perms.instanceConditions[action][resource];\n          // If no condition was found, return true, else evaluate the condition\n          return !cond || cond(instance);\n        },\n        canManage: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.manage && (perms.manage.indexOf(resource) >= 0) && helpers.instanceCondition('manage', resource, instance);\n        },\n        canUpdate: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.update && (perms.update.indexOf(resource) >= 0) && helpers.instanceCondition('update', resource, instance);\n        },\n        canShow: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.show && (perms.show.indexOf(resource) >= 0) && helpers.instanceCondition('show', resource, instance);\n        },\n        canIndex: function(resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms.index && (perms.index.indexOf(resource) >= 0) && helpers.instanceCondition('index', resource, instance);\n        },\n        customCan: function(action, resource, instance) {\n          var perms = models.current_user && models.current_user.can;\n          return !!perms && !!perms[action] && (perms[action].indexOf(resource) >= 0) && helpers.instanceCondition(action, resource, instance);\n        }\n      };\n\n      var can = function(action, resource, instance){\n        switch(action){\n          case 'manage':\n            return helpers.canManage(resource, instance);\n          case 'update':\n            return helpers.canManage(resource, instance) || helpers.canUpdate(resource, instance);\n          case 'show':\n            return helpers.canManage(resource, instance) || helpers.canUpdate(resource, instance) || helpers.canShow(resource, instance);\n          case 'index':\n            return helpers.canShow(resource, instance) || helpers.canIndex(resource, instance);\n          default:\n            return helpers.customCan(action, resource, instance);\n        }\n      };\n\n      return can;\n   });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .directive('can', canDirective);\n\n  /** @ngInject */\n  function canDirective(can, $log, models) {\n    var directive = {\n      restrict: 'A',\n      link: linkFunc,\n      scope: {\n        instance: '='\n      }\n    };\n\n    return directive;\n\n    function linkFunc(scope, el, attr) {\n      var watcher;\n      var shown;\n      var action;\n      var resource;\n      var negative;\n      scope.models = models;\n\n      // Update the visibility of the element\n      var updateVisibility = function() {\n        var toShow = can(action, resource, scope.instance);\n        if(negative){ toShow = !toShow; } // invert the condition if needed\n        // Show the element if not shown\n        if(toShow && !shown){\n          el.removeClass('can-hide');\n          shown = true;\n        }\n\n        // Hide the element if shown\n        else if(!toShow && shown){\n          el.addClass('can-hide');\n          shown = false;\n        }\n      };\n\n      // Parse can attribute\n      var parsed = attr.can.split(':');\n      if(parsed.length !== 2){\n        $log.error('Syntax error in \"can\" directive: ' + angular.toJson(attr.can));\n        return;\n      }\n\n      // If the action starts with \"!\", the action is negative\n      negative = parsed[0].slice(0, 1) === '!';\n\n\n      // In that case, remove ! from the string\n      if(negative){\n        parsed[0] = parsed[0].substr(1);\n      }\n\n      // Extract the action and the resource\n      action = parsed[0];\n      resource = parsed[1];\n\n      // Update the visibility for the first time\n      shown = true;\n      updateVisibility();\n\n      // Update the visibility as soon as the permissions change\n      watcher = scope.$watch('models.current_user.can', function(newVal, oldVal) {\n        if(newVal && oldVal !== newVal){\n          updateVisibility();\n        }\n      });\n\n      // Update the visibility as soon as the instance changes\n      watcher = scope.$watch('instance', function(newVal, oldVal) {\n        if(newVal && oldVal !== newVal){\n          updateVisibility();\n        }\n      });\n\n      scope.$on('$destroy', function () {\n        watcher();\n      });\n    }\n  }\n\n})();\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My user Overview API service\n   */\n   .factory('users', function (galoreApi, errorManager, resPipe, models) {\n\n      var users = {\n\n        /**\n         * Get current user\n         */\n        me: function(){\n          return galoreApi\n            .getMe()\n            .then(resPipe.parseResponse)\n            .then(resPipe.updateCache)\n            .then(resPipe.setAsCurrent)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        },\n\n        /**\n        * Update current user\n        */\n        updateMe: function (data) {\n          return galoreApi\n            .updateMe(data)\n            .then(function (res) {\n              if(res.status === \"success\")\n              {\n                return {\n                  user: res.data\n                }\n              }\n              return res;\n            })\n            .then(resPipe.parseResponse)\n            .then(resPipe.injectDefaults)\n            .then(helpers.addInstanceConditions)\n            .then(resPipe.updateCache)\n            .then(resPipe.setAsCurrent)\n            .then(resPipe.memorizeCache)\n            .catch(errorManager);\n        }\n      };\n\n      var helpers = {\n        addInstanceConditions: function(res) {\n          if(res.user){\n            res.user.can.instanceConditions = models.getInstanceConditions();\n          }\n          return res;\n        }\n      };\n\n      return users;\n   });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('units', function (galoreApi, resPipe, utils, errorManager, models, $q) {\n      var units = {\n\n        /**\n         * get a unit from server (given id)\n         */\n        show: function(id){\n          return galoreApi\n            .showUnit(id)                     // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)\n            .then(resPipe.log)   // Update the cache\n            .then(resPipe.setAsCurrent)       // Set as current\n            .then(resPipe.log)   // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .then(resPipe.log)\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * create a new unit\n         */\n        create: function(data){\n          return galoreApi\n            .createUnit(data)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.injectDefaults)     // Inject some defatult values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionA by level id\n        */\n        getSectionA: function(id){\n          return galoreApi\n            .getSectionA(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.setAsCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionB by level id\n        */\n        getSectionB: function(id){\n          return galoreApi\n            .getSectionB(id)                   // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.debug)\n            .then(resPipe.log)\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.debug)\n            .then(resPipe.log)\n            .then(resPipe.setAsCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .then(resPipe.log)\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionC by level id\n        */\n        getSectionC: function(id){\n          return galoreApi\n            .getSectionC(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.debug)\n            .then(resPipe.log)\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.debug)\n            .then(resPipe.log)\n            .then(resPipe.setAsCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .then(resPipe.log)\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionD by level id\n        */\n        getSectionD: function(id){\n          return galoreApi\n            .getSectionD(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.debug)\n            .then(resPipe.log)\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.debug)\n            .then(resPipe.log)\n            .then(resPipe.setAsCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .then(resPipe.log)\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n        * Get sectionE by level id\n        */\n        getSectionE: function(id){\n          return galoreApi\n            .getSectionE(id)                  // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markReload)         // Mark the unit as to be reloaded\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.setAsCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize units in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * update unit\n         */\n        update: function(id, data){\n\n          return galoreApi\n            .updateUnit(id, data)             // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.setAsCurrent)       // Set as current project\n            .then(resPipe.memorizeCache)      // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * update section\n         */\n        updateSection: function(section, id, data){\n\n          return galoreApi\n            .updateSection(section, id, data) // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.log)\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.log)\n            .then(resPipe.setAsCurrent)       // Set as current project\n            .then(resPipe.log)\n            .then(resPipe.memorizeCache)      // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadVideo :function(section, section_id, data){\n          return galoreApi\n            .uploadVideo(section, section_id, data) // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.setAsCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize video in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        uploadVideoS3 :function(url, file_type, file){\n          return galoreApi\n            .uploadVideoS3(url, file_type, file) // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.humanize)           // Perform conversions between raw values and user friendly values\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.setAsCurrent)       // Set as current\n            .then(resPipe.memorizeCache)      // Memorize video in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * destroy a project\n         */\n        destroy: function(project){\n          return galoreApi\n            .destroyProject(project)          // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markDestroyed)      // Mark the project as destroyed\n            .then(resPipe.updateCache)        // Update cache\n            .then(resPipe.sideEffects)        // Manage sideEffects, if any\n            .then(resPipe.memorizeProjects)   // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * Upload and create a project_file\n         * @param  {Number} projectId  The id of the project this project_file belongs to\n         */\n        createProjectFile: function(projectId, file) {\n          return galoreApi\n            .createProjectFile(projectId, {\n              project_file: {\n                name: file.name,\n                file: file\n              }\n            })                                // API call\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.sideEffects)        // Manage sideEffects, if any\n            .then(resPipe.memorizeProjects)   // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * Destroy a projectFile\n         * @param  {Number} projectId  The id of the project this project_file belongs to\n         */\n        destroyProjectFile: function(projectId, project_file) {\n          return galoreApi\n            .destroyProjectFile(projectId, project_file)\n            .then(resPipe.parseResponse)      // Parse the raw response\n            .then(resPipe.markDestroyed)      // Mark the project file as destroyed\n            .then(resPipe.updateCache)        // Update the cache\n            .then(resPipe.sideEffects)        // Manage sideEffects, if any\n            .then(resPipe.sortFramesCache)    // Sort the frames in case a frame was removed\n            .then(resPipe.memorizeCache)   // Memorize projects in local storage\n            .catch(errorManager);             // Handle errors\n        },\n\n        /**\n         * Finds a project given the name (in cache) and set it as currentProject in models\n         */\n        setByName: function(name) {\n          var found = utils.findFirstByName(models.projects, name);\n          models.currentProject = found;\n        },\n\n        form2Section: function (formData) {\n          debugger;\n          var unit_section_a = {};\n          if(angular.isDefined(formData.id)) unit_section_a.id = formData.id;\n          if(angular.isDefined(formData.section_title)) unit_section_a.section_title = formData.section_title;\n          if(angular.isDefined(formData.active)) unit_section_a.active = formData.active;\n          if(angular.isDefined(formData[\"can_publish?\"])) unit_section_a[\"can_publish?\"] = formData[\"can_publish?\"];\n          if(angular.isDefined(formData.video_title)) unit_section_a.video_title = formData.video_title;\n          if(angular.isDefined(formData.video_subtitle)) unit_section_a.video_subtitle = formData.video_subtitle;\n          if(angular.isDefined(formData.video_tips)) unit_section_a.video_tips = formData.video_tips;\n          if(angular.isDefined(formData.video_url)) unit_section_a.video_url = formData.video_url;\n          return $q.resolve(unit_section_a);\n        }\n\n\n      };\n\n      return units;\n   });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n  * Models cache\n  */\n  .factory('models', function (longTermMemory) {\n\n    var models = {\n       reset: function () {\n         models.levels = longTermMemory.remember('levels') || [];\n         models.current_unit = longTermMemory.remember('current_unit') || [];\n         // models.aboutProjects = longTermMemory.remember('aboutProjects') || [];\n         models.current_user = longTermMemory.remember('current_user') || undefined;\n       }\n    };\n\n    models.reset();\n\n    return models;\n  });\n\n'use strict';\n\nangular.module('englishGalore')\n  /**\n   * My Project Overview API service\n   */\n   .factory('levels', function (galoreApi, resPipe, utils, errorManager) {\n      var levels = {\n\n        /**\n         * List of levels\n         */\n        index: function(){\n          return galoreApi\n            .indexLevels()                // API call\n            .then(resPipe.log)\n            .then(resPipe.parseResponse)    // Parse the raw response\n            .then(resPipe.log)\n            .then(resPipe.injectDefaults)   // Inject some defatult values\n            .then(resPipe.log)\n            .then(resPipe.updateCache)      // Update the cache\n            .then(resPipe.log)\n            .then(resPipe.memorizeCache) // Memorize projects in local storage\n            .catch(errorManager);           // Handle errors\n        }\n      };\n\n      return levels;\n   });\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log,\n    $rootScope,\n    uiState,\n    defaultBodyClasses,\n    longTermMemory\n    ) {\n        // Bind the uiState to $rootScope as it's used in index.html\n        $rootScope.uiState = uiState;\n\n        // On state change\n        var stateChangeSuccess = $rootScope.$on('$stateChangeSuccess', function (event, toState) {\n          var pms = toState.params || {};\n          uiState.bodyClasses = pms.bodyClasses || defaultBodyClasses;\n        });\n\n        // Destroy watchers\n        $rootScope.$on('$destroy', function() {\n          stateChangeSuccess();\n        });\n\n        longTermMemory.oblivion();\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('main', {\n        abstract: true,\n        templateUrl: 'app/pages/main/main.html'\n      })\n      .state('main.admin', {\n        templateUrl: 'app/pages/admin/admin.html',\n        controller: 'AdminController',\n        controllerAs: 'vm',\n        resolve: {\n          currentUser: function($auth, $q, users) {\n            return $auth\n              .validateUser()\n              .then(function(res){\n                if(res.signedIn !== true){\n                  return $q.reject();\n                }\n              })\n              .then(users.me)\n              .catch(function(){\n                return null;\n              });\n          },\n          levelsData: function(levels){\n            return levels.index();\n          }\n        },\n        onEnter: function($timeout, $state, levelsData, currentUser){\n          if(!currentUser){\n            $timeout(function(){\n              $state.go('main.login');\n            });\n          }\n        }\n      })\n      .state('main.logout', {\n        url: '/logout',\n        onEnter: function($q, errorManager, galoreApi, $state, toastr, models, longTermMemory) {\n          galoreApi.logout()\n            .finally(function() {\n              delete models.current_user;\n              models.users = [];\n              longTermMemory.forget('user');\n              longTermMemory.forget('current_user');\n              $state.go('main.login');\n            });\n        }\n      })\n      .state('main.login', {\n        url: '/login',\n        templateUrl: 'app/pages/login/login.html',\n        controller: 'LoginController',\n        controllerAs: 'vm',\n        params: {\n          bodyClasses: 'hold-transition login-page'\n        }\n      })\n      .state('main.admin.unit', {\n        url: '/units/:id',\n        templateUrl: 'app/pages/unit/unit.html',\n        controller: 'UnitController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.profile', {\n        url: '/profile',\n        templateUrl: 'app/pages/profile/profile.html',\n        controller: 'ProfileController',\n        controllerAs: 'vm'\n      })\n      .state('main.admin.dashboard', {\n        url: '/',\n        templateUrl: 'app/pages/dashboard/dashboard.html'\n      })\n      .state('main.admin.createUnit', {\n        url: '/create-unit',\n        templateUrl: 'app/pages/createUnit/createUnit.html',\n        controller: 'CreateUnitController',\n        controllerAs: 'vm'\n      })\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .constant('apiUrl', 'http://eg-api.tandu.it')\n    .constant('defaultBodyClasses', 'skin-purple-light fixed sidebar-mini')\n    .constant('unitApiUrl', '/v1/units')\n    .constant('showLevelsApiUrl', '/v1/levels')\n    .constant('sectionApiUrl', '/v1/unit_sections_')\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('englishGalore')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig, $animateProvider, $locationProvider, $provide, $authProvider, apiUrl) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Animate only elements with class \"animate\"\n    $animateProvider.classNameFilter(/animate/);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = false;\n    toastrConfig.progressBar = false;\n\n    //Removes '#' from the URL\n    $locationProvider.html5Mode(true);\n    $locationProvider.hashPrefix('!');\n\n    $authProvider.configure({\n      apiUrl:                  apiUrl,\n      tokenValidationPath:     '/v1/auth/validate_token',\n      signOutUrl:              '/v1/auth/logout',\n      emailRegistrationPath:   '/v1/auth/register',\n      accountDeletePath:       '/v1/auth/delete_account',\n      passwordResetPath:       '/v1/auth/password',\n      passwordUpdatePath:      '/v1/auth/password',\n      passwordResetSuccessUrl: window.location.origin, //eslint-disable-line\n      emailSignInPath:         '/v1/auth/login'\n    });\n\n\n\n    //Used for ckeditor\n    $provide.decorator('taOptions', ['taRegisterTool', '$delegate', function(taRegisterTool, taOptions) { // $delegate is the taOptions we are decorating\n\n        taOptions.toolbar = [\n            ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'quote','bold', 'italics','underline'],\n            ['strikeThrough','ul', 'ol','justifyLeft', 'justifyCenter', 'justifyRight', 'indent', 'outdent', 'insertLink']\n        ];\n        return taOptions;\n    }]);\n  }\n\n})();\n\nangular.module(\"englishGalore\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/exerciseDialogue/exerciseDialogue.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label for=\\\"\\\">Testo dialogo</label><button uib-popover-template=dynamicPopover.templateUrl type=button class=\\\"btn btn-default pull-right btn-popover-info\\\" popover-placement=right><i class=\\\"fa fa-info-circle\\\" aria-hidden=true></i></button><textarea rows=4 cols=50 ng-model=model.dialogue name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il testo del dialogo\\\" required>\\n    </textarea><span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div></div><div class=col-sm-6><label for=\\\"\\\">Tip Dialogo</label><text-angular ng-model=model.dialogue_tips></text-angular></div>\");\n$templateCache.put(\"app/components/galoreFooter/galoreFooter.html\",\"<footer class=main-footer><div class=\\\"pull-right hidden-xs\\\"><b>Version</b> 1.0.0</div><strong>Copyright © 2016-2017 <a href=#>English Galore</a>.</strong> All rights reserved.</footer>\");\n$templateCache.put(\"app/components/galoreHeader/galoreHeader.html\",\"<header class=\\\"main-header galore-header\\\"><a ui-sref=main.admin.dashboard class=logo><!-- mini logo for sidebar mini 50x50 pixels --> <span class=logo-mini><img src=/assets/images/logo-sm.png></span><!-- logo for regular state and mobile devices --> <span class=logo-lg><img src=/assets/images/logo.png></span></a><nav class=\\\"navbar navbar-static-top\\\" role=navigation><!-- Sidebar toggle button--> <a href=# class=sidebar-toggle data-toggle=offcanvas role=button><span class=sr-only>Toggle navigation</span> </a><!-- Navbar Right Menu --><div class=navbar-custom-menu><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown user user-menu\\\"><a href=# class=dropdown-toggle data-toggle=dropdown aria-expanded=false><span class=hidden-xs>{{ header.models.current_user.firstName }} {{ header.models.current_user.lastName }}</span></a><ul class=dropdown-menu><!-- User image --><li class=user-header><img src=\\\"{{ header.models.current_user.image || \\'/assets/images/logo-sm.png\\' }}\\\" ng-class=\\\"{\\'default-user-img\\': !header.models.current_user.image}\\\" class=img-circle alt=\\\"User Image\\\"><p>{{ header.models.current_user.email }}</p></li><!-- Menu Footer--><li class=user-footer><div class=pull-left><a ui-sref=main.admin.profile class=\\\"btn btn-default btn-flat\\\">Profilo</a></div><div class=pull-right><a ui-sref=main.logout class=\\\"btn btn-default btn-flat\\\">Esci</a></div></li></ul></li></ul></div></nav></header>\");\n$templateCache.put(\"app/components/galoreSidebar/galoreSidebar.html\",\"<div class=main-sidebar><!-- Inner sidebar --><div class=sidebar><!-- Sidebar Menu --><ul class=sidebar-menu><!-- SECTION Main Menu --><li class=header>Main Menu</li><!-- Home --><li class=treeview><a ui-sref=main.admin.dashboard><i class=\\\"fa fa-dashboard\\\" aria-hidden=true></i> <span>Dashboard</span></a></li><!-- !Home --><!-- SECTION Livelli --><li class=treeview ng-repeat=\\\"level in vm.models.levels | orderBy:\\'title\\'\\\"><a href=#><i class=\\\"fa fa-circle\\\"></i> <span>Livello {{level.title}}</span> <span class=pull-right-container><i class=\\\"fa fa-angle-left\\\"></i></span></a><ul class=treeview-menu><!-- Visualizza Unità --><li ng-repeat=\\\"unit in level.units | orderBy:[\\'unit_code\\',\\'sub_unit_code\\']\\\"><a id={{unit.id}} ui-sref=\\\"main.admin.unit({id: unit.id})\\\"><i ng-class=\\\"{\\'fa fa-circle-o fa-red\\':{{unit.published}} == true, \\'fa fa-circle-o\\':{{unit.published}} == false}\\\"></i> Unità {{unit.unit_code}}.{{unit.sub_unit_code}}</a></li><!-- Aggiungi Unità --><li ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.createUnit\\'}\\\"><a ng-click=\\\"sidebar.addUnit(level.id, unit.unit_code, unit.sub_unit_code)\\\"><i class=\\\"fa fa-plus\\\"></i> Aggiungi unità</a></li></ul></li><!-- !SECTION Livelli --><!-- SECTION Support --><li class=header>Admin</li><!-- Users --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.documentation\\'}\\\"><a ui-sref=main.admin.documentation><i class=\\\"fa fa-users\\\" aria-hidden=true></i> <span>Utenti</span></a></li><!-- !Users --><!-- Glossario --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.documentation\\'}\\\"><a ui-sref=main.admin.documentation><i class=\\\"fa fa-book\\\" aria-hidden=true></i> <span>Glossario</span></a></li><!-- !Glossario --><!-- Faq --><li class=treeview ng-class=\\\"{active: sidebar.state.current.name === \\'main.admin.faq\\'}\\\"><a ui-sref=main.admin.faq><i class=\\\"fa fa-comments-o\\\" aria-hidden=true></i> <span>Faq</span></a></li><!-- !Faq --><!-- !SECTION Support --></ul><!-- /.sidebar-menu --></div><!-- /.sidebar --></div><!-- /.main-sidebar -->\");\n$templateCache.put(\"app/components/sectionA/sectionA.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><h4 class=\\\"box-title box-title-disabled\\\" ng-show=!sectionA.models.current_unit_section_a.unit_section_a.active>A) {{sectionA.models.current_unit_section_a.unit_section_a.section_label}}</h4><a ng-show=sectionA.models.current_unit_section_a.unit_section_a.active data-toggle=collapse data-target=#intro aria-expanded=false class=collapsed role=button><h4 class=box-title>A) {{sectionA.models.current_unit_section_a.unit_section_a.section_label}}</h4></a><!--               <a data-toggle=\\\"collapse\\\" data-parent=\\\"#accordion\\\" data-target=\\\"#intro\\\" aria-expanded=\\\"false\\\" class=\\\"collapsed\\\" ng-click=\\\"isCollapsed = !isCollapsed\\\">\\n            <i ng-class=\\\"{\\'fa fa-angle-down\\': !isCollapsed, \\'fa fa-angle-up\\': isCollapsed}\\\" aria-hidden=\\\"true\\\"></i>\\n          </a> --><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=sectionA.models.current_unit_section_a.unit_section_a.active><div class=\\\"slider round\\\"></div></label></div></div><div id=intro box-expander=sectionA.models.current_unit_section_a.unit_section_a><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=sectionA.submit(sectionA.form.current_unit.unit.level_id) ng-model=sectionA.form ng-init=\\\"sectionA.form = sectionA.models\\\" novalidate><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a data-target=#tab_intro data-toggle=tab aria-expanded=true role=button>Intro</a></li><li><a data-target=#tab_video data-toggle=tab aria-expanded=false role=button>Video</a></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" id=tab_intro><div class=col-sm-6><div class=form-group><label>Codice Unità</label><select name=unit_code ng-model=sectionA.form.current_unit.unit.unit_code class=form-control ng-options=\\\"n for n in [] | range:1:21\\\"></select></div></div><div class=col-sm-6><div class=form-group><label>Sotto Codice Unità</label><select name=sub_unit_code ng-model=sectionA.form.current_unit.unit.sub_unit_code class=form-control ng-options=\\\"n for n in [] | range:1:21\\\"></select></div></div><div class=col-sm-6><div class=form-group><label for=\\\"\\\">Titolo Unità</label><input name=title ng-model=sectionA.form.current_unit_section_a.unit_section_a.section_title type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'unità\\\"></div></div></div><!-- /.tab-pane --><div class=\\\"tab-pane tab-big\\\" id=tab_video><div class=col-sm-6><div class=form-group><label for=\\\"\\\">Titolo Video</label><input ng-model=sectionA.form.current_unit_section_a.unit_section_a.video_title name=video_title type=text class=form-control placeholder=\\\"Inserisci il titolo del video\\\"></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': formIntroVideo[\\'video_subtitle\\'].$dirty && formIntroVideo[\\'video_subtitle\\'].$invalid}\\\"><label>Sottotitolo Video</label><input ng-model=sectionA.form.current_unit_section_a.unit_section_a.video_subtitle name=video_subtitle type=text class=form-control placeholder=\\\"Inserisci il sottotitolo del video\\\"></div></div><div class=col-sm-6><label for=\\\"\\\">Upload Video</label><input name=file type=file ng-model=sectionA.form.current_unit_section_a.unit_section_a.video_url file></div><div class=col-sm-6><label for=\\\"\\\">Tip Video</label><text-angular ng-model=sectionA.form.current_unit_section_a.unit_section_a.video_tips></text-angular></div></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --></form></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionB/infoPopoverTemplate.html\",\"<div class=info-popover><p class=info-popover-title>Regole di inserimento</p><ul><li>I <strong>nomi dei personaggi</strong> devono essere contenuti tra i caratteri <strong>‘@’</strong><br><span class=popover-example>es. @Pietro@</span></li><li>Le <strong>traduzioni</strong> devono essere tra parentesi quadre <strong>[...]</strong><br><span class=popover-example>es.[Chi è alla porta?]</span></li><li>Bisogna caricare <strong>un file audio per ogni pezzo di dialogo.</strong><br>Il nome del file audio associato alla porzione di dialogo <strong>va specificato dopo la fine del dialogo</strong> e devono essere contenuti tra i caratteri <strong>‘/’</strong> <span class=popover-example>es. /1.1-r1.mp3/</span></li><li>Usare il carattere <strong>‘#’</strong> per le <strong>frasi che non sono associate ad un personaggio</strong></li></ul></div>\");\n$templateCache.put(\"app/components/sectionB/sectionB.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><h4 class=\\\"box-title box-title-disabled\\\" ng-show=!vm.models.current_unit_section_b.unit_section_b.active>B) {{vm.models.current_unit_section_b.unit_section_b.section_title}}</h4><a ng-show=vm.models.current_unit_section_b.unit_section_b.active data-toggle=collapse role=button data-target=#sectionB aria-expanded=false class=collapsed><h4 class=box-title>B) {{vm.models.current_unit_section_b.unit_section_b.section_title}}</h4></a><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=vm.models.current_unit_section_b.unit_section_b.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionB box-expander=vm.models.current_unit_section_b.unit_section_b.active><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=\\\"\\\"><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a role=button data-target=#sec_b_tab_info data-toggle=tab aria-expanded=true>Info</a></li><li><a role=button data-target=#sec_b_tab_dialogo data-toggle=tab aria-expanded=false>Dialogo</a></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" id=sec_b_tab_info><tab-info-section model=vm.models.current_unit_section_b.unit_section_b></tab-info-section></div><!-- /.tab-pane --><div class=\\\"tab-pane tab-big\\\" id=sec_b_tab_dialogo><exercise-dialogue model=vm.models.current_unit_section_b.unit_section_b></exercise-dialogue></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --></form></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionC/sectionC.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><h4 class=\\\"box-title box-title-disabled\\\" ng-show=!vm.models.current_unit_section_c.unit_section_c.active>C) {{vm.models.current_unit_section_c.unit_section_c.section_title}}</h4><a ng-show=vm.models.current_unit_section_c.unit_section_c.active data-toggle=collapse role=button data-target=#sectionC aria-expanded=false class=collapsed><h4 class=box-title>C) {{vm.models.current_unit_section_c.unit_section_c.section_title}}</h4></a><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=vm.models.current_unit_section_c.unit_section_c.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionC box-expander=vm.models.current_unit_section_c.unit_section_c.active><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=\\\"\\\"><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a role=button data-target=#sec_c_tab_info data-toggle=tab aria-expanded=true>Info</a></li><li><a role=button data-target=#sec_c_tab_es data-toggle=tab aria-expanded=false>Esercizi</a></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" id=sec_c_tab_info><tab-info-section model=vm.models.current_unit_section_c.unit_section_c></tab-info-section></div><!-- /.tab-pane --><div class=\\\"tab-pane tab-big\\\" id=sec_c_tab_es><tab-exercise model=vm.models.current_unit_section_c.unit_section_c></tab-exercise></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --></form></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionE/sectionE.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><h4 class=\\\"box-title box-title-disabled\\\" ng-show=!vm.models.current_unit.unit.section_e.active>E) {{vm.models.current_unit_section_e.unit_section_e.section_title}}</h4><a ng-show=vm.models.current_unit.unit.section_e.active data-toggle=collapse role=button data-target=#sectionE aria-expanded=false class=collapsed><h4 class=box-title>E) {{vm.models.current_unit_section_e.unit_section_e.section_title}}</h4></a><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=vm.models.current_unit.unit.section_e.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionE box-expander=vm.models.current_unit.unit.section_e.active><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=\\\"\\\"><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a role=button data-target=#sec_e_tab_info data-toggle=tab aria-expanded=true>Info</a></li><li><a role=button data-target=#sec_e_tab_es data-toggle=tab aria-expanded=false>Esercizi</a></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" id=sec_e_tab_info><tab-info-section model=vm.models.current_unit.unit.section_e></tab-info-section></div><!-- /.tab-pane --><div class=\\\"tab-pane tab-big\\\" id=sec_e_tab_es><tab-exercise model=vm.models.current_unit.unit.section_e></tab-exercise></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --></form></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionD/sectionD.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><h4 class=\\\"box-title box-title-disabled\\\" ng-show=!vm.models.current_unit.unit.section_d.active>D) {{vm.models.current_unit_section_d.unit_section_d.section_title}}</h4><a ng-show=vm.models.current_unit.unit.section_d.active data-toggle=collapse role=button data-target=#sectionD aria-expanded=false class=collapsed><h4 class=box-title>D) {{vm.models.current_unit_section_d.unit_section_d.section_title}}</h4></a><div class=pull-right><label class=switch ng-click=$event.stopPropagation();><input type=checkbox ng-model=vm.models.current_unit.unit.section_d.active><div class=\\\"slider round\\\"></div></label></div></div><div id=sectionD box-expander=vm.models.current_unit.unit.section_d.active><div class=box-body><div class=row><div class=col-xs-12><form id=formIntroVideo name=formIntroVideo ng-submit=\\\"\\\"><div class=nav-tabs-custom><ul class=\\\"nav nav-tabs\\\"><li class=active><a role=button data-target=#sec_d_tab_info data-toggle=tab aria-expanded=true>Info</a></li><li><a role=button data-target=#sec_d_tab_teoria data-toggle=tab aria-expanded=true>Teoria</a></li><li><a role=button data-target=#sec_d_tab_teoria_depth data-toggle=tab aria-expanded=true>Testo Approfondimento</a></li><li><a role=button data-target=#sec_d_tab_es data-toggle=tab aria-expanded=false>Esercizi</a></li></ul><div class=tab-content><div class=\\\"tab-pane active\\\" id=sec_d_tab_info><tab-info-section model=vm.models.current_unit_section_d.unit_section_d></tab-info-section></div><div class=\\\"tab-pane tab-big\\\" id=sec_d_tab_teoria><tab-theory model=vm.models.current_unit_section_d.unit_section_d></tab-theory></div><div class=\\\"tab-pane tab-big\\\" id=sec_d_tab_teoria_depth><tab-theory-in-depth model=vm.models.current_unit_section_d.unit_section_d></tab-theory-in-depth></div><!-- /.tab-pane --><div class=\\\"tab-pane tab-big\\\" id=sec_d_tab_es><tab-exercise model=vm.models.current_unit_section_d.unit_section_d></tab-exercise></div><!-- /.tab-pane --></div><!-- /.tab-content --><div class=pull-right><input type=submit class=\\\"btn btn-success\\\" value=\\\"Salva Sezione\\\"></div></div><!-- nav-tabs-custom --></form></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/sectionUnit/sectionUnit.html\",\"<div class=row><div class=col-xs-12><div class=\\\"panel box panel-box-red\\\"><div class=\\\"box-header with-border\\\"><a data-toggle=collapse data-target=#sectionUnit aria-expanded=false class=collapsed role=button><h4 class=box-title>Info Unità</h4></a></div><div id=sectionUnit box-expander=sectionUnit.models.current_unit.unit class=\\\"panel-collapse collapse in\\\"><div class=box-body><form id=formIntroVideo name=formIntroVideo ng-submit=sectionUnit.submit(sectionUnit.form.current_unit.unit.level_id) ng-model=sectionUnit.form ng-init=\\\"sectionUnit.form = sectionUnit.models\\\" novalidate><div class=row id=tab_intro><div class=col-sm-6><div class=form-group><label>Codice Unità</label><select name=unit_code ng-model=sectionUnit.form.current_unit.unit.unit_code class=form-control ng-options=\\\"n for n in [] | range:1:21\\\"></select></div></div><div class=col-sm-6><div class=form-group><label>Sotto Codice Unità</label><select name=sub_unit_code ng-model=sectionUnit.form.current_unit.unit.sub_unit_code class=form-control ng-options=\\\"n for n in [] | range:1:21\\\"></select></div></div><div class=col-sm-6><div class=form-group><label for=\\\"\\\">Titolo Unità</label><input name=title ng-model=sectionUnit.form.current_unit.unit.title type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'unità\\\"></div></div></div><div class=row><div class=col-xs-12><input type=submit class=\\\"btn btn-success pull-right\\\" value=Elimina> <input type=submit class=\\\"btn btn-default pull-right\\\" value=Salva></div></div></form></div></div></div></div></div>\");\n$templateCache.put(\"app/components/tabExercise/tabExercise.html\",\"<div class=col-sm-6><label>Numero Esercizio</label><select ng-model=model.select class=form-control ng-options=\\\"n for n in [] | range:1:6\\\" required></select></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Titolo Esercizio</label><input ng-model=unit.title name=name{{$index+1}} type=text class=form-control placeholder=\\\"Inserisci il titolo dell\\'esercizio\\\" required> <span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Sottotitolo Esercizio</label><input ng-model=unit.title name=name{{$index+1}} type=text class=form-control placeholder=\\\"Inserisci il sottotitolo dell\\'esercizio\\\" required> <span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div></div><div class=col-sm-6><label>Tipologia Esercizio</label><select ng-model=rangeUnit class=form-control ng-options=\\\"n for n in [] | range:1:6\\\" required></select></div>\");\n$templateCache.put(\"app/components/tabInfoSection/tabInfoSection.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\"><label for=\\\"\\\">Titolo Sessione</label><input ng-model=model.section_title name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il titolo della sessione\\\" required> <span ng-show=\\\"\\\" ng-messages=\\\"\\\" class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div></div>\");\n$templateCache.put(\"app/components/tabTheory/tabTheory.html\",\"<div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Titolo</label><input ng-model=model.theory_title name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il titolo\\\" required><span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': formIntroVideo[\\'name\\' + ($index+1)].$dirty && formIntroVideo[\\'name\\' + ($index+1)].$invalid}\\\"><label for=formIntroVideo-subUnitCod{{$index+1}}>Sottotitolo</label><input ng-model=model.theory_subtitle name=\\\"\\\" type=text class=form-control placeholder=\\\"Inserisci il sottotitolo\\\" required> <span ng-show=\\\"formIntroVideo[\\'name\\' + ($index+1)].$dirty\\\" ng-messages=\\\"formIntroVideo[\\'name\\' + ($index+1)].$error\\\" class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Testo</label><text-angular ng-model=model.theory_text></text-angular></div></div><div class=col-sm-6><div class=\\\"form-group has-feedback\\\" ng-class=\\\"\\\"><label>Tip Teoria</label><text-angular ng-model=model.theory_text_tips></text-angular></div></div>\");\n$templateCache.put(\"app/components/tabTheoryInDepth/tabTheoryInDepth.html\",\"\");\n$templateCache.put(\"app/pages/admin/admin.html\",\"<div class=wrapper><galore-header></galore-header><galore-sidebar></galore-sidebar><div class=content-wrapper><div ui-view></div></div><galore-footer></galore-footer></div>\");\n$templateCache.put(\"app/pages/createUnit/createUnit.html\",\"<section class=create-unit><section class=content-header><h1>Aggiungi unità</h1></section><section class=content><section-a></section-a><section-b></section-b><section-c></section-c><section-d></section-d><section-e></section-e></section></section>\");\n$templateCache.put(\"app/pages/dashboard/dashboard.html\",\"<div class=\\\"content events\\\"><div class=row><div class=col-xs-12><div class=\\\"box box-default\\\" ng-show=\\\"vm.models.events.length === 0\\\"><div class=box-header><div class=box-title>Dashboard</div></div></div><!-- /.box --></div></div></div>\");\n$templateCache.put(\"app/pages/login/login.html\",\"<div class=\\\"login login-box\\\"><div class=login-logo><img src=/assets/images/logo-login.png alt=\\\"English Galore\\\"></div><!-- /.login-logo --><div class=login-box-body><p class=login-box-msg>Sign in to start your session</p><form id=loginForm name=loginForm ng-submit=vm.login()><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': loginForm.email.$dirty && loginForm.email.$invalid}\\\"><input ng-model=vm.user.email name=email type=email class=form-control placeholder=Email required> <span class=\\\"glyphicon glyphicon-envelope form-control-feedback\\\"></span> <span ng-show=loginForm.email.$dirty ng-messages=loginForm.email.$error class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span> <span ng-message=email>Inserire un indirizzo email valido</span></span></div><div class=\\\"form-group has-feedback\\\" ng-class=\\\"{\\'has-error\\': loginForm.password.$dirty && loginForm.password.$invalid}\\\"><input ng-model=vm.user.password name=password type=password class=form-control placeholder=Password required> <span class=\\\"glyphicon glyphicon-lock form-control-feedback\\\"></span> <span ng-show=loginForm.password.$dirty ng-messages=loginForm.password.$error class=help-block role=alert><span ng-message=required>Questo campo è obbligatorio</span></span></div><div class=row><!-- /.col --><div class=col-xs-12><button ng-disabled=loginForm.$invalid type=submit class=\\\"btn btn-success btn-block btn-flat\\\">Sign In</button></div><!-- /.col --></div></form></div><!-- /.login-box-body --></div>\");\n$templateCache.put(\"app/pages/main/main.html\",\"<div class=animate ui-view></div>\");\n$templateCache.put(\"app/pages/profile/profile.html\",\"<div class=profile><section class=content-header><h1>Gestione Profilo</h1></section></div>\");\n$templateCache.put(\"app/pages/unit/unit.html\",\"<section class=unit><section class=content-header><h1>{{vm.models.current_unit.unit.title}}</h1></section><section class=content><section-unit></section-unit><section-a ng-if=vm.models.current_unit.unit.unit_section_a></section-a><section-b ng-if=vm.models.current_unit.unit.unit_section_b></section-b><section-c ng-if=vm.models.current_unit.unit.unit_section_c></section-c><section-d ng-if=vm.models.current_unit.unit.unit_section_d></section-d><section-e ng-if=vm.models.current_unit.unit.unit_section_e></section-e></section></section>\");}]);"],"sourceRoot":"/source/"}